{"version":3,"file":"80efaec8-666e3c7f77a803d1f20a.js","mappings":"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","sources":["webpack://fake-programmer/./node_modules/@code-hike/mdx/dist/components.esm.mjs"],"sourcesContent":["\"use client\";\nimport React from 'react';\nimport { unstable_batchedUpdates } from 'react-dom';\n\n/******************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\n// from https://stackoverflow.com/a/53936623/1325646\r\nconst isValidHex = (hex) => /^#([A-Fa-f0-9]{3,4}){1,2}$/.test(hex);\r\nconst getChunksFromString = (st, chunkSize) => st.match(new RegExp(`.{${chunkSize}}`, \"g\"));\r\nconst convertHexUnitTo256 = (hex) => parseInt(hex.repeat(2 / hex.length), 16);\r\nfunction getAlphaFloat(a, alpha) {\r\n    if (typeof a !== \"undefined\") {\r\n        return a / 255;\r\n    }\r\n    if (typeof alpha != \"number\" || alpha < 0 || alpha > 1) {\r\n        return 1;\r\n    }\r\n    return alpha;\r\n}\r\nfunction hexToObject(hex) {\r\n    if (!hex) {\r\n        return undefined;\r\n    }\r\n    if (!isValidHex(hex)) {\r\n        throw new Error(\"Invalid color string, must be a valid hex color\");\r\n    }\r\n    const chunkSize = Math.floor((hex.length - 1) / 3);\r\n    const hexArr = getChunksFromString(hex.slice(1), chunkSize);\r\n    const [r, g, b, a] = hexArr.map(convertHexUnitTo256);\r\n    return {\r\n        r,\r\n        g,\r\n        b,\r\n        a: getAlphaFloat(a, 1),\r\n    };\r\n}\r\nfunction objectToHex(object) {\r\n    if (!object) {\r\n        return undefined;\r\n    }\r\n    const { r, g, b, a } = object;\r\n    const alpha = Math.round(a * 255);\r\n    return `#${r.toString(16).padStart(2, \"0\")}${g\r\n        .toString(16)\r\n        .padStart(2, \"0\")}${b\r\n        .toString(16)\r\n        .padStart(2, \"0\")}${alpha\r\n        .toString(16)\r\n        .padStart(2, \"0\")}`;\r\n}\r\nfunction transparent(color, opacity) {\r\n    if (!color) {\r\n        return color;\r\n    }\r\n    const { r, g, b, a } = hexToObject(color);\r\n    return objectToHex({ r, g, b, a: a * opacity });\r\n}\n\nfunction map(tween, fn) {\r\n    return {\r\n        prev: fn(tween.prev, \"prev\"),\r\n        next: fn(tween.next, \"next\"),\r\n    };\r\n}\r\nfunction withDefault(t, deft) {\r\n    return {\r\n        prev: (t === null || t === void 0 ? void 0 : t.prev) === undefined ? deft : t.prev,\r\n        next: (t === null || t === void 0 ? void 0 : t.next) === undefined ? deft : t.next,\r\n    };\r\n}\r\nfunction mapWithDefault(tween, deft, fn) {\r\n    return map(withDefault(tween, deft), fn);\r\n}\r\nfunction anyValue(tween, fn) {\r\n    return fn(tween.prev) || fn(tween.next);\r\n}\n\nfunction codeToText(code) {\r\n    return code.lines\r\n        .map(line => line.tokens.map(token => token.content).join(\"\"))\r\n        .join(\"\\n\");\r\n}\n\nfunction mapFocusToLineNumbers(focus, lines) {\r\n    if (!focus) {\r\n        // focus all lines\r\n        return mergeToObject([...lines.keys()].map(lineIndex => ({\r\n            [lineIndex + 1]: true,\r\n        })));\r\n    }\r\n    else {\r\n        return mergeToObject(splitParts(focus).map(parsePartToObject));\r\n    }\r\n}\r\nfunction splitParts(focus) {\r\n    return focus.split(/,(?![^\\[]*\\])/g);\r\n}\r\nfunction mergeToObject(entries) {\r\n    return entries.reduce((acc, obj) => Object.assign(acc, obj), {});\r\n}\r\nfunction hasColumns(part) {\r\n    return !!part.match(/(\\d+)\\[(.+)\\]/);\r\n}\r\nfunction parsePartToObject(part) {\r\n    // a part could be\r\n    // - a line number: \"2\"\r\n    // - a line range: \"5:9\"\r\n    // - a line number with a column selector: \"2[1,3:5,9]\"\r\n    const columnsMatch = part.match(/(\\d+)\\[(.+)\\]/);\r\n    if (columnsMatch) {\r\n        const [, line, columns] = columnsMatch;\r\n        const columnsList = columns\r\n            .split(\",\")\r\n            .map(parseExtremes);\r\n        const lineNumber = Number(line);\r\n        return { [lineNumber]: columnsList };\r\n    }\r\n    else {\r\n        return mergeToObject(expandString(part).map(lineNumber => ({\r\n            [lineNumber]: true,\r\n        })));\r\n    }\r\n}\r\nfunction parseExtremes(part) {\r\n    // Transforms something like\r\n    // - \"1:3\" to {start:1, end: 3}\r\n    // - \"4\" to {start:4, end:4}\r\n    const [start, end] = part.split(\":\");\r\n    if (!isNaturalNumber(start)) {\r\n        throw new FocusNumberError(start);\r\n    }\r\n    const startNumber = Number(start);\r\n    if (startNumber < 1) {\r\n        throw new LineOrColumnNumberError();\r\n    }\r\n    if (!end) {\r\n        return { start: startNumber, end: startNumber };\r\n    }\r\n    else {\r\n        if (!isNaturalNumber(end)) {\r\n            throw new FocusNumberError(end);\r\n        }\r\n        return { start: startNumber, end: +end };\r\n    }\r\n}\r\n/**\r\n * Return the first and last indexes to focus, both included\r\n */\r\nfunction getFocusExtremes(focus, lines) {\r\n    if (!focus) {\r\n        return [0, lines.length - 1];\r\n    }\r\n    else {\r\n        const parsed = parseFocus(focus);\r\n        const focusedIndexes = Object.keys(parsed).map(i => parseInt(i, 10));\r\n        return [\r\n            Math.min(...focusedIndexes),\r\n            Math.max(...focusedIndexes),\r\n        ];\r\n    }\r\n}\r\nfunction getFocusIndexes(focus, lines) {\r\n    if (!focus) {\r\n        return [...lines.keys()];\r\n    }\r\n    else {\r\n        const parsed = parseFocus(focus);\r\n        const focusedIndexes = Object.keys(parsed).map(i => parseInt(i, 10));\r\n        return focusedIndexes;\r\n    }\r\n}\r\nfunction parseFocus(focus) {\r\n    if (!focus) {\r\n        throw new Error(\"Focus cannot be empty\");\r\n    }\r\n    try {\r\n        const parts = focus\r\n            .split(/,(?![^\\[]*\\])/g)\r\n            .map(parsePart);\r\n        return fromEntries(parts.flat());\r\n    }\r\n    catch (error) {\r\n        // TODO enhance error\r\n        throw error;\r\n    }\r\n}\r\nfunction parsePart(part) {\r\n    // a part could be\r\n    // - a line number: \"2\"\r\n    // - a line range: \"5:9\"\r\n    // - a line number with a column selector: \"2[1,3:5,9]\"\r\n    const columnsMatch = part.match(/(\\d+)\\[(.+)\\]/);\r\n    if (columnsMatch) {\r\n        const [, line, columns] = columnsMatch;\r\n        const columnsList = columns.split(\",\").map(expandString);\r\n        const lineIndex = Number(line) - 1;\r\n        const columnIndexes = columnsList.flat().map(c => c - 1);\r\n        return [[lineIndex, columnIndexes]];\r\n    }\r\n    else {\r\n        return expandString(part).map(lineNumber => [\r\n            lineNumber - 1,\r\n            true,\r\n        ]);\r\n    }\r\n}\r\nfunction expandString(part) {\r\n    // Transforms something like\r\n    // - \"1:3\" to [1,2,3]\r\n    // - \"4\" to [4]\r\n    const [start, end] = part.split(\":\");\r\n    if (!isNaturalNumber(start)) {\r\n        throw new FocusNumberError(start);\r\n    }\r\n    const startNumber = Number(start);\r\n    if (startNumber < 1) {\r\n        throw new LineOrColumnNumberError();\r\n    }\r\n    if (!end) {\r\n        return [startNumber];\r\n    }\r\n    else {\r\n        if (!isNaturalNumber(end)) {\r\n            throw new FocusNumberError(end);\r\n        }\r\n        const list = [];\r\n        for (let i = startNumber; i <= +end; i++) {\r\n            list.push(i);\r\n        }\r\n        return list;\r\n    }\r\n}\r\nfunction isNaturalNumber(n) {\r\n    n = n.toString(); // force the value in case it is not\r\n    var n1 = Math.abs(n), n2 = parseInt(n, 10);\r\n    return !isNaN(n1) && n2 === n1 && n1.toString() === n;\r\n}\r\nclass LineOrColumnNumberError extends Error {\r\n    constructor() {\r\n        super(`Invalid line or column number in focus string`);\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n    }\r\n}\r\nclass FocusNumberError extends Error {\r\n    constructor(number) {\r\n        super(`Invalid number \"${number}\" in focus string`);\r\n        this.number = number;\r\n        Object.setPrototypeOf(this, new.target.prototype);\r\n    }\r\n}\r\nfunction fromEntries(pairs) {\r\n    const result = {};\r\n    let index = -1, length = pairs == null ? 0 : pairs.length;\r\n    while (++index < length) {\r\n        var pair = pairs[index];\r\n        result[pair[0]] = pair[1];\r\n    }\r\n    return result;\r\n}\n\nconst useLayoutEffect$4 = typeof window !== \"undefined\"\r\n    ? React.useLayoutEffect\r\n    : React.useEffect;\r\n// for debugging:\r\n// export const useLayoutEffect = (\r\n//   effect: any,\r\n//   deps?: any\r\n// ) => {}\r\n// from https://overreacted.io/making-setinterval-declarative-with-react-hooks/\r\nfunction useInterval(callback, delay) {\r\n    const savedCallback = React.useRef(callback);\r\n    React.useEffect(() => {\r\n        savedCallback.current = callback;\r\n    }, [callback]);\r\n    React.useEffect(() => {\r\n        if (!delay && delay !== 0) {\r\n            return undefined;\r\n        }\r\n        const id = setInterval(() => savedCallback.current(), delay);\r\n        return () => clearInterval(id);\r\n    }, [delay]);\r\n}\n\nfunction clamp$2(x, min, max) {\r\n    return Math.min(Math.max(x, min), max);\r\n}\n\nconst DEFAULT_WIDTH = 200;\r\n// type DimensionsResult = {\r\n//   width: number\r\n//   height: number\r\n//   lineWidths: { prev: number; next: number }\r\n//   lineHeight: number\r\n//   colWidth: number\r\n// }\r\nfunction useDimensions(code, focus, minColumns, lineNumbers, rows, deps) {\r\n    const [dimensions, setDimensions] = React.useState(null);\r\n    // in case the element starts hidden https://github.com/code-hike/codehike/issues/372\r\n    const [visibility, markAsVisible] = React.useState(0);\r\n    const windowWidth = useWindowWidth();\r\n    const prevLineRef = React.useRef(null);\r\n    // the element to render before dimensions are calculated\r\n    const { prevLongestLine, nextLongestLine, element } = React.useMemo(() => {\r\n        const prevLongestLine = getLongestLine(code.prev, focus.prev);\r\n        const nextLongestLine = getLongestLine(code.next, focus.next);\r\n        const lines = (code.prev || code.next)\r\n            .trimEnd()\r\n            .split(newlineRe);\r\n        const largestLineNumber = Math.max(lines.length, 10);\r\n        if (rows) {\r\n            // make the lines match the requested number of rows\r\n            const heightInLines = rows === \"focus\"\r\n                ? focusHeightInLines(focus, lines)\r\n                : rows;\r\n            let i = lines.length;\r\n            while (i < heightInLines) {\r\n                lines.push(\"\");\r\n                i++;\r\n            }\r\n            // remove extra lines to match the requested rows\r\n            while (i > heightInLines) {\r\n                lines.pop();\r\n                i--;\r\n            }\r\n            // if we removed prevLongestLine, add it back\r\n            if (prevLongestLine &&\r\n                !lines.includes(prevLongestLine)) {\r\n                lines[lines.length - 1] = prevLongestLine;\r\n            }\r\n        }\r\n        // avod setting the ref more than once https://github.com/code-hike/codehike/issues/232\r\n        let prevLineRefSet = false;\r\n        const element = (React.createElement(\"code\", { className: \"ch-code-scroll-parent\" },\r\n            React.createElement(\"br\", null),\r\n            lines.map((line, i) => {\r\n                const ref = !prevLineRefSet && line === prevLongestLine\r\n                    ? prevLineRef\r\n                    : undefined;\r\n                prevLineRefSet = prevLineRefSet || ref != null;\r\n                return (React.createElement(\"div\", { ref: ref, key: i },\r\n                    lineNumbers ? (React.createElement(\"span\", { className: \"ch-code-line-number\" },\r\n                        \"_\",\r\n                        largestLineNumber)) : undefined,\r\n                    React.createElement(\"div\", { style: {\r\n                            display: \"inline-block\",\r\n                            // leftPad\r\n                            marginLeft: 16,\r\n                        } },\r\n                        React.createElement(\"span\", null, line))));\r\n            }),\r\n            React.createElement(\"br\", null)));\r\n        return { prevLongestLine, nextLongestLine, element };\r\n    }, [code]);\r\n    const allDeps = [\r\n        ...deps,\r\n        windowWidth,\r\n        prevLongestLine,\r\n        nextLongestLine,\r\n        minColumns,\r\n        visibility,\r\n    ];\r\n    useLayoutEffect$4(() => {\r\n        var _a;\r\n        if (prevLineRef.current) {\r\n            const pll = prevLineRef.current;\r\n            const contentElement = pll === null || pll === void 0 ? void 0 : pll.parentElement;\r\n            const codeElement = contentElement.parentElement;\r\n            const { width } = codeElement.getBoundingClientRect();\r\n            if (!width && visibility === 0) {\r\n                const resizeObserver = new ResizeObserver(([entry]) => {\r\n                    const { width } = entry.contentRect;\r\n                    if (width) {\r\n                        resizeObserver.disconnect();\r\n                        markAsVisible(1);\r\n                    }\r\n                });\r\n                resizeObserver.observe(codeElement);\r\n                return () => resizeObserver.disconnect();\r\n            }\r\n            // TODO is it clientWidth or clientRect?\r\n            const lineContentDiv = pll === null || pll === void 0 ? void 0 : pll.querySelector(\":scope > div\");\r\n            const lineNumberSpan = pll === null || pll === void 0 ? void 0 : pll.querySelector(\":scope > span\");\r\n            const lnw = lineNumberSpan\r\n                ? getWidthWithPadding(lineNumberSpan)\r\n                : 0;\r\n            const plw = getWidthWithoutPadding(lineContentDiv);\r\n            const colWidth = plw / prevLongestLine.length || 1;\r\n            const nlw = nextLongestLine.length * colWidth;\r\n            const lineHeight = (_a = getHeightWithoutPadding(lineContentDiv)) !== null && _a !== void 0 ? _a : 20;\r\n            const d = {\r\n                containerWidth: getWidthWithoutPadding(codeElement.parentElement),\r\n                containerHeight: getHeightWithoutPadding(codeElement.parentElement),\r\n                contentWidth: getWidthWithoutPadding(contentElement.parentElement),\r\n                contentHeight: getHeightWithoutPadding(contentElement.parentElement),\r\n                lineWidths: [\r\n                    plw || nlw || DEFAULT_WIDTH,\r\n                    nlw || plw || DEFAULT_WIDTH,\r\n                ],\r\n                lineWidth: [\r\n                    Math.max(plw || nlw || DEFAULT_WIDTH, colWidth * minColumns),\r\n                    Math.max(nlw || plw || DEFAULT_WIDTH, colWidth * minColumns),\r\n                ],\r\n                lineHeight,\r\n                colWidth,\r\n                lineNumberWidth: lnw,\r\n                deps: allDeps,\r\n            };\r\n            setDimensions(d);\r\n        }\r\n        return () => { };\r\n    }, allDeps);\r\n    if (!dimensions ||\r\n        depsChanged(dimensions.deps, allDeps)) {\r\n        return { element, dimensions: null };\r\n    }\r\n    else {\r\n        return { element, dimensions };\r\n    }\r\n}\r\nconst newlineRe = /\\r\\n|\\r|\\n/;\r\nfunction getLongestLine(code, focus) {\r\n    const lines = code ? code.split(newlineRe) : [\"\"];\r\n    const focusIndexes = getFocusIndexes(focus, lines);\r\n    let longestLine = \"\";\r\n    lines.forEach((line, index) => {\r\n        if (focusIndexes.includes(index) &&\r\n            line.length > longestLine.length) {\r\n            longestLine = line;\r\n        }\r\n    });\r\n    return longestLine;\r\n}\r\nfunction getWidthWithoutPadding(element) {\r\n    const computedStyle = getComputedStyle(element);\r\n    return (parseFloat(computedStyle.width) -\r\n        parseFloat(computedStyle.paddingLeft) -\r\n        parseFloat(computedStyle.paddingRight));\r\n}\r\nfunction getWidthWithPadding(element) {\r\n    const computedStyle = getComputedStyle(element);\r\n    return parseFloat(computedStyle.width);\r\n}\r\nfunction getHeightWithoutPadding(element) {\r\n    if (!element)\r\n        return null;\r\n    const computedStyle = getComputedStyle(element);\r\n    return (parseFloat(computedStyle.height) -\r\n        parseFloat(computedStyle.paddingTop) -\r\n        parseFloat(computedStyle.paddingBottom));\r\n}\r\nfunction depsChanged(oldDeps, newDeps) {\r\n    for (let i = 0; i < oldDeps.length; i++) {\r\n        if (oldDeps[i] !== newDeps[i])\r\n            return true;\r\n    }\r\n    return false;\r\n}\r\nfunction useWindowWidth() {\r\n    const [width, setWidth] = React.useState(undefined);\r\n    React.useEffect(() => {\r\n        function handleResize() {\r\n            setWidth(window.innerWidth);\r\n        }\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n    return width;\r\n}\r\nfunction focusHeightInLines(focus, lines) {\r\n    const [start, end] = getFocusExtremes(focus.prev, lines);\r\n    return end - start + 1;\r\n}\n\nfunction Diff() {}\nDiff.prototype = {\n  diff: function diff(oldString, newString) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var callback = options.callback;\n\n    if (typeof options === 'function') {\n      callback = options;\n      options = {};\n    }\n\n    this.options = options;\n    var self = this;\n\n    function done(value) {\n      if (callback) {\n        setTimeout(function () {\n          callback(undefined, value);\n        }, 0);\n        return true;\n      } else {\n        return value;\n      }\n    } // Allow subclasses to massage the input prior to running\n\n\n    oldString = this.castInput(oldString);\n    newString = this.castInput(newString);\n    oldString = this.removeEmpty(this.tokenize(oldString));\n    newString = this.removeEmpty(this.tokenize(newString));\n    var newLen = newString.length,\n        oldLen = oldString.length;\n    var editLength = 1;\n    var maxEditLength = newLen + oldLen;\n    var bestPath = [{\n      newPos: -1,\n      components: []\n    }]; // Seed editLength = 0, i.e. the content starts with the same values\n\n    var oldPos = this.extractCommon(bestPath[0], newString, oldString, 0);\n\n    if (bestPath[0].newPos + 1 >= newLen && oldPos + 1 >= oldLen) {\n      // Identity per the equality and tokenizer\n      return done([{\n        value: this.join(newString),\n        count: newString.length\n      }]);\n    } // Main worker method. checks all permutations of a given edit length for acceptance.\n\n\n    function execEditLength() {\n      for (var diagonalPath = -1 * editLength; diagonalPath <= editLength; diagonalPath += 2) {\n        var basePath = void 0;\n\n        var addPath = bestPath[diagonalPath - 1],\n            removePath = bestPath[diagonalPath + 1],\n            _oldPos = (removePath ? removePath.newPos : 0) - diagonalPath;\n\n        if (addPath) {\n          // No one else is going to attempt to use this value, clear it\n          bestPath[diagonalPath - 1] = undefined;\n        }\n\n        var canAdd = addPath && addPath.newPos + 1 < newLen,\n            canRemove = removePath && 0 <= _oldPos && _oldPos < oldLen;\n\n        if (!canAdd && !canRemove) {\n          // If this path is a terminal then prune\n          bestPath[diagonalPath] = undefined;\n          continue;\n        } // Select the diagonal that we want to branch from. We select the prior\n        // path whose position in the new string is the farthest from the origin\n        // and does not pass the bounds of the diff graph\n\n\n        if (!canAdd || canRemove && addPath.newPos < removePath.newPos) {\n          basePath = clonePath(removePath);\n          self.pushComponent(basePath.components, undefined, true);\n        } else {\n          basePath = addPath; // No need to clone, we've pulled it from the list\n\n          basePath.newPos++;\n          self.pushComponent(basePath.components, true, undefined);\n        }\n\n        _oldPos = self.extractCommon(basePath, newString, oldString, diagonalPath); // If we have hit the end of both strings, then we are done\n\n        if (basePath.newPos + 1 >= newLen && _oldPos + 1 >= oldLen) {\n          return done(buildValues(self, basePath.components, newString, oldString, self.useLongestToken));\n        } else {\n          // Otherwise track this path as a potential candidate and continue.\n          bestPath[diagonalPath] = basePath;\n        }\n      }\n\n      editLength++;\n    } // Performs the length of edit iteration. Is a bit fugly as this has to support the\n    // sync and async mode which is never fun. Loops over execEditLength until a value\n    // is produced.\n\n\n    if (callback) {\n      (function exec() {\n        setTimeout(function () {\n          // This should not happen, but we want to be safe.\n\n          /* istanbul ignore next */\n          if (editLength > maxEditLength) {\n            return callback();\n          }\n\n          if (!execEditLength()) {\n            exec();\n          }\n        }, 0);\n      })();\n    } else {\n      while (editLength <= maxEditLength) {\n        var ret = execEditLength();\n\n        if (ret) {\n          return ret;\n        }\n      }\n    }\n  },\n  pushComponent: function pushComponent(components, added, removed) {\n    var last = components[components.length - 1];\n\n    if (last && last.added === added && last.removed === removed) {\n      // We need to clone here as the component clone operation is just\n      // as shallow array clone\n      components[components.length - 1] = {\n        count: last.count + 1,\n        added: added,\n        removed: removed\n      };\n    } else {\n      components.push({\n        count: 1,\n        added: added,\n        removed: removed\n      });\n    }\n  },\n  extractCommon: function extractCommon(basePath, newString, oldString, diagonalPath) {\n    var newLen = newString.length,\n        oldLen = oldString.length,\n        newPos = basePath.newPos,\n        oldPos = newPos - diagonalPath,\n        commonCount = 0;\n\n    while (newPos + 1 < newLen && oldPos + 1 < oldLen && this.equals(newString[newPos + 1], oldString[oldPos + 1])) {\n      newPos++;\n      oldPos++;\n      commonCount++;\n    }\n\n    if (commonCount) {\n      basePath.components.push({\n        count: commonCount\n      });\n    }\n\n    basePath.newPos = newPos;\n    return oldPos;\n  },\n  equals: function equals(left, right) {\n    if (this.options.comparator) {\n      return this.options.comparator(left, right);\n    } else {\n      return left === right || this.options.ignoreCase && left.toLowerCase() === right.toLowerCase();\n    }\n  },\n  removeEmpty: function removeEmpty(array) {\n    var ret = [];\n\n    for (var i = 0; i < array.length; i++) {\n      if (array[i]) {\n        ret.push(array[i]);\n      }\n    }\n\n    return ret;\n  },\n  castInput: function castInput(value) {\n    return value;\n  },\n  tokenize: function tokenize(value) {\n    return value.split('');\n  },\n  join: function join(chars) {\n    return chars.join('');\n  }\n};\n\nfunction buildValues(diff, components, newString, oldString, useLongestToken) {\n  var componentPos = 0,\n      componentLen = components.length,\n      newPos = 0,\n      oldPos = 0;\n\n  for (; componentPos < componentLen; componentPos++) {\n    var component = components[componentPos];\n\n    if (!component.removed) {\n      if (!component.added && useLongestToken) {\n        var value = newString.slice(newPos, newPos + component.count);\n        value = value.map(function (value, i) {\n          var oldValue = oldString[oldPos + i];\n          return oldValue.length > value.length ? oldValue : value;\n        });\n        component.value = diff.join(value);\n      } else {\n        component.value = diff.join(newString.slice(newPos, newPos + component.count));\n      }\n\n      newPos += component.count; // Common case\n\n      if (!component.added) {\n        oldPos += component.count;\n      }\n    } else {\n      component.value = diff.join(oldString.slice(oldPos, oldPos + component.count));\n      oldPos += component.count; // Reverse add and remove so removes are output first to match common convention\n      // The diffing algorithm is tied to add then remove output and this is the simplest\n      // route to get the desired output with minimal overhead.\n\n      if (componentPos && components[componentPos - 1].added) {\n        var tmp = components[componentPos - 1];\n        components[componentPos - 1] = components[componentPos];\n        components[componentPos] = tmp;\n      }\n    }\n  } // Special case handle for when one terminal is ignored (i.e. whitespace).\n  // For this case we merge the terminal into the prior string and drop the change.\n  // This is only available for string mode.\n\n\n  var lastComponent = components[componentLen - 1];\n\n  if (componentLen > 1 && typeof lastComponent.value === 'string' && (lastComponent.added || lastComponent.removed) && diff.equals('', lastComponent.value)) {\n    components[componentLen - 2].value += lastComponent.value;\n    components.pop();\n  }\n\n  return components;\n}\n\nfunction clonePath(path) {\n  return {\n    newPos: path.newPos,\n    components: path.components.slice(0)\n  };\n}\n\n//\n// Ranges and exceptions:\n// Latin-1 Supplement, 008000FF\n//  - U+00D7   Multiplication sign\n//  - U+00F7   Division sign\n// Latin Extended-A, 0100017F\n// Latin Extended-B, 0180024F\n// IPA Extensions, 025002AF\n// Spacing Modifier Letters, 02B002FF\n//  - U+02C7   &#711;  Caron\n//  - U+02D8   &#728;  Breve\n//  - U+02D9   &#729;  Dot Above\n//  - U+02DA   &#730;  Ring Above\n//  - U+02DB   &#731;  Ogonek\n//  - U+02DC   &#732;  Small Tilde\n//  - U+02DD   &#733;  Double Acute Accent\n// Latin Extended Additional, 1E001EFF\n\nvar extendedWordChars = /^[A-Za-z\\xC0-\\u02C6\\u02C8-\\u02D7\\u02DE-\\u02FF\\u1E00-\\u1EFF]+$/;\nvar reWhitespace = /\\S/;\nvar wordDiff = new Diff();\n\nwordDiff.equals = function (left, right) {\n  if (this.options.ignoreCase) {\n    left = left.toLowerCase();\n    right = right.toLowerCase();\n  }\n\n  return left === right || this.options.ignoreWhitespace && !reWhitespace.test(left) && !reWhitespace.test(right);\n};\n\nwordDiff.tokenize = function (value) {\n  var tokens = value.split(/(\\s+|[()[\\]{}'\"]|\\b)/); // Join the boundary splits that we do not consider to be boundaries. This is primarily the extended Latin character set.\n\n  for (var i = 0; i < tokens.length - 1; i++) {\n    // If we have an empty string in the next field and we have only word chars before and after, merge\n    if (!tokens[i + 1] && tokens[i + 2] && extendedWordChars.test(tokens[i]) && extendedWordChars.test(tokens[i + 2])) {\n      tokens[i] += tokens[i + 2];\n      tokens.splice(i + 1, 2);\n      i--;\n    }\n  }\n\n  return tokens;\n};\n\nvar lineDiff = new Diff();\n\nlineDiff.tokenize = function (value) {\n  var retLines = [],\n      linesAndNewlines = value.split(/(\\n|\\r\\n)/); // Ignore the final empty token that occurs if the string ends with a new line\n\n  if (!linesAndNewlines[linesAndNewlines.length - 1]) {\n    linesAndNewlines.pop();\n  } // Merge the content and line separators into single tokens\n\n\n  for (var i = 0; i < linesAndNewlines.length; i++) {\n    var line = linesAndNewlines[i];\n\n    if (i % 2 && !this.options.newlineIsToken) {\n      retLines[retLines.length - 1] += line;\n    } else {\n      if (this.options.ignoreWhitespace) {\n        line = line.trim();\n      }\n\n      retLines.push(line);\n    }\n  }\n\n  return retLines;\n};\n\nfunction diffLines(oldStr, newStr, callback) {\n  return lineDiff.diff(oldStr, newStr, callback);\n}\n\nvar sentenceDiff = new Diff();\n\nsentenceDiff.tokenize = function (value) {\n  return value.split(/(\\S.+?[.!?])(?=\\s+|$)/);\n};\n\nvar cssDiff = new Diff();\n\ncssDiff.tokenize = function (value) {\n  return value.split(/([{}:;,]|\\s+)/);\n};\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nvar objectPrototypeToString = Object.prototype.toString;\nvar jsonDiff = new Diff(); // Discriminate between two lines of pretty-printed, serialized JSON where one of them has a\n// dangling comma and the other doesn't. Turns out including the dangling comma yields the nicest output:\n\njsonDiff.useLongestToken = true;\njsonDiff.tokenize = lineDiff.tokenize;\n\njsonDiff.castInput = function (value) {\n  var _this$options = this.options,\n      undefinedReplacement = _this$options.undefinedReplacement,\n      _this$options$stringi = _this$options.stringifyReplacer,\n      stringifyReplacer = _this$options$stringi === void 0 ? function (k, v) {\n    return typeof v === 'undefined' ? undefinedReplacement : v;\n  } : _this$options$stringi;\n  return typeof value === 'string' ? value : JSON.stringify(canonicalize(value, null, null, stringifyReplacer), stringifyReplacer, '  ');\n};\n\njsonDiff.equals = function (left, right) {\n  return Diff.prototype.equals.call(jsonDiff, left.replace(/,([\\r\\n])/g, '$1'), right.replace(/,([\\r\\n])/g, '$1'));\n};\n// object that is already on the \"stack\" of items being processed. Accepts an optional replacer\n\nfunction canonicalize(obj, stack, replacementStack, replacer, key) {\n  stack = stack || [];\n  replacementStack = replacementStack || [];\n\n  if (replacer) {\n    obj = replacer(key, obj);\n  }\n\n  var i;\n\n  for (i = 0; i < stack.length; i += 1) {\n    if (stack[i] === obj) {\n      return replacementStack[i];\n    }\n  }\n\n  var canonicalizedObj;\n\n  if ('[object Array]' === objectPrototypeToString.call(obj)) {\n    stack.push(obj);\n    canonicalizedObj = new Array(obj.length);\n    replacementStack.push(canonicalizedObj);\n\n    for (i = 0; i < obj.length; i += 1) {\n      canonicalizedObj[i] = canonicalize(obj[i], stack, replacementStack, replacer, key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n    return canonicalizedObj;\n  }\n\n  if (obj && obj.toJSON) {\n    obj = obj.toJSON();\n  }\n\n  if (_typeof(obj) === 'object' && obj !== null) {\n    stack.push(obj);\n    canonicalizedObj = {};\n    replacementStack.push(canonicalizedObj);\n\n    var sortedKeys = [],\n        _key;\n\n    for (_key in obj) {\n      /* istanbul ignore else */\n      if (obj.hasOwnProperty(_key)) {\n        sortedKeys.push(_key);\n      }\n    }\n\n    sortedKeys.sort();\n\n    for (i = 0; i < sortedKeys.length; i += 1) {\n      _key = sortedKeys[i];\n      canonicalizedObj[_key] = canonicalize(obj[_key], stack, replacementStack, replacer, _key);\n    }\n\n    stack.pop();\n    replacementStack.pop();\n  } else {\n    canonicalizedObj = obj;\n  }\n\n  return canonicalizedObj;\n}\n\nvar arrayDiff = new Diff();\n\narrayDiff.tokenize = function (value) {\n  return value.slice();\n};\n\narrayDiff.join = arrayDiff.removeEmpty = function (value) {\n  return value;\n};\n\nfunction mergeLines(code, lines) {\r\n    let enterIndex = 0;\r\n    let exitIndex = 0;\r\n    const indexes = diff(code);\r\n    const newLines = indexes.map(index => {\r\n        if (index.next === undefined) {\r\n            return Object.assign(Object.assign({}, lines.prev[index.prev]), { lineNumber: {\r\n                    prev: index.prev + 1,\r\n                }, move: \"exit\", enterIndex: null, exitIndex: exitIndex++ });\r\n        }\r\n        if (index.prev === undefined) {\r\n            return Object.assign(Object.assign({}, lines.next[index.next]), { lineNumber: {\r\n                    next: index.next + 1,\r\n                }, move: \"enter\", enterIndex: enterIndex++, exitIndex: null });\r\n        }\r\n        return Object.assign(Object.assign({}, lines.prev[index.prev]), { lineNumber: {\r\n                prev: index.prev + 1,\r\n                next: index.next + 1,\r\n            }, move: \"stay\", enterIndex: null, exitIndex: null });\r\n    });\r\n    return {\r\n        lines: newLines,\r\n        enterCount: enterIndex,\r\n        exitCount: exitIndex,\r\n    };\r\n}\r\n/**\r\n * Returns a list of pairs of line indexes:\r\n *\r\n * For example if lines 2 and 3 were removed\r\n * and two lines where added at the end:\r\n *  0 0\r\n *  1 -\r\n *  2 -\r\n *  3 1\r\n *  - 2\r\n *  - 3\r\n */\r\nfunction diff(code) {\r\n    const changes = diffLines(code.prev, code.next);\r\n    let indexes = [];\r\n    let prevIndex = 0;\r\n    let nextIndex = 0;\r\n    changes.forEach(change => {\r\n        if (change.added) {\r\n            for (let i = 0; i < change.count; i++) {\r\n                indexes.push({ next: nextIndex++ });\r\n            }\r\n        }\r\n        else if (change.removed) {\r\n            for (let i = 0; i < change.count; i++) {\r\n                indexes.push({ prev: prevIndex++ });\r\n            }\r\n        }\r\n        else {\r\n            for (let i = 0; i < change.count; i++) {\r\n                indexes.push({\r\n                    prev: prevIndex++,\r\n                    next: nextIndex++,\r\n                });\r\n            }\r\n        }\r\n    });\r\n    return indexes;\r\n}\n\nfunction splitByFocus(mergedCode, focus, annotations) {\r\n    const { lines } = mergedCode, mergedCodeRest = __rest(mergedCode, [\"lines\"]);\r\n    const focusByLineNumber = map(focus, (focus, key) => {\r\n        // we need to filter the lines that don't belong to the step\r\n        // for the case where focus == \"\"\r\n        const stepLines = key === \"prev\"\r\n            ? lines.filter(l => l.move !== \"enter\")\r\n            : lines.filter(l => l.move !== \"exit\");\r\n        return mapFocusToLineNumbers(focus, stepLines);\r\n    });\r\n    const splittedLines = lines.map(line => {\r\n        const { tokens } = line, rest = __rest(line, [\"tokens\"]);\r\n        const lineFocus = {\r\n            prev: line.lineNumber.prev\r\n                ? focusByLineNumber.prev[line.lineNumber.prev]\r\n                : false,\r\n            next: line.lineNumber.next\r\n                ? focusByLineNumber.next[line.lineNumber.next]\r\n                : false,\r\n        };\r\n        const lineAnnotations = {\r\n            prev: line.lineNumber.prev\r\n                ? annotations.prev[line.lineNumber.prev] || []\r\n                : [],\r\n            next: line.lineNumber.next\r\n                ? annotations.next[line.lineNumber.next] || []\r\n                : [],\r\n        };\r\n        return Object.assign({ focused: map(lineFocus, focus => !!focus), groups: getTokenGroups(tokens, lineFocus, lineAnnotations) }, rest);\r\n    });\r\n    const focusedLineNumbers = map(focusByLineNumber, focusByLineNumber => Object.keys(focusByLineNumber).map(k => Number(k)));\r\n    const firstFocusedLineNumber = map(focusedLineNumbers, focusedLineNumbers => Math.min(...focusedLineNumbers));\r\n    const lastFocusedLineNumber = map(focusedLineNumbers, focusedLineNumbers => Math.max(...focusedLineNumbers));\r\n    return Object.assign({ lines: splittedLines, firstFocusedLineNumber,\r\n        lastFocusedLineNumber }, mergedCodeRest);\r\n}\r\n/**\r\n * Get the least amount of groups where no consecutive groups have\r\n * the same combination of prevFocus, nextFocus, prevAnnotation, nextAnnotation.\r\n */\r\nfunction getTokenGroups(tokens, focus, annotations) {\r\n    const focusExtremes = map(focus, focus => Array.isArray(focus) ? focus : []);\r\n    const annotationExtremes = map(annotations, annotations => annotations.map(({ columnNumbers }) => columnNumbers));\r\n    const allExtremes = [\r\n        ...focusExtremes.prev,\r\n        ...focusExtremes.next,\r\n        ...annotationExtremes.prev,\r\n        ...annotationExtremes.next,\r\n    ];\r\n    const splittedTokens = splitTokens(tokens, allExtremes);\r\n    let startIndex = 0;\r\n    let currentGroup = null;\r\n    const groups = [];\r\n    splittedTokens.forEach(token => {\r\n        const newPrevFocus = isIn(startIndex, focus.prev);\r\n        const newNextFocus = isIn(startIndex, focus.next);\r\n        const newPrevAnnotation = getAnnotation(startIndex, annotations.prev);\r\n        const newNextAnnotation = getAnnotation(startIndex, annotations.next);\r\n        if (!currentGroup ||\r\n            currentGroup.focused.prev !== newPrevFocus ||\r\n            currentGroup.focused.next !== newNextFocus ||\r\n            currentGroup.annotation.prev !== newPrevAnnotation ||\r\n            currentGroup.annotation.next !== newNextAnnotation) {\r\n            currentGroup = {\r\n                focused: {\r\n                    prev: newPrevFocus,\r\n                    next: newNextFocus,\r\n                },\r\n                tokens: [],\r\n                annotation: {\r\n                    prev: newPrevAnnotation,\r\n                    next: newNextAnnotation,\r\n                },\r\n            };\r\n            groups.push(currentGroup);\r\n        }\r\n        currentGroup === null || currentGroup === void 0 ? void 0 : currentGroup.tokens.push(token);\r\n        startIndex += token.content.length;\r\n    });\r\n    return groups.map(group => ({\r\n        focused: group.focused,\r\n        tokens: group.tokens,\r\n        element: getGroupElement(group),\r\n    }));\r\n}\r\nfunction getGroupElement(group) {\r\n    return (React.createElement(React.Fragment, null, group.tokens.map(({ content, props }, i) => (React.createElement(\"span\", Object.assign({}, props, { key: i + 1 }), content)))));\r\n}\r\n/**\r\n * Split a list of tokens into a more fine-graned list of tokens\r\n *\r\n * tokens: [abc][defg]\r\n * extremes: [1:2,2:5]\r\n * result tokens: [ab][c][de][fg]\r\n *\r\n */\r\nfunction splitTokens(tokens, extremes) {\r\n    const splitIndexes = [\r\n        ...extremes.map(e => e.start - 1),\r\n        ...extremes.map(e => e.end),\r\n    ];\r\n    let oldTokens = tokens;\r\n    splitIndexes.forEach(splitIndex => {\r\n        const newTokens = [];\r\n        let i = 0;\r\n        oldTokens.forEach(token => {\r\n            const startIndex = i;\r\n            const endIndex = i + token.content.length;\r\n            const shouldSplit = startIndex < splitIndex && splitIndex < endIndex;\r\n            if (shouldSplit) {\r\n                const sliceIndex = splitIndex - startIndex;\r\n                const content0 = token.content.slice(0, sliceIndex);\r\n                const content1 = token.content.slice(sliceIndex);\r\n                newTokens.push(Object.assign(Object.assign({}, token), { content: content0 }));\r\n                newTokens.push(Object.assign(Object.assign({}, token), { content: content1 }));\r\n            }\r\n            else {\r\n                newTokens.push(token);\r\n            }\r\n            i = endIndex;\r\n        });\r\n        oldTokens = newTokens;\r\n    });\r\n    return oldTokens;\r\n}\r\nfunction isIn(index, intervals) {\r\n    if (!Array.isArray(intervals)) {\r\n        return intervals;\r\n    }\r\n    return intervals.some(({ start, end }) => start - 1 <= index && index < end);\r\n}\r\nfunction getAnnotation(index, annotations) {\r\n    return annotations.find(({ columnNumbers }) => columnNumbers.start - 1 <= index &&\r\n        index < columnNumbers.end);\r\n}\n\nfunction tween$1(params, t) {\r\n    // needs === true for typescript...\r\n    if (params.fixed === true) {\r\n        return params.value;\r\n    }\r\n    else {\r\n        const [start, end] = params.interval;\r\n        const [from, to] = params.extremes;\r\n        if (t < start)\r\n            return from;\r\n        if (t > end)\r\n            return to;\r\n        const x = (t - start) / (end - start);\r\n        const ease = params.ease || easing.linear;\r\n        return from + ease(x) * (to - from);\r\n    }\r\n}\r\nfunction stagger([start, end], index, count) {\r\n    if (count <= 1)\r\n        return [start, end];\r\n    const totalDuration = end - start;\r\n    const stepDuration = totalDuration / Math.pow(count, 1 / 8);\r\n    const tick = (totalDuration - stepDuration) / (count - 1);\r\n    const stepStart = start + tick * index;\r\n    const stepEnd = stepStart + stepDuration;\r\n    return [stepStart, stepEnd];\r\n}\r\nconst easing = {\r\n    linear: function (t) {\r\n        return t;\r\n    },\r\n    easeInQuad: function (t) {\r\n        return t * t;\r\n    },\r\n    easeOutQuad: function (t) {\r\n        return t * (2 - t);\r\n    },\r\n    easeInOutCubic: function (t) {\r\n        return t < 0.5\r\n            ? 4 * t * t * t\r\n            : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\r\n    },\r\n};\n\nfunction getLinesWithElements(lines, verticalInterval, enterCount, exitCount) {\r\n    // startY is the progress when we start moving vertically\r\n    // endY is when we stop\r\n    const [startY, endY] = verticalInterval;\r\n    return lines.map(line => {\r\n        const lineIndex = map(line.lineNumber, ln => ln && ln - 1);\r\n        const { enterIndex, exitIndex } = line;\r\n        const tweenY = line.move === \"exit\"\r\n            ? { fixed: true, value: lineIndex.prev }\r\n            : line.move === \"enter\"\r\n                ? { fixed: true, value: lineIndex.next }\r\n                : {\r\n                    fixed: false,\r\n                    extremes: [lineIndex.prev, lineIndex.next],\r\n                    interval: [startY, endY],\r\n                    ease: easing.easeInOutCubic,\r\n                };\r\n        const tweenX = line.move === \"exit\"\r\n            ? {\r\n                fixed: false,\r\n                extremes: [0, -1],\r\n                ease: easing.easeInQuad,\r\n                interval: stagger([0, startY], exitIndex, exitCount),\r\n            }\r\n            : line.move === \"enter\"\r\n                ? {\r\n                    fixed: false,\r\n                    extremes: [1, 0],\r\n                    ease: easing.easeOutQuad,\r\n                    interval: stagger([endY, 1], enterIndex, enterCount),\r\n                }\r\n                : { fixed: true, value: 0 };\r\n        return Object.assign(Object.assign({}, line), { tweenX,\r\n            tweenY });\r\n    });\r\n}\n\nfunction parseAnnotations(annotations) {\r\n    // split annotations with multiple parts in the focus string\r\n    // \"1:2,3[4:5]\" becomes  two annotations \"1:2\" and \"3[4:5]\"\r\n    const expandedAnnotations = mapWithDefault(annotations, [], annotations => annotations.flatMap(annotation => splitParts(annotation.focus).map(part => (Object.assign(Object.assign({}, annotation), { focus: part })))));\r\n    const inlineCodeAnnotations = mapWithDefault(expandedAnnotations, [], annotations => annotations.filter(isInline));\r\n    const multilineCodeAnnotations = mapWithDefault(expandedAnnotations, [], annotations => annotations.filter(a => !isInline(a)));\r\n    return {\r\n        inlineAnnotations: map(inlineCodeAnnotations, annotations => parseInlineAnnotations(annotations)),\r\n        multilineAnnotations: map(multilineCodeAnnotations, annotations => parseMultilineAnnotations(annotations)),\r\n    };\r\n}\r\nfunction isInline(annotation) {\r\n    return hasColumns(annotation.focus);\r\n}\r\nfunction parseInlineAnnotations(annotations) {\r\n    const annotationMap = {};\r\n    annotations.forEach(annotation => {\r\n        const focusMap = parsePartToObject(annotation.focus);\r\n        const lineNumber = +Object.keys(focusMap)[0];\r\n        const columnNumbersList = focusMap[lineNumber];\r\n        const lineAnnotations = annotationMap[lineNumber] || [];\r\n        lineAnnotations.push({\r\n            columnNumbers: columnNumbersList[0],\r\n            data: annotation.data,\r\n            Component: annotation.Component,\r\n        });\r\n        annotationMap[lineNumber] = lineAnnotations;\r\n    });\r\n    return annotationMap;\r\n}\r\nfunction parseMultilineAnnotations(annotations) {\r\n    return annotations.map(annotation => {\r\n        return {\r\n            lineNumbers: parseExtremes(annotation.focus),\r\n            data: annotation.data,\r\n            Component: annotation.Component,\r\n        };\r\n    });\r\n}\r\n// --- multiline\r\nfunction annotateMultiline(lines, annotations) {\r\n    return {\r\n        prev: annotateMultilineSide(lines, annotations.prev, line => line.lineNumber.prev),\r\n        next: annotateMultilineSide(lines, annotations.next, line => line.lineNumber.next),\r\n    };\r\n}\r\nfunction annotateMultilineSide(lines, ogAnnotations, getLineNumber) {\r\n    const annotations = [...ogAnnotations];\r\n    annotations.sort((a, b) => a.lineNumbers.start - b.lineNumbers.start);\r\n    let lineIndex = 0;\r\n    const groups = [];\r\n    while (lineIndex < lines.length) {\r\n        const annotation = annotations[0];\r\n        let line = lines[lineIndex];\r\n        if (annotation &&\r\n            getLineNumber(line) > annotation.lineNumbers.start) {\r\n            throw \"Code Hike can't handle two annotations for the same line\";\r\n        }\r\n        if (annotation &&\r\n            getLineNumber(line) === annotation.lineNumbers.start) {\r\n            // create annotation group\r\n            const group = {\r\n                lines: [],\r\n                annotation,\r\n            };\r\n            while (line &&\r\n                (!getLineNumber(line) ||\r\n                    getLineNumber(line) <=\r\n                        annotation.lineNumbers.end)) {\r\n                group.lines.push(line);\r\n                line = lines[++lineIndex];\r\n            }\r\n            groups.push(group);\r\n            annotations.shift();\r\n        }\r\n        else if (!annotation) {\r\n            // create unannotated group until the end\r\n            groups.push({ lines: lines.slice(lineIndex) });\r\n            lineIndex = lines.length;\r\n        }\r\n        else {\r\n            // create unannotated group until next annotation\r\n            const group = {\r\n                lines: [],\r\n            };\r\n            while (line &&\r\n                (!getLineNumber(line) ||\r\n                    getLineNumber(line) <\r\n                        annotation.lineNumbers.start)) {\r\n                group.lines.push(line);\r\n                line = lines[++lineIndex];\r\n            }\r\n            groups.push(group);\r\n        }\r\n    }\r\n    return groups;\r\n}\r\n// --- inline\r\nfunction annotateInline(lines, inlineAnnotations) {\r\n    return lines.map((_a) => {\r\n        var { groups } = _a, line = __rest(_a, [\"groups\"]);\r\n        const { lineNumber } = line;\r\n        const annotations = {\r\n            prev: lineNumber.prev\r\n                ? inlineAnnotations.prev[lineNumber.prev] || []\r\n                : [],\r\n            next: lineNumber.next\r\n                ? inlineAnnotations.next[lineNumber.next] || []\r\n                : [],\r\n        };\r\n        return Object.assign(Object.assign({}, line), { annotatedGroups: annotateLineTokenGroups(groups, annotations) });\r\n    });\r\n}\r\n/**\r\n * Generate a list of annotated groups tweens\r\n * each annotated group contains a list of token groups and maybe an annotation.\r\n * The two annotated groups in a tween doesn't need to have the same token groups.\r\n */\r\nfunction annotateLineTokenGroups(tokenGroups, annotations) {\r\n    let prevTokenGroups = [...tokenGroups];\r\n    let nextTokenGroups = [...tokenGroups];\r\n    const prevAnnotations = [...annotations.prev];\r\n    const nextAnnotations = [...annotations.next];\r\n    const annotatedGroups = [];\r\n    let prevColumn = 1;\r\n    let nextColumn = 1;\r\n    // iterate until we consume both lists of token groups\r\n    while (prevTokenGroups.length > 0 ||\r\n        nextTokenGroups.length > 0) {\r\n        const prevAnnotation = prevAnnotations[0];\r\n        const nextAnnotation = nextAnnotations[0];\r\n        const isPrevAnnotationStarting = prevAnnotation &&\r\n            prevAnnotation.columnNumbers.start === prevColumn;\r\n        const isNextAnnotationStarting = nextAnnotation &&\r\n            nextAnnotation.columnNumbers.start === nextColumn;\r\n        if (prevColumn < nextColumn) {\r\n            // if the prev list is behind we consume from prevTokenGroups\r\n            if (isPrevAnnotationStarting) {\r\n                // if there is an annotation starting at this point we consume until the annotation ends\r\n                const end = prevAnnotation.columnNumbers.end + 1;\r\n                annotatedGroups.push({\r\n                    prev: {\r\n                        annotation: prevAnnotation,\r\n                        groups: shiftGroups(prevTokenGroups, prevColumn, end),\r\n                    },\r\n                });\r\n                prevColumn = end;\r\n                prevAnnotations.shift();\r\n            }\r\n            else {\r\n                // if there isn't we consume until we sync with the next list or an annotation starts\r\n                const end = Math.min(nextColumn, (prevAnnotation === null || prevAnnotation === void 0 ? void 0 : prevAnnotation.columnNumbers.start) || nextColumn);\r\n                annotatedGroups.push({\r\n                    prev: {\r\n                        groups: shiftGroups(prevTokenGroups, prevColumn, end),\r\n                    },\r\n                });\r\n                prevColumn = end;\r\n            }\r\n        }\r\n        else if (prevColumn > nextColumn) {\r\n            // if the next list is behind we consume from nextTokenGroups\r\n            if (isNextAnnotationStarting) {\r\n                // if there is an annotation starting at this point we consume until the annotation ends\r\n                const end = nextAnnotation.columnNumbers.end + 1;\r\n                annotatedGroups.push({\r\n                    next: {\r\n                        annotation: nextAnnotation,\r\n                        groups: shiftGroups(nextTokenGroups, nextColumn, end),\r\n                    },\r\n                });\r\n                nextColumn = end;\r\n                nextAnnotations.shift();\r\n            }\r\n            else {\r\n                // if there isn't we consume until we sync with the prev list or an annotation starts\r\n                const end = Math.min(prevColumn, (nextAnnotation === null || nextAnnotation === void 0 ? void 0 : nextAnnotation.columnNumbers.start) || prevColumn);\r\n                annotatedGroups.push({\r\n                    next: {\r\n                        groups: shiftGroups(nextTokenGroups, nextColumn, end),\r\n                    },\r\n                });\r\n                nextColumn = end;\r\n            }\r\n        }\r\n        else if (prevColumn == nextColumn) {\r\n            // if we are at the same column in both lists we have 5 different cases\r\n            if (isPrevAnnotationStarting &&\r\n                isNextAnnotationStarting &&\r\n                prevAnnotation.columnNumbers.end ===\r\n                    nextAnnotation.columnNumbers.end) {\r\n                // both annotations starts here and end at the same place, so we puth both in one tween annotated group\r\n                const end = nextAnnotation.columnNumbers.end + 1;\r\n                annotatedGroups.push({\r\n                    prev: {\r\n                        annotation: prevAnnotation,\r\n                        groups: shiftGroups(prevTokenGroups, prevColumn, end),\r\n                    },\r\n                    next: {\r\n                        annotation: nextAnnotation,\r\n                        groups: shiftGroups(nextTokenGroups, nextColumn, end),\r\n                    },\r\n                });\r\n                prevColumn = end;\r\n                nextColumn = end;\r\n                prevAnnotations.shift();\r\n                nextAnnotations.shift();\r\n            }\r\n            else if (isPrevAnnotationStarting) {\r\n                // if only the prev annotation starting at this point we consume until the annotation ends\r\n                const end = prevAnnotation.columnNumbers.end + 1;\r\n                annotatedGroups.push({\r\n                    prev: {\r\n                        annotation: prevAnnotation,\r\n                        groups: shiftGroups(prevTokenGroups, prevColumn, end),\r\n                    },\r\n                });\r\n                prevColumn = end;\r\n                prevAnnotations.shift();\r\n            }\r\n            else if (isNextAnnotationStarting) {\r\n                // same for the next annotation\r\n                const end = nextAnnotation.columnNumbers.end + 1;\r\n                annotatedGroups.push({\r\n                    next: {\r\n                        annotation: nextAnnotation,\r\n                        groups: shiftGroups(nextTokenGroups, nextColumn, end),\r\n                    },\r\n                });\r\n                nextColumn = end;\r\n                nextAnnotations.shift();\r\n            }\r\n            else if (!prevAnnotation && !nextAnnotation) {\r\n                // if there aren't any remaining annotation we add a last group\r\n                annotatedGroups.push({\r\n                    prev: { groups: prevTokenGroups },\r\n                    next: { groups: nextTokenGroups },\r\n                });\r\n                // this is the last iteration\r\n                prevTokenGroups = [];\r\n                nextTokenGroups = [];\r\n            }\r\n            else {\r\n                // if we still have annotations left we consume until the next one\r\n                const end = Math.min((prevAnnotation === null || prevAnnotation === void 0 ? void 0 : prevAnnotation.columnNumbers.start) ||\r\n                    Number.MAX_VALUE, (nextAnnotation === null || nextAnnotation === void 0 ? void 0 : nextAnnotation.columnNumbers.start) ||\r\n                    Number.MAX_VALUE);\r\n                annotatedGroups.push({\r\n                    prev: {\r\n                        groups: shiftGroups(prevTokenGroups, prevColumn, end),\r\n                    },\r\n                    next: {\r\n                        groups: shiftGroups(nextTokenGroups, nextColumn, end),\r\n                    },\r\n                });\r\n                prevColumn = end;\r\n                nextColumn = end;\r\n            }\r\n        }\r\n    }\r\n    return annotatedGroups;\r\n}\r\n/**\r\n * Remove and return some groups from the beggining of the array\r\n * startColumn is the column at which the array is starting\r\n * (because other groups has been already removed)\r\n * newStartColumn is the first column that should stay in the array\r\n */\r\nfunction shiftGroups(tokenGroups, startColumn, newStartColumn) {\r\n    const removedGroups = [];\r\n    let currentStartColumn = startColumn;\r\n    while (currentStartColumn < newStartColumn &&\r\n        tokenGroups.length > 0) {\r\n        const currentTokenGroup = tokenGroups.shift();\r\n        removedGroups.push(currentTokenGroup);\r\n        const length = currentTokenGroup.tokens.reduce((a, t) => a + t.content.length, 0);\r\n        currentStartColumn += length;\r\n    }\r\n    return removedGroups;\r\n}\n\nfunction useStepParser(input) {\r\n    const { highlightedLines, focus } = input;\r\n    return React.useMemo(() => parse$1(input), [\r\n        highlightedLines.prev,\r\n        highlightedLines.next,\r\n        focus.prev,\r\n        focus.next,\r\n    ]);\r\n}\r\nfunction parse$1({ focus, annotations, highlightedLines, lang, }) {\r\n    const normalCode = getCode(highlightedLines);\r\n    const mergedCode = merge(normalCode, highlightedLines);\r\n    const { inlineAnnotations, multilineAnnotations } = parseAllAnnotations(annotations);\r\n    const focusedCode = splitLinesByFocus(mergedCode, withDefault(focus, null), inlineAnnotations);\r\n    const annotatedCode = addAnnotations(focusedCode, inlineAnnotations, multilineAnnotations);\r\n    const codeStep = addExtraStuff(annotatedCode, normalCode, lang);\r\n    // console.log({ codeStep })\r\n    return codeStep;\r\n}\r\n// 0 - normalize\r\nfunction getCode(highlightedLines) {\r\n    return map(highlightedLines, lines => lines\r\n        .map(line => line.tokens.map(t => t.content).join(\"\"))\r\n        .join(\"\\n\")\r\n        .trimEnd()\r\n        .concat(\"\\n\"));\r\n}\r\nfunction merge(code, highlightedLines) {\r\n    return mergeLines(code, highlightedLines);\r\n}\r\nfunction parseAllAnnotations(annotations) {\r\n    return parseAnnotations(annotations);\r\n}\r\nfunction splitLinesByFocus(mergedCode, focus, annotations) {\r\n    return splitByFocus(mergedCode, focus, annotations);\r\n}\r\nfunction addAnnotations(_a, inlineAnnotations, annotations) {\r\n    var { lines } = _a, focusedCode = __rest(_a, [\"lines\"]);\r\n    const annotatedLines = annotateInline(lines, inlineAnnotations);\r\n    const lineGroups = annotateMultiline(annotatedLines, annotations);\r\n    return Object.assign(Object.assign({}, focusedCode), { lineGroups: lineGroups, lineCount: {\r\n            prev: lines.filter(l => l.lineNumber.prev != null)\r\n                .length,\r\n            next: lines.filter(l => l.lineNumber.next != null)\r\n                .length,\r\n        } });\r\n}\r\nfunction addExtraStuff(codeStep, code, lang) {\r\n    const vInterval = verticalInterval(codeStep.enterCount, codeStep.exitCount);\r\n    const newGroups = map(codeStep.lineGroups, groups => groups.map(group => (Object.assign(Object.assign({}, group), { lines: getLinesWithElements(group.lines, vInterval, codeStep.enterCount, codeStep.exitCount) }))));\r\n    return Object.assign(Object.assign({}, codeStep), { groups: newGroups, verticalInterval: vInterval, code,\r\n        lang });\r\n}\r\nfunction verticalInterval(enterCount, exitCount) {\r\n    if (enterCount <= 0 && exitCount <= 0)\r\n        return [0, 1];\r\n    if (enterCount <= 0 && exitCount >= 1)\r\n        return [0.33, 1];\r\n    if (enterCount >= 1 && exitCount <= 0)\r\n        return [0, 0.67];\r\n    return [0.25, 0.75];\r\n}\n\nfunction SmoothContainer({ dimensions, codeStep, children, minZoom = 0, maxZoom = 1.2, center = false, progress, }) {\r\n    const { prev, next } = getTweenContentProps({\r\n        codeStep,\r\n        dimensions,\r\n        minZoom,\r\n        maxZoom,\r\n        horizontalCenter: center,\r\n    });\r\n    // all these tweens depends on annotations now (t instead of progress)\r\n    const zoom = tweenProp(prev.zoom, next.zoom, progress);\r\n    const dx = tweenProp(prev.dx, next.dx, progress);\r\n    const dy = tweenProp(prev.dy, next.dy, progress, codeStep.verticalInterval);\r\n    const focusHeight = tweenProp(prev.focusHeight, next.focusHeight, progress);\r\n    const focusWidth = tweenProp(prev.focusWidth, next.focusWidth, progress);\r\n    const lineNumberPad = ((dimensions === null || dimensions === void 0 ? void 0 : dimensions.lineNumberWidth) || 0) * zoom;\r\n    const leftPad = lineNumberPad || 16;\r\n    const width = Math.max(focusWidth + leftPad, dimensions.contentWidth);\r\n    const startX = leftPad / zoom;\r\n    return (React.createElement(Container, { width: dimensions.containerWidth, height: dimensions.containerHeight, lang: codeStep.lang },\r\n        React.createElement(Content$1, { dx: dx, dy: dy, scale: zoom, height: Math.max(focusHeight, dimensions.contentHeight), width: width }, children(focusWidth, startX))));\r\n}\r\nfunction Container({ width, height, children, lang, }) {\r\n    return (React.createElement(\"code\", { style: {\r\n            width,\r\n            height,\r\n            position: \"relative\",\r\n            overflow: \"auto\",\r\n        }, className: \"ch-code-scroll-parent\", children: children, \"data-ch-lang\": lang }));\r\n}\r\nfunction Content$1({ dx, dy, scale, height, width, children, }) {\r\n    return (React.createElement(\"div\", { style: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            transformOrigin: \"top left\",\r\n            width: width,\r\n            height: height,\r\n            overflow: \"hidden\",\r\n        }, className: \"ch-code-scroll-content\" },\r\n        React.createElement(\"div\", { style: {\r\n                position: \"absolute\",\r\n                top: 0,\r\n                left: 0,\r\n                transform: `translateX(${dx}px) translateY(${dy}px) scale(${scale})`,\r\n                transformOrigin: \"left top\",\r\n                width: width / scale,\r\n                height: (height - 2 * dy) / scale,\r\n                // outline: \"1px solid yellow\",\r\n            }, children: children })));\r\n}\r\nfunction getTweenContentProps(_a) {\r\n    var { codeStep } = _a, rest = __rest(_a, [\"codeStep\"]);\r\n    const { lineHeight, lineWidth } = rest.dimensions;\r\n    const paramTween = {\r\n        prev: {\r\n            extremes: [\r\n                codeStep.firstFocusedLineNumber.prev - 1,\r\n                codeStep.lastFocusedLineNumber.prev - 1,\r\n            ],\r\n            originalContentHeight: codeStep.lineCount.prev * lineHeight,\r\n            lineWidth: lineWidth[0],\r\n        },\r\n        next: {\r\n            extremes: [\r\n                codeStep.firstFocusedLineNumber.next - 1,\r\n                codeStep.lastFocusedLineNumber.next - 1,\r\n            ],\r\n            originalContentHeight: codeStep.lineCount.next * lineHeight,\r\n            lineWidth: lineWidth[1],\r\n        },\r\n    };\r\n    return map(paramTween, ({ extremes, originalContentHeight, lineWidth }) => getContentProps(Object.assign({ extremes,\r\n        originalContentHeight,\r\n        lineWidth }, rest)));\r\n}\r\nfunction getContentProps({ dimensions, lineWidth, minZoom, maxZoom, extremes, originalContentHeight, horizontalCenter, }) {\r\n    const { lineHeight } = dimensions;\r\n    const containerHeight = dimensions === null || dimensions === void 0 ? void 0 : dimensions.contentHeight;\r\n    const containerWidth = dimensions === null || dimensions === void 0 ? void 0 : dimensions.contentWidth;\r\n    const originalFocusHeight = (extremes[1] - extremes[0] + 3) * lineHeight;\r\n    const leftPadding = (dimensions === null || dimensions === void 0 ? void 0 : dimensions.lineNumberWidth) || 16;\r\n    const rightPadding = 16;\r\n    const zoom = Math.max(Math.min((containerWidth - leftPadding - rightPadding) /\r\n        lineWidth, containerHeight / originalFocusHeight, maxZoom), minZoom);\r\n    const contentHeight = originalContentHeight * zoom;\r\n    const focusStart = (extremes[0] - 1) * lineHeight * zoom;\r\n    const focusEnd = (extremes[1] + 2) * lineHeight * zoom;\r\n    const focusCenter = (focusEnd + focusStart) / 2;\r\n    const focusHeight = focusEnd - focusStart;\r\n    const dy = containerHeight > contentHeight\r\n        ? (containerHeight - contentHeight) / 2\r\n        : clamp$1(containerHeight / 2 - focusCenter, Math.max(containerHeight - contentHeight, -focusStart // to ensure first focus line is shown when focus is bigger than container\r\n        ), 0);\r\n    const dx = horizontalCenter\r\n        ? Math.max(containerWidth / 2 - (lineWidth * zoom) / 2, 0)\r\n        : 0;\r\n    return {\r\n        zoom,\r\n        dx,\r\n        dy,\r\n        focusHeight: focusHeight,\r\n        focusWidth: lineWidth * zoom,\r\n    };\r\n}\r\nfunction clamp$1(num, min, max) {\r\n    return num <= min ? min : num >= max ? max : num;\r\n}\r\nfunction tweenProp(start, end, progress, interval = [0, 1]) {\r\n    return tween$1({\r\n        fixed: false,\r\n        interval,\r\n        extremes: [start, end],\r\n        ease: easing.easeInOutCubic,\r\n    }, progress);\r\n}\n\nfunction SmoothLines(props) {\r\n    return (React.createElement(SmoothContainer, Object.assign({}, props), (focusWidth, startX) => (React.createElement(Lines, { codeStep: props.codeStep, focusWidth: focusWidth, lineHeight: props.dimensions.lineHeight, progress: props.progress, startX: startX, lineNumberWidth: props.dimensions.lineNumberWidth }))));\r\n}\r\nfunction Lines({ codeStep, progress, focusWidth, lineHeight, startX, lineNumberWidth, }) {\r\n    const groups = progress < 0.5\r\n        ? codeStep.groups.prev\r\n        : codeStep.groups.next;\r\n    return (React.createElement(React.Fragment, null, groups.map((group, i) => {\r\n        if (!group.annotation) {\r\n            return (React.createElement(LineGroup, { lines: group.lines, t: progress, focusWidth: focusWidth, lineHeight: lineHeight, startX: startX, key: i, lineNumberWidth: lineNumberWidth }));\r\n        }\r\n        const startY = tween$1(group.lines[0].tweenY, progress);\r\n        const lineCount = group.annotation.lineNumbers.end -\r\n            group.annotation.lineNumbers.start +\r\n            1;\r\n        const Component = group.annotation.Component;\r\n        return (React.createElement(Component, { style: {\r\n                position: \"absolute\",\r\n                height: lineCount * lineHeight,\r\n                width: \"100%\",\r\n                transform: `translateY(${startY * lineHeight}px)`,\r\n            }, key: i, data: group.annotation.data, isInline: false, lines: group.lines },\r\n            React.createElement(LineGroup, { lines: group.lines, t: progress, focusWidth: focusWidth, lineHeight: lineHeight, startY: startY, startX: startX, lineNumberWidth: lineNumberWidth })));\r\n    })));\r\n}\r\nfunction LineGroup({ lines, focusWidth, lineHeight, t, startX, startY = 0, lineNumberWidth, }) {\r\n    return (React.createElement(React.Fragment, null, lines.map((line, key) => {\r\n        const { tweenX, tweenY, focused } = line;\r\n        const dx = tween$1(tweenX, t);\r\n        const dy = tween$1(tweenY, t);\r\n        const opacity = getOpacity(focused, t, dx);\r\n        return (React.createElement(React.Fragment, { key: key },\r\n            lineNumberWidth ? (React.createElement(\"span\", { className: \"ch-code-line-number\", style: {\r\n                    position: \"absolute\",\r\n                    top: 0,\r\n                    left: 0,\r\n                    transform: `translate(${dx * focusWidth}px, ${(dy - startY) * lineHeight}px)`,\r\n                    width: lineNumberWidth,\r\n                    opacity,\r\n                } }, t < 0.5\r\n                ? line.lineNumber.prev\r\n                : line.lineNumber.next)) : undefined,\r\n            React.createElement(LineContainer, { dx: startX + dx * focusWidth, dy: (dy - startY) * lineHeight, width: focusWidth, opacity: opacity },\r\n                React.createElement(LineContent, { line: line, progress: t, dx: dx }))));\r\n    })));\r\n}\r\nfunction LineContent({ line, progress, dx, }) {\r\n    return (React.createElement(\"div\", { style: {\r\n            display: \"inline-block\",\r\n            width: \"100%\",\r\n        } },\r\n        line.annotatedGroups.map((annotatedGroup, i) => (React.createElement(AnnotatedTokens, { annotatedGroup: annotatedGroup, progress: progress, dx: dx, key: i }))),\r\n        React.createElement(\"br\", null)));\r\n}\r\nfunction AnnotatedTokens({ annotatedGroup, progress, dx, }) {\r\n    var _a, _b;\r\n    const annotated = progress < 0.5\r\n        ? annotatedGroup.prev\r\n        : annotatedGroup.next;\r\n    const tokenGroups = (annotated === null || annotated === void 0 ? void 0 : annotated.groups) || [];\r\n    const Component = (_a = annotated === null || annotated === void 0 ? void 0 : annotated.annotation) === null || _a === void 0 ? void 0 : _a.Component;\r\n    const children = tokenGroups.map((group, i) => {\r\n        const opacity = getOpacity(group.focused, progress, dx);\r\n        return (React.createElement(\"span\", { style: { opacity }, key: i + 1 }, group.element));\r\n    });\r\n    return Component ? (React.createElement(Component, { children: children, data: (_b = annotated === null || annotated === void 0 ? void 0 : annotated.annotation) === null || _b === void 0 ? void 0 : _b.data, isInline: true })) : (React.createElement(React.Fragment, null, children));\r\n}\r\nfunction LineContainer({ children, dx, dy, opacity, width, }) {\r\n    return (React.createElement(\"div\", { style: {\r\n            position: \"absolute\",\r\n            top: 0,\r\n            left: 0,\r\n            transform: `translate(${dx}px, ${dy}px)`,\r\n            width,\r\n            display: opacity <= 0 ? \"none\" : undefined,\r\n        } }, children));\r\n}\r\nconst OFF_OPACITY = 0.33;\r\nfunction getOpacity(focused, progress, dx) {\r\n    return (tween$1({\r\n        fixed: false,\r\n        extremes: [\r\n            focused.prev ? 0.99 : OFF_OPACITY,\r\n            focused.next ? 0.99 : OFF_OPACITY,\r\n        ],\r\n        interval: [0, 1],\r\n    }, progress) -\r\n        Math.abs(dx) * 1);\r\n}\n\nfunction CopyButton({ content, style, className, }) {\r\n    const [copied, setCopied] = React.useState(false);\r\n    return (React.createElement(\"button\", { type: \"button\", title: \"Copy code\", className: className, style: style, onClick: () => {\r\n            copyToClipboard(content);\r\n            setCopied(true);\r\n            setTimeout(() => {\r\n                setCopied(false);\r\n            }, 1200);\r\n        } },\r\n        React.createElement(\"svg\", { fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\" }, copied ? (React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M5 13l4 4L19 7\" })) : (React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: \"1.6px\", d: \"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z\" })))));\r\n}\r\nfunction copyToClipboard(text) {\r\n    if (!navigator.clipboard) {\r\n        fallbackCopyTextToClipboard(text);\r\n        return;\r\n    }\r\n    navigator.clipboard.writeText(text);\r\n}\r\nfunction fallbackCopyTextToClipboard(text) {\r\n    var textArea = document.createElement(\"textarea\");\r\n    textArea.value = text;\r\n    // Avoid scrolling to bottom\r\n    textArea.style.top = \"0\";\r\n    textArea.style.left = \"0\";\r\n    textArea.style.position = \"fixed\";\r\n    document.body.appendChild(textArea);\r\n    textArea.focus();\r\n    textArea.select();\r\n    try {\r\n        var successful = document.execCommand(\"copy\");\r\n        // var msg = successful ? \"successful\" : \"unsuccessful\"\r\n        // console.log(\"Fallback: Copying text command was \" + msg)\r\n    }\r\n    catch (err) {\r\n        // console.error(\"Fallback: Oops, unable to copy\", err)\r\n    }\r\n    document.body.removeChild(textArea);\r\n}\n\nfunction useCodeShift({ tween, }) {\r\n    return useStepParser({\r\n        highlightedLines: map(tween, tween => tween.code.lines),\r\n        focus: map(tween, tween => tween.focus),\r\n        annotations: map(tween, tween => tween.annotations),\r\n        lang: anyValue(tween, tween => { var _a; return (_a = tween === null || tween === void 0 ? void 0 : tween.code) === null || _a === void 0 ? void 0 : _a.lang; }),\r\n    });\r\n}\r\nconst DEFAULT_MIN_COLUMNS = 10;\r\nfunction CodeTween(_a) {\r\n    var { tween, progress, config } = _a, preProps = __rest(_a, [\"tween\", \"progress\", \"config\"]);\r\n    const stepInfo = useCodeShift({ tween });\r\n    const { element, dimensions } = useDimensions(stepInfo.code, map(tween, tween => tween.focus), config.minColumns || DEFAULT_MIN_COLUMNS, config.lineNumbers || false, config.rows, [config.parentHeight]);\r\n    return !dimensions || config.debug ? (React.createElement(BeforeDimensions, { element: element, htmlProps: preProps, debug: config.debug })) : (React.createElement(AfterDimensions, { dimensions: dimensions, stepInfo: stepInfo, config: config, progress: progress, htmlProps: preProps }));\r\n}\r\nfunction BeforeDimensions({ element, htmlProps, debug, }) {\r\n    return (React.createElement(Wrapper, { htmlProps: htmlProps, measured: false }, element));\r\n}\r\nfunction AfterDimensions({ config: { minZoom = 1, maxZoom = 1, horizontalCenter = false, }, dimensions, stepInfo, progress, htmlProps, config, }) {\r\n    var _a;\r\n    return (React.createElement(Wrapper, { htmlProps: htmlProps, measured: true },\r\n        React.createElement(SmoothLines, { codeStep: stepInfo, progress: progress, dimensions: dimensions, \r\n            // TODO move to dimensions?\r\n            minZoom: minZoom, maxZoom: maxZoom, center: horizontalCenter }),\r\n        config.showCopyButton ? (React.createElement(CopyButton, { className: \"ch-code-button\", content: (_a = stepInfo === null || stepInfo === void 0 ? void 0 : stepInfo.code) === null || _a === void 0 ? void 0 : _a.prev })) : undefined));\r\n}\r\nfunction Wrapper({ htmlProps, children, measured, }) {\r\n    return (\r\n    // not using <pre> because https://github.com/code-hike/codehike/issues/120\r\n    React.createElement(\"div\", Object.assign({}, htmlProps, { className: `ch-code-wrapper ${(htmlProps === null || htmlProps === void 0 ? void 0 : htmlProps.className) || \"\"}`, \"data-ch-measured\": measured, children: children })));\r\n}\n\nfunction currentTime() {\n  if (typeof window !== \"undefined\") {\n    return performance.now();\n  } else {\n    return 0;\n  }\n}\n\nfunction useSpringInstance(target, config) {\n  var ref = React.useRef(null);\n\n  if (ref.current == null) {\n    ref.current = {\n      config: getConfigWithDefaults(target, config),\n      state: getInitialState(target, config)\n    };\n  }\n\n  return ref.current;\n}\nfunction getConfigWithDefaults(target, _ref) {\n  var stiffness = _ref.stiffness,\n      damping = _ref.damping,\n      mass = _ref.mass,\n      decimals = _ref.decimals,\n      teleport = _ref.teleport;\n  return {\n    X: target,\n    k: stiffness !== null && stiffness !== void 0 ? stiffness : 170,\n    c: damping !== null && damping !== void 0 ? damping : 26,\n    m: mass !== null && mass !== void 0 ? mass : 1,\n    teleport: teleport !== null && teleport !== void 0 ? teleport : false,\n    decimals: decimals !== null && decimals !== void 0 ? decimals : 2\n  };\n}\n\nfunction getInitialState(target, _ref2) {\n  var from = _ref2.from,\n      initialSpeed = _ref2.initialSpeed;\n  return {\n    x0: from !== null && from !== void 0 ? from : target,\n    v0: initialSpeed !== null && initialSpeed !== void 0 ? initialSpeed : 0,\n    t0: currentTime(),\n    raf: null\n  };\n}\n\nvar sqrt = Math.sqrt,\n    exp = Math.exp,\n    sin = Math.sin,\n    cos = Math.cos;\nfunction spring(_ref) {\n  var x0 = _ref.x0,\n      v0 = _ref.v0,\n      t0 = _ref.t0,\n      t = _ref.t,\n      k = _ref.k,\n      c = _ref.c,\n      m = _ref.m,\n      X = _ref.X;\n  var dx = x0 - X;\n  var dt = (t - t0) / 1000;\n  var radicand = c * c - 4 * k * m;\n\n  if (radicand > 0) {\n    var rp = (-c + sqrt(radicand)) / (2 * m);\n    var rn = (-c - sqrt(radicand)) / (2 * m);\n    var a = (dx * rp - v0) / (rp - rn);\n    var b = (v0 - dx * rn) / (rp - rn);\n    return {\n      x: X + a * exp(rn * dt) + b * exp(rp * dt),\n      v: a * rn * exp(rn * dt) + b * rp * exp(rp * dt)\n    };\n  } else if (radicand < 0) {\n    var r = -c / (2 * m);\n    var s = sqrt(-radicand) / (2 * m);\n    var _a = dx;\n\n    var _b = (v0 - r * dx) / s;\n\n    return {\n      x: X + exp(r * dt) * (_a * cos(s * dt) + _b * sin(s * dt)),\n      v: exp(r * dt) * ((_b * s + _a * r) * cos(s * dt) - (_a * s - _b * r) * sin(s * dt))\n    };\n  } else {\n    var _r = -c / (2 * m);\n\n    var _a2 = dx;\n\n    var _b2 = v0 - _r * dx;\n\n    return {\n      x: X + (_a2 + _b2 * dt) * exp(_r * dt),\n      v: (_b2 + _a2 * _r + _b2 * _r * dt) * exp(_r * dt)\n    };\n  }\n}\n\nvar nextFrameQueue = [];\nvar nextFrameId = null;\nfunction queueAnimationFrame(fn) {\n  var length = nextFrameQueue.push(fn);\n\n  if (length === 1) {\n    nextFrameId = requestAnimationFrame(runQueue);\n  }\n\n  return [nextFrameId, length - 1];\n}\nfunction unqueueAnimationFrame(_ref) {\n  var frameId = _ref[0],\n      index = _ref[1];\n\n  if (frameId === nextFrameId) {\n    delete nextFrameQueue[index];\n  }\n}\n\nfunction runQueue() {\n  var now = currentTime();\n  var queue = nextFrameQueue;\n  nextFrameQueue = [];\n  unstable_batchedUpdates(function () {\n    return queue.forEach(function (task) {\n      return task && task(now);\n    });\n  });\n}\n\nvar useLayoutEffect$3 = typeof window !== \"undefined\" ? React.useLayoutEffect : React.useEffect;\nfunction useSpring(target, config) {\n  if (config === void 0) {\n    config = {};\n  }\n\n  var _React$useState = React.useState(),\n      forceUpdate = _React$useState[1];\n\n  var newConfig = getConfigWithDefaults(target, config);\n\n  var _useSpringInstance = useSpringInstance(target, config),\n      state = _useSpringInstance.state,\n      oldConfig = _useSpringInstance.config; // TODO all springs should use the same t in the same frame\n\n\n  var t = currentTime();\n  var x0 = state.x0,\n      v0 = state.v0,\n      t0 = state.t0;\n  var k = oldConfig.k,\n      c = oldConfig.c,\n      m = oldConfig.m,\n      X = oldConfig.X;\n\n  var _ref = newConfig.teleport ? {\n    x: X,\n    v: 0\n  } : spring({\n    x0: x0,\n    v0: v0,\n    t0: t0,\n    t: t,\n    k: k,\n    c: c,\n    m: m,\n    X: X\n  }),\n      x = _ref.x,\n      v = _ref.v;\n\n  var moving = isMoving(x, v, t, newConfig);\n  useLayoutEffect$3(function () {\n    Object.assign(oldConfig, newConfig);\n  }, [newConfig.X, newConfig.k, newConfig.c, newConfig.m, newConfig.teleport]);\n  useLayoutEffect$3(function () {\n    state.x0 = x;\n    state.v0 = v;\n    state.t0 = t;\n  }, [x, v, t]);\n  useLayoutEffect$3(function () {\n    var loop = function loop(now) {\n      var x0 = state.x0,\n          v0 = state.v0,\n          t0 = state.t0;\n      var k = oldConfig.k,\n          c = oldConfig.c,\n          m = oldConfig.m,\n          X = oldConfig.X,\n          decimals = oldConfig.decimals;\n\n      var _spring = spring({\n        x0: x0,\n        v0: v0,\n        t0: t0,\n        t: now,\n        k: k,\n        c: c,\n        m: m,\n        X: X\n      }),\n          nextX = _spring.x;\n\n      if (roundTo(nextX, decimals) !== roundTo(x0, decimals)) {\n        state.raf = null;\n        forceUpdate(now);\n      } else {\n        state.raf = queueAnimationFrame(loop);\n      }\n    };\n\n    if (moving && state.raf == null) {\n      state.raf = queueAnimationFrame(loop);\n    } else if (!moving && state.raf != null) {\n      unqueueAnimationFrame(state.raf);\n      state.raf = null;\n    }\n  });\n  useLayoutEffect$3(function () {\n    return function () {\n      if (state.raf != null) {\n        unqueueAnimationFrame(state.raf);\n      }\n    };\n  }, []);\n  return [roundTo(x, newConfig.decimals), moving];\n}\n\nfunction isMoving(x, v, t, _ref2) {\n  var decimals = _ref2.decimals,\n      X = _ref2.X,\n      k = _ref2.k,\n      c = _ref2.c,\n      m = _ref2.m;\n\n  if (roundTo(x, decimals) !== roundTo(X, decimals)) {\n    return true;\n  }\n\n  var nextT = t + 0.016;\n\n  var _spring2 = spring({\n    x0: x,\n    v0: v,\n    t0: t,\n    t: nextT,\n    k: k,\n    c: c,\n    m: m,\n    X: X\n  }),\n      nextX = _spring2.x;\n\n  return roundTo(nextX, decimals) !== roundTo(X, decimals);\n}\n\nfunction roundTo(x, decimals) {\n  var p = Math.pow(10, decimals);\n  return Math.round(x * p) / p;\n}\n\nconst defaultSpring$1 = {\r\n    stiffness: 120,\r\n    damping: 24,\r\n    mass: 0.2,\r\n    decimals: 3,\r\n};\r\nfunction CodeSpring(_a) {\r\n    var { step, config } = _a, htmlProps = __rest(_a, [\"step\", \"config\"]);\r\n    const { tween, t } = useStepSpring$1(step, config.spring);\r\n    return (React.createElement(CodeTween, Object.assign({ tween: tween, progress: t, config: config }, htmlProps)));\r\n}\r\nfunction useStepSpring$1(step, springConfig = defaultSpring$1) {\r\n    const [{ target, steps, index }, setState] = React.useState({\r\n        target: 2,\r\n        steps: [step, step, step],\r\n        index: 0,\r\n    });\r\n    React.useEffect(() => {\r\n        const lastStep = steps[steps.length - 1];\r\n        if (lastStep != step) {\r\n            setState(s => updateStepSpring$1(s, step, progress));\r\n        }\r\n    }, [step]);\r\n    const [progress] = useSpring(target, springConfig);\r\n    const trioProgress = progress - index;\r\n    const result = trioProgress <= 1\r\n        ? {\r\n            tween: { prev: steps[0], next: steps[1] },\r\n            t: trioProgress,\r\n        }\r\n        : {\r\n            tween: { prev: steps[1], next: steps[2] },\r\n            t: trioProgress - 1,\r\n        };\r\n    return result;\r\n}\r\nfunction updateStepSpring$1(state, newStep, progress) {\r\n    const { steps, target, index } = state;\r\n    const stepsClone = steps.slice();\r\n    const trioProgress = progress - index;\r\n    if (trioProgress < 1) {\r\n        stepsClone[2] = newStep;\r\n        return Object.assign(Object.assign({}, state), { steps: stepsClone });\r\n    }\r\n    else {\r\n        stepsClone[0] = steps[1];\r\n        stepsClone[1] = steps[2];\r\n        stepsClone[2] = newStep;\r\n        return Object.assign(Object.assign({}, state), { steps: stepsClone, target: target + 1, index: index + 1 });\r\n    }\r\n}\n\nconst MiniFrame = React.forwardRef(function (_a, ref) {\r\n    var { title, children, titleBar, zoom = 1, overflow } = _a, props = __rest(_a, [\"title\", \"children\", \"titleBar\", \"zoom\", \"overflow\"]);\r\n    const bar = titleBar || React.createElement(DefaultTitleBar, { title: title });\r\n    const zoomStyle = {\r\n        \"--ch-frame-zoom\": zoom,\r\n        overflow,\r\n    };\r\n    return (React.createElement(\"div\", Object.assign({}, props, { ref: ref }),\r\n        React.createElement(\"div\", { className: \"ch-frame\" },\r\n            React.createElement(\"div\", { className: \"ch-frame-title-bar\" }, bar),\r\n            React.createElement(\"div\", { className: \"ch-frame-content\" },\r\n                React.createElement(\"div\", { className: \"ch-frame-zoom\", style: zoomStyle }, children)))));\r\n});\r\nReact.forwardRef(function (_a, ref) {\r\n    var { title, children, titleBar, overflow } = _a, props = __rest(_a, [\"title\", \"children\", \"titleBar\", \"overflow\"]);\r\n    const bar = titleBar || React.createElement(DefaultTitleBar, { title: title });\r\n    return (React.createElement(\"div\", Object.assign({}, props, { ref: ref }),\r\n        React.createElement(\"div\", { className: \"ch-simple-frame\" },\r\n            React.createElement(\"div\", { className: \"ch-frame-title-bar\" }, bar),\r\n            children)));\r\n});\r\nfunction DefaultTitleBar({ title }) {\r\n    return (React.createElement(React.Fragment, null,\r\n        React.createElement(\"div\", { className: \"ch-frame-left-bar\" },\r\n            React.createElement(FrameButtons, null)),\r\n        React.createElement(\"div\", { className: \"ch-frame-middle-bar\" }, title),\r\n        React.createElement(\"div\", { className: \"ch-frame-right-bar\" })));\r\n}\r\nfunction FrameButtons() {\r\n    return (React.createElement(\"div\", { className: \"ch-frame-buttons\" },\r\n        React.createElement(\"div\", { className: \"ch-frame-button ch-frame-button-left\" }),\r\n        React.createElement(\"div\", { className: \"ch-frame-button-space\" }),\r\n        React.createElement(\"div\", { className: \"ch-frame-button ch-frame-button-middle\" }),\r\n        React.createElement(\"div\", { className: \"ch-frame-button-space\" }),\r\n        React.createElement(\"div\", { className: \"ch-frame-button ch-frame-button-right\" })));\r\n}\n\nconst EditorFrame = React.forwardRef(function InnerEditorFrame(_a, ref) {\r\n    var _b;\r\n    var { northPanel, southPanel, terminalPanel, style, height, northButton, southButton, className, onTabClick } = _a, rest = __rest(_a, [\"northPanel\", \"southPanel\", \"terminalPanel\", \"style\", \"height\", \"northButton\", \"southButton\", \"className\", \"onTabClick\"]);\r\n    return (React.createElement(\"div\", Object.assign({ ref: ref }, rest, { className: \"ch-editor-frame\", style: style }),\r\n        React.createElement(\"div\", { className: \"ch-frame-title-bar\" },\r\n            React.createElement(TabsContainer, { tabs: northPanel.tabs, showFrameButtons: true, button: northButton, panel: \"north\", onTabClick: onTabClick })),\r\n        React.createElement(\"div\", { \"data-ch-panel\": \"north\", style: northPanel.style, children: northPanel.children }),\r\n        southPanel && (React.createElement(React.Fragment, null,\r\n            React.createElement(\"div\", { className: \"ch-frame-title-bar\", style: {\r\n                    transform: (_b = southPanel.style) === null || _b === void 0 ? void 0 : _b.transform,\r\n                } },\r\n                React.createElement(TabsContainer, { tabs: southPanel.tabs, showFrameButtons: false, button: southButton, topBorder: true, panel: \"south\", onTabClick: onTabClick })),\r\n            React.createElement(\"div\", { \"data-ch-panel\": \"south\", children: southPanel.children, style: southPanel.style })))));\r\n});\r\nfunction TabsContainer({ tabs, button, showFrameButtons, topBorder, panel, onTabClick, }) {\r\n    return (React.createElement(React.Fragment, null,\r\n        topBorder && (React.createElement(\"div\", { className: \"ch-editor-group-border\" })),\r\n        showFrameButtons ? React.createElement(FrameButtons, null) : React.createElement(\"div\", null),\r\n        tabs.map(({ title, active, style }) => (React.createElement(\"div\", { key: title, title: title, \"data-ch-tab\": panel, \"data-active\": active, className: \"ch-editor-tab\", style: style, onClick: onTabClick && (() => onTabClick(title)) },\r\n            React.createElement(TabTitle, { title: title })))),\r\n        React.createElement(\"div\", { style: { flex: 1, minWidth: \"0.8em\" } }),\r\n        button));\r\n}\r\nfunction TabTitle({ title }) {\r\n    if (!title) {\r\n        return React.createElement(\"div\", null);\r\n    }\r\n    const separatorIndex = title.lastIndexOf(\"/\") + 1;\r\n    const filename = title.substring(separatorIndex);\r\n    const folder = title.substring(0, separatorIndex);\r\n    return (React.createElement(\"div\", null,\r\n        React.createElement(\"span\", { style: { opacity: 0.5 } }, folder),\r\n        filename));\r\n}\n\nfunction getCommands(text) {\r\n    const [, ...lines] = text.split(/^\\$\\s*/gm);\r\n    const commands = lines.map((c) => {\r\n        const [run, ...outputLines] = c.split(/\\r?\\n/);\r\n        return {\r\n            run,\r\n            output: outputLines.length > 0 ? outputLines.join(\"\\n\") : null,\r\n        };\r\n    });\r\n    const lastCommand = commands[commands.length - 1];\r\n    const isRunning = commands.length > 0 && lastCommand.output != null;\r\n    const title = isRunning ? lastCommand.run.split(/(\\s+)/)[0] : \"bash\";\r\n    return {\r\n        title,\r\n        isRunning,\r\n        commands,\r\n    };\r\n}\n\nconst prompt = React.createElement(\"span\", { className: \"ch-terminal-prompt\" }, \"$\");\r\nfunction TerminalContent({ text, progress = 1, style, }) {\r\n    const commands = parse(text, progress);\r\n    return (React.createElement(\"pre\", { style: style, className: \"ch-terminal-content\" }, commands.map(({ run, output }, i) => (React.createElement(React.Fragment, { key: i },\r\n        React.createElement(\"div\", null,\r\n            prompt,\r\n            \" \",\r\n            React.createElement(\"span\", null, run)),\r\n        output && (React.createElement(\"div\", { className: \"ch-terminal-output\" }, output)))))));\r\n}\r\nfunction parse(text, progress) {\r\n    if (!text)\r\n        return [];\r\n    const chars = Math.round(text.length * progress);\r\n    const { commands } = getCommands(text.slice(0, chars));\r\n    return commands;\r\n}\n\nfunction InnerTerminalTransition({ prev = \"\", prevKey, next = \"\", nextKey, progress, }) {\r\n    return (React.createElement(\"div\", { className: \"ch-terminal\" },\r\n        React.createElement(\"div\", { style: {\r\n                position: \"relative\",\r\n                transform: `translateY(-${progress * 100}%)`,\r\n            } },\r\n            React.createElement(TerminalContent, { text: prev, progress: 1, key: prevKey }),\r\n            React.createElement(TerminalContent, { style: { position: \"absolute\" }, text: next, progress: progress, key: nextKey }))));\r\n}\n\nfunction InnerTerminalTransitions({ steps, progress, }) {\r\n    const textSteps = steps.map((s) => s.text);\r\n    const stepProgress = progress % 1;\r\n    const prevIndex = clamp(Math.floor(progress), 0, steps.length - 1);\r\n    const nextIndex = prevIndex + 1;\r\n    return (React.createElement(InnerTerminalTransition, { prev: textSteps[prevIndex], prevKey: prevIndex, next: textSteps[nextIndex] || \"\", nextKey: nextIndex, progress: stepProgress }));\r\n}\r\nfunction clamp(x, min, max) {\r\n    return Math.min(Math.max(x, min), max);\r\n}\n\nfunction TerminalPanel({ prev, next, t, backward, }) {\r\n    const height = getHeight({ prev, next, t, backward });\r\n    return !height ? null : (React.createElement(\"div\", { className: \"ch-editor-terminal\", style: { height } },\r\n        React.createElement(\"div\", { className: \"ch-editor-terminal-tab\" },\r\n            React.createElement(\"span\", null, \"Terminal\")),\r\n        React.createElement(\"div\", { className: \"ch-editor-terminal-content\" },\r\n            React.createElement(InnerTerminalTransitions, { steps: [\r\n                    { text: prev || \"\" },\r\n                    { text: next || \"\" },\r\n                ], progress: t }),\r\n            \")\")));\r\n}\r\nfunction getHeight({ prev, next, t, backward, }) {\r\n    if (!prev && !next)\r\n        return 0;\r\n    if (!prev && next)\r\n        return MAX_HEIGHT * Math.min(t * 4, 1);\r\n    if (prev && !next)\r\n        return MAX_HEIGHT * Math.max(1 - t * 4, 0);\r\n    return MAX_HEIGHT;\r\n}\r\nconst MAX_HEIGHT = 150;\n\nfunction northConfig(codeConfig) {\r\n    if (Array.isArray(codeConfig.rows)) {\r\n        return Object.assign(Object.assign({}, codeConfig), { rows: codeConfig.rows[0] });\r\n    }\r\n    return codeConfig;\r\n}\r\nfunction southConfig(codeConfig) {\r\n    if (Array.isArray(codeConfig.rows)) {\r\n        return Object.assign(Object.assign({}, codeConfig), { rows: codeConfig.rows[1] });\r\n    }\r\n    return codeConfig;\r\n}\r\nfunction useTransition(ref, prev, next, t, backward, codeConfig) {\r\n    // prevSnapshot has the dimensions of the editor for t=0\r\n    // nextSnapshot has the dimensions of the editor for t=1\r\n    const { prevSnapshot, nextSnapshot } = useSnapshots(ref, prev, next);\r\n    // we return the default styles for t=0 until we measure the dimensions\r\n    if (!prevSnapshot) {\r\n        return startingPosition(prev, next, codeConfig);\r\n    }\r\n    // and the same for t=1\r\n    if (!nextSnapshot) {\r\n        return endingPosition(prev, next, codeConfig);\r\n    }\r\n    // TODO this should be commented\r\n    // if (t === 0) {\r\n    //   return startingPosition(prev, next, codeConfig)\r\n    // }\r\n    if (t === 1) {\r\n        return endingPosition(prev, next, codeConfig);\r\n    }\r\n    const inputSouthPanel = prev.southPanel || next.southPanel;\r\n    const { prevNorthFile, prevSouthFile, nextNorthFile, nextSouthFile, } = getStepFiles(prev, next, t == 0 || backward);\r\n    const { northStyle, southStyle } = getPanelStyles(prevSnapshot, nextSnapshot, t);\r\n    const { northTabs, southTabs } = getTabs(prevSnapshot, nextSnapshot, prevNorthFile.name, prevSouthFile === null || prevSouthFile === void 0 ? void 0 : prevSouthFile.name, t);\r\n    return {\r\n        northContent: getContentFromFile(nextNorthFile),\r\n        northPanel: {\r\n            tabs: northTabs,\r\n            style: northStyle,\r\n            children: (React.createElement(CodeTransition, { codeConfig: northConfig(codeConfig), prevFile: prevNorthFile, nextFile: nextNorthFile, t: t, parentHeight: (northStyle.height ||\r\n                    northStyle.minHeight) })),\r\n        },\r\n        southContent: getContentFromFile(nextSouthFile),\r\n        southPanel: inputSouthPanel && {\r\n            tabs: southTabs,\r\n            style: southStyle,\r\n            children: (React.createElement(CodeTransition, { codeConfig: southConfig(codeConfig), prevFile: prevSouthFile, nextFile: nextSouthFile, t: t, parentHeight: ((southStyle === null || southStyle === void 0 ? void 0 : southStyle.height) ||\r\n                    (southStyle === null || southStyle === void 0 ? void 0 : southStyle.minHeight)) })),\r\n        },\r\n    };\r\n}\r\n// Returns the t=0 state of the transition\r\nfunction startingPosition(prev, next, codeConfig) {\r\n    const inputNorthPanel = prev.northPanel;\r\n    const inputSouthPanel = prev.southPanel;\r\n    const { prevNorthFile, prevSouthFile, nextNorthFile, nextSouthFile, } = getStepFiles(prev, next, true);\r\n    return {\r\n        northContent: getContentFromFile(prevNorthFile),\r\n        northPanel: {\r\n            tabs: inputNorthPanel.tabs.map(title => ({\r\n                title,\r\n                active: title === inputNorthPanel.active,\r\n                style: {},\r\n            })),\r\n            style: {\r\n                flexGrow: 1,\r\n                overflow: \"hidden\",\r\n            },\r\n            children: (React.createElement(CodeTransition, { codeConfig: northConfig(codeConfig), prevFile: prevNorthFile, nextFile: prevNorthFile, t: 0, parentHeight: \"0\" })),\r\n        },\r\n        southContent: getContentFromFile(prevSouthFile),\r\n        southPanel: inputSouthPanel && {\r\n            tabs: inputSouthPanel.tabs.map(title => ({\r\n                title,\r\n                active: title === inputSouthPanel.active,\r\n                style: {},\r\n            })),\r\n            style: {\r\n                flexGrow: 1,\r\n                overflow: \"hidden\",\r\n            },\r\n            children: (React.createElement(CodeTransition, { codeConfig: southConfig(codeConfig), prevFile: prevSouthFile, nextFile: prevSouthFile, t: 0, parentHeight: \"0\" })),\r\n        },\r\n    };\r\n}\r\n// Returns the t=1 state of the transition\r\nfunction endingPosition(prev, next, codeConfig) {\r\n    var _a;\r\n    const inputNorthPanel = next.northPanel;\r\n    const inputSouthPanel = next.southPanel;\r\n    let { prevNorthFile, prevSouthFile, nextNorthFile, nextSouthFile, } = getStepFiles(prev, next, false);\r\n    // getStepFiles return the intermediate files, we need to patch the ending state (2to1south)\r\n    const isTwoToOneSouth = !inputSouthPanel &&\r\n        inputNorthPanel.active === ((_a = prev === null || prev === void 0 ? void 0 : prev.southPanel) === null || _a === void 0 ? void 0 : _a.active);\r\n    if (isTwoToOneSouth) {\r\n        nextNorthFile = nextSouthFile;\r\n    }\r\n    return {\r\n        northContent: getContentFromFile(nextNorthFile),\r\n        northPanel: {\r\n            tabs: inputNorthPanel.tabs.map(title => ({\r\n                title,\r\n                active: title === inputNorthPanel.active,\r\n                style: {},\r\n            })),\r\n            style: {\r\n                flexGrow: 1,\r\n                overflow: \"hidden\",\r\n            },\r\n            children: (React.createElement(CodeTransition, { codeConfig: northConfig(codeConfig), prevFile: nextNorthFile, nextFile: nextNorthFile, t: 1, parentHeight: \"1\" })),\r\n        },\r\n        southContent: getContentFromFile(nextSouthFile),\r\n        southPanel: inputSouthPanel && {\r\n            tabs: inputSouthPanel.tabs.map(title => ({\r\n                title,\r\n                active: title === inputSouthPanel.active,\r\n                style: {},\r\n            })),\r\n            style: {\r\n                flexGrow: 1,\r\n                overflow: \"hidden\",\r\n            },\r\n            children: (React.createElement(CodeTransition, { codeConfig: southConfig(codeConfig), prevFile: nextSouthFile, nextFile: nextSouthFile, t: 1, parentHeight: \"1\" })),\r\n        },\r\n    };\r\n}\r\nfunction CodeTransition({ prevFile, nextFile, t, codeConfig, parentHeight, }) {\r\n    var _a;\r\n    const htmlProps = Object.assign(Object.assign({}, codeConfig === null || codeConfig === void 0 ? void 0 : codeConfig.htmlProps), { style: Object.assign({ height: \"100%\" }, (_a = codeConfig === null || codeConfig === void 0 ? void 0 : codeConfig.htmlProps) === null || _a === void 0 ? void 0 : _a.style) });\r\n    return (React.createElement(CodeTween, Object.assign({ progress: t, tween: { prev: prevFile, next: nextFile }, config: Object.assign(Object.assign({}, codeConfig), { parentHeight }) }, htmlProps)));\r\n}\r\nfunction getContentFromFile(file) {\r\n    return file ? codeToText(file.code) : \"\";\r\n}\r\n/**\r\n * Get the StepFiles for a transition\r\n * in each panel, if the prev and next active files are the same\r\n * we return the prev and next version of that panel\r\n * if the active files are different, we return the same file twice,\r\n * if backward is true we return the prev active file twice,\r\n * or else the next active file twice\r\n */\r\nfunction getStepFiles(prev, next, backward) {\r\n    var _a, _b;\r\n    // The active file in each panel before and after:\r\n    // +----+----+\r\n    // | pn | nn |\r\n    // +----+----+\r\n    // | ps | ns |\r\n    // +----+----+\r\n    //\r\n    const pn = prev.northPanel.active;\r\n    const nn = next.northPanel.active;\r\n    const ps = (_a = prev.southPanel) === null || _a === void 0 ? void 0 : _a.active;\r\n    const ns = (_b = next.southPanel) === null || _b === void 0 ? void 0 : _b.active;\r\n    const pnFile = prev.files.find(f => f.name === pn);\r\n    const nnFile = next.files.find(f => f.name === nn);\r\n    const psFile = ps\r\n        ? prev.files.find(f => f.name === ps)\r\n        : null;\r\n    const nsFile = ns\r\n        ? next.files.find(f => f.name === ns)\r\n        : null;\r\n    const oneToTwoSouth = !ps && pn === ns;\r\n    if (oneToTwoSouth) {\r\n        return {\r\n            prevNorthFile: nnFile,\r\n            nextNorthFile: nnFile,\r\n            prevSouthFile: pnFile,\r\n            nextSouthFile: nsFile,\r\n        };\r\n    }\r\n    const twoToOneSouth = !ns && nn === ps;\r\n    if (twoToOneSouth) {\r\n        return {\r\n            prevNorthFile: pnFile,\r\n            nextNorthFile: pnFile,\r\n            prevSouthFile: psFile,\r\n            nextSouthFile: nnFile,\r\n        };\r\n    }\r\n    const prevNorthFile = pn === nn ? pnFile : backward ? pnFile : nnFile;\r\n    const nextNorthFile = pn === nn ? nnFile : backward ? pnFile : nnFile;\r\n    const prevSouthFile = ps === ns\r\n        ? psFile\r\n        : backward\r\n            ? psFile || nsFile\r\n            : nsFile || psFile;\r\n    const nextSouthFile = ps === ns\r\n        ? nsFile\r\n        : backward\r\n            ? psFile || nsFile\r\n            : nsFile || psFile;\r\n    return {\r\n        prevNorthFile,\r\n        nextNorthFile,\r\n        prevSouthFile,\r\n        nextSouthFile,\r\n    };\r\n}\r\nfunction getPanelStyles(prev, next, t) {\r\n    // +---+---+\r\n    // | x | x |\r\n    // +---+---+\r\n    // |   |   |\r\n    // +---+---+\r\n    if (prev.southHeight === null &&\r\n        next.southHeight === null) {\r\n        return {\r\n            northStyle: {\r\n                minHeight: prev.northHeight,\r\n            },\r\n        };\r\n    }\r\n    // +---+---+\r\n    // | x | x |\r\n    // +---+---+\r\n    // | y |   |\r\n    // +---+---+\r\n    if (prev.southHeight !== null &&\r\n        next.southHeight === null &&\r\n        next.northKey !== prev.southKey) {\r\n        return {\r\n            northStyle: {\r\n                minHeight: tween(prev.northHeight, next.northHeight, t),\r\n            },\r\n            southStyle: {\r\n                minHeight: prev.southHeight,\r\n            },\r\n        };\r\n    }\r\n    // +---+---+\r\n    // | x | y |\r\n    // +---+---+\r\n    // | y |   |\r\n    // +---+---+\r\n    if (prev.southHeight !== null &&\r\n        next.southHeight === null &&\r\n        prev.southKey === next.northKey) {\r\n        return {\r\n            northStyle: {\r\n                minHeight: prev.northHeight,\r\n            },\r\n            southStyle: {\r\n                position: \"relative\",\r\n                minHeight: tween(prev.southHeight, next.northHeight, t),\r\n                transform: `translateY(${tween(0, -(prev.northHeight + prev.titleBarHeight), t)}px)`,\r\n            },\r\n        };\r\n    }\r\n    // +---+---+\r\n    // | x | x |\r\n    // +---+---+\r\n    // |   | y |\r\n    // +---+---+\r\n    if (prev.southHeight === null &&\r\n        next.southHeight !== null &&\r\n        prev.northKey !== next.southKey) {\r\n        return {\r\n            northStyle: {\r\n                minHeight: tween(prev.northHeight, next.northHeight, t),\r\n            },\r\n            southStyle: {\r\n                position: \"relative\",\r\n                minHeight: next.southHeight,\r\n            },\r\n        };\r\n    }\r\n    // +---+---+\r\n    // | y | x |\r\n    // +---+---+\r\n    // |   | y |\r\n    // +---+---+\r\n    if (prev.southHeight === null &&\r\n        next.southHeight !== null &&\r\n        prev.northKey === next.southKey) {\r\n        return {\r\n            northStyle: {\r\n                minHeight: next.northHeight,\r\n            },\r\n            southStyle: {\r\n                position: \"relative\",\r\n                minHeight: tween(prev.northHeight, next.southHeight, t),\r\n                transform: `translateY(${tween(-(next.northHeight + next.titleBarHeight), 0, t)}px)`,\r\n            },\r\n        };\r\n    }\r\n    // +---+---+\r\n    // | x | x |\r\n    // +---+---+\r\n    // | y | y |\r\n    // +---+---+\r\n    return {\r\n        northStyle: {\r\n            minHeight: tween(prev.northHeight, next.northHeight, t),\r\n        },\r\n        southStyle: {\r\n            minHeight: tween(prev.southHeight, next.southHeight, t),\r\n        },\r\n    };\r\n}\r\nfunction tween(a, b, t) {\r\n    return a + (b - a) * t;\r\n}\r\nfunction getTabs(prevSnapshot, nextSnapshot, northActive, southActive, t) {\r\n    // TODO simplify\r\n    if (!prevSnapshot.southTabs &&\r\n        isPresent(southActive, prevSnapshot.northTabs)) {\r\n        /// one to two south\r\n        return {\r\n            northTabs: getPanelTabs(nextSnapshot.northTabs, nextSnapshot.southTabs, prevSnapshot.southTabs, prevSnapshot.northTabs, northActive, t),\r\n            southTabs: getPanelTabs(nextSnapshot.southTabs, nextSnapshot.northTabs, prevSnapshot.northTabs, prevSnapshot.southTabs, southActive, t),\r\n        };\r\n    }\r\n    if (!nextSnapshot.southTabs &&\r\n        isPresent(southActive, nextSnapshot.northTabs)) {\r\n        /// two to one south\r\n        return {\r\n            northTabs: getPanelTabs(nextSnapshot.southTabs, nextSnapshot.northTabs, prevSnapshot.northTabs, prevSnapshot.southTabs, northActive, t),\r\n            southTabs: getPanelTabs(nextSnapshot.northTabs, nextSnapshot.southTabs, prevSnapshot.southTabs, prevSnapshot.northTabs, southActive, t),\r\n        };\r\n    }\r\n    return {\r\n        northTabs: getPanelTabs(nextSnapshot.northTabs, nextSnapshot.southTabs, prevSnapshot.northTabs, prevSnapshot.southTabs, northActive, t),\r\n        southTabs: getPanelTabs(nextSnapshot.southTabs, nextSnapshot.northTabs, prevSnapshot.southTabs, prevSnapshot.northTabs, southActive, t),\r\n    };\r\n}\r\nfunction getPanelTabs(nextSnapshot, otherNextSnapshot, prevSnapshot, otherPrevSnapshot, active, t) {\r\n    // For each tab bar there are four types of tabs\r\n    // - oldTabs: tabs that are present in both prev and next versions of the bar\r\n    // - totallyNewTabs: tabs that are totally new (present in next\r\n    // but not in any prev)\r\n    // - migratingTabs: tabs that are come from the other bar (present\r\n    // in next and in otherPrev)\r\n    // - disappearingTabs: present in prev but not in next or otherNext\r\n    const oldTabs = !nextSnapshot\r\n        ? []\r\n        : Object.keys(nextSnapshot)\r\n            .filter(filename => isPresent(filename, prevSnapshot) ||\r\n            !prevSnapshot)\r\n            .map(filename => {\r\n            const prev = prevSnapshot && prevSnapshot[filename];\r\n            const next = nextSnapshot[filename];\r\n            const dx = prev\r\n                ? prev.left + (next.left - prev.left) * t\r\n                : next.left;\r\n            const width = prev\r\n                ? prev.width + (next.width - prev.width) * t\r\n                : next.width;\r\n            return {\r\n                active: filename === active,\r\n                title: filename,\r\n                style: {\r\n                    position: \"absolute\",\r\n                    transform: `translateX(${dx}px)`,\r\n                    width,\r\n                },\r\n            };\r\n        });\r\n    const totallyNewTabs = !nextSnapshot\r\n        ? []\r\n        : Object.keys(nextSnapshot)\r\n            .filter(filename => prevSnapshot &&\r\n            !isPresent(filename, prevSnapshot)\r\n        // && !isPresent(filename, otherPrevSnapshot)\r\n        )\r\n            .map(filename => {\r\n            const next = nextSnapshot[filename];\r\n            return {\r\n                active: filename === active,\r\n                title: filename,\r\n                style: {\r\n                    position: \"absolute\",\r\n                    transform: `translateX(${next.left}px)`,\r\n                    opacity: t,\r\n                    width: next.width,\r\n                },\r\n            };\r\n        });\r\n    !nextSnapshot\r\n        ? []\r\n        : Object.keys(nextSnapshot)\r\n            .filter(filename => isPresent(filename, otherPrevSnapshot))\r\n            .map(filename => {\r\n            const prev = otherPrevSnapshot[filename];\r\n            const next = nextSnapshot[filename];\r\n            const dx = next.left - prev.left;\r\n            return {\r\n                active: filename === active,\r\n                title: filename,\r\n                style: {\r\n                    position: \"absolute\",\r\n                    transform: `translateX(${dx}px)`,\r\n                },\r\n            };\r\n        });\r\n    const disappearingTabs = !prevSnapshot\r\n        ? []\r\n        : Object.keys(prevSnapshot)\r\n            .filter(filename => !isPresent(filename, nextSnapshot)\r\n        // && !isPresent(filename, otherNextSnapshot)\r\n        )\r\n            .map(filename => {\r\n            const prev = prevSnapshot[filename];\r\n            return {\r\n                active: filename === active,\r\n                title: filename,\r\n                style: {\r\n                    position: \"absolute\",\r\n                    opacity: 1 - t,\r\n                    transform: `translateX(${prev.left}px)`,\r\n                    width: prev.width,\r\n                },\r\n            };\r\n        });\r\n    return [\r\n        ...totallyNewTabs,\r\n        // ...migratingTabs,\r\n        ...oldTabs,\r\n        ...disappearingTabs,\r\n    ];\r\n}\r\nfunction isPresent(filename, snapshot) {\r\n    return snapshot && filename && filename in snapshot;\r\n}\r\n// snapshots\r\nconst useLayoutEffect$2 = typeof window !== \"undefined\"\r\n    ? React.useLayoutEffect\r\n    : React.useEffect;\r\nfunction useSnapshots(ref, prev, next) {\r\n    const [{ prevSnapshot, nextSnapshot }, setState] = React.useState({\r\n        prevSnapshot: null,\r\n        nextSnapshot: null,\r\n    });\r\n    useLayoutEffect$2(() => {\r\n        if (prevSnapshot || nextSnapshot) {\r\n            setState({\r\n                prevSnapshot: null,\r\n                nextSnapshot: null,\r\n            });\r\n        }\r\n    }, [prev, next]);\r\n    useLayoutEffect$2(() => {\r\n        if (!prevSnapshot) {\r\n            const parent = ref.current;\r\n            setState(s => (Object.assign(Object.assign({}, s), { prevSnapshot: Object.assign(Object.assign({}, getPanelSnapshot(parent, prev)), getTabsSnapshot(parent, prev)) })));\r\n        }\r\n        else if (!nextSnapshot) {\r\n            const parent = ref.current;\r\n            setState(s => (Object.assign(Object.assign({}, s), { nextSnapshot: Object.assign(Object.assign({}, getPanelSnapshot(parent, next)), getTabsSnapshot(parent, next)) })));\r\n        }\r\n    });\r\n    return { prevSnapshot, nextSnapshot };\r\n}\r\nfunction getPanelSnapshot(parent, step) {\r\n    var _a;\r\n    const northElement = parent.querySelector(\"[data-ch-panel='north']\");\r\n    const southElement = parent.querySelector(\"[data-ch-panel='south']\");\r\n    const bar = parent.querySelector(\".ch-frame-title-bar\");\r\n    return {\r\n        titleBarHeight: bar.getBoundingClientRect().height,\r\n        northHeight: northElement.getBoundingClientRect().height,\r\n        northKey: step.northPanel.active,\r\n        southHeight: (southElement === null || southElement === void 0 ? void 0 : southElement.getBoundingClientRect().height) || null,\r\n        southKey: (_a = step.southPanel) === null || _a === void 0 ? void 0 : _a.active,\r\n    };\r\n}\r\nfunction getTabsSnapshot(parent, step) {\r\n    var _a;\r\n    const northTabs = Array.from(parent.querySelectorAll(\"[data-ch-tab='north']\"));\r\n    const southTabs = Array.from(parent.querySelectorAll(\"[data-ch-tab='south']\"));\r\n    return {\r\n        northTabs: getTabsDimensions(northTabs, step.northPanel.active),\r\n        southTabs: getTabsDimensions(southTabs, (_a = step.southPanel) === null || _a === void 0 ? void 0 : _a.active),\r\n    };\r\n}\r\nfunction getTabsDimensions(tabElements, active) {\r\n    if (!tabElements[0]) {\r\n        return null;\r\n    }\r\n    const parent = tabElements[0].parentElement;\r\n    const parentLeft = parent.getBoundingClientRect().left;\r\n    const dimensions = {};\r\n    tabElements.forEach(child => {\r\n        const filename = child.getAttribute(\"title\");\r\n        const rect = child.getBoundingClientRect();\r\n        dimensions[filename] = {\r\n            left: rect.left - parentLeft,\r\n            width: rect.width,\r\n            active: filename === active,\r\n        };\r\n    });\r\n    return dimensions;\r\n}\n\nfunction CodeBrowser({ files, startingFileName, }) {\r\n    const [activeFile, setActiveFile] = React.useState(() => files.find(f => f.name === startingFileName));\r\n    return (React.createElement(\"div\", { className: \"ch-code-browser\" },\r\n        React.createElement(Sidebar, { files: files, activeFile: activeFile, setActiveFile: setActiveFile }),\r\n        React.createElement(Content, { file: activeFile })));\r\n}\r\nfunction Sidebar({ files, activeFile, setActiveFile, }) {\r\n    const tree = React.useMemo(() => toFileTree(files), [files]);\r\n    return (React.createElement(\"div\", { className: \"ch-code-browser-sidebar\" },\r\n        React.createElement(SidebarNodes, { tree: tree, activeFile: activeFile, setActiveFile: setActiveFile })));\r\n}\r\nfunction SidebarNodes({ tree, activeFile, setActiveFile, level = 0, }) {\r\n    return (React.createElement(React.Fragment, null, tree.map(node => (React.createElement(SidebarNode, { key: node.name, node: node, activeFile: activeFile, setActiveFile: setActiveFile, level: level })))));\r\n}\r\nfunction SidebarNode({ node, activeFile, setActiveFile, level, }) {\r\n    const isFolder = node.children && node.children.length > 0;\r\n    const isSelected = node.codeFile === activeFile;\r\n    if (isFolder) {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", { className: \"ch-code-browser-sidebar-folder\" },\r\n                React.createElement(\"div\", { style: { paddingLeft: level * 1.5 + \"ch\" } }, node.name)),\r\n            React.createElement(SidebarNodes, { tree: node.children, activeFile: activeFile, setActiveFile: setActiveFile, level: level + 1 })));\r\n    }\r\n    else {\r\n        return (React.createElement(\"div\", null,\r\n            React.createElement(\"div\", { className: \"ch-code-browser-sidebar-file\", \"data-selected\": isSelected, onClick: () => setActiveFile(node.codeFile) },\r\n                React.createElement(\"div\", { style: { paddingLeft: level * 1.5 + \"ch\" } }, node.name))));\r\n    }\r\n}\r\nfunction Content({ file }) {\r\n    return (React.createElement(\"div\", { className: \"ch-code-browser-content\" },\r\n        React.createElement(CopyButton, { className: \"ch-code-browser-button\", content: codeToText(file.code) }),\r\n        file.code.lines.map((line, i) => (React.createElement(\"div\", { key: i },\r\n            line.tokens.map((token, i) => (React.createElement(\"span\", Object.assign({ key: i }, token.props), token.content))),\r\n            React.createElement(\"br\", null))))));\r\n}\r\nfunction toFileTree(files) {\r\n    let tree = [];\r\n    for (const file of files) {\r\n        const parts = file.name.split(\"/\");\r\n        let current = tree;\r\n        for (let i = 0; i < parts.length; i++) {\r\n            const part = parts[i];\r\n            const isLastPart = i === parts.length - 1;\r\n            const index = current.findIndex(f => f.name === part);\r\n            if (index === -1) {\r\n                const sub = {\r\n                    name: part,\r\n                    children: [],\r\n                    codeFile: undefined,\r\n                };\r\n                if (isLastPart) {\r\n                    sub.codeFile = file;\r\n                }\r\n                current.push(sub);\r\n                current = sub.children;\r\n            }\r\n            else {\r\n                current = current[index].children;\r\n            }\r\n        }\r\n    }\r\n    tree = sortTree(tree);\r\n    return tree;\r\n}\r\nfunction sortTree(tree) {\r\n    for (const child of tree) {\r\n        child.children = sortTree(child.children);\r\n    }\r\n    return tree.sort((a, b) => {\r\n        const aIsFolder = a.children && a.children.length > 0;\r\n        const bIsFolder = b.children && b.children.length > 0;\r\n        if ((aIsFolder && bIsFolder) ||\r\n            (!aIsFolder && !bIsFolder)) {\r\n            return a.name.localeCompare(b.name);\r\n        }\r\n        if (aIsFolder) {\r\n            return -1;\r\n        }\r\n        return 1;\r\n    });\r\n}\n\nfunction ExpandButton({ style, step, className, }) {\r\n    const [expanded, setExpanded] = React.useState(false);\r\n    const [dialogSupported, setDialogSupported] = React.useState(true);\r\n    const ref = React.useRef(null);\r\n    const files = step.files;\r\n    // check if <dialog /> is supported\r\n    React.useEffect(() => {\r\n        if (ref.current && !ref.current.showModal) {\r\n            setDialogSupported(false);\r\n        }\r\n    }, []);\r\n    if (!dialogSupported) {\r\n        return null;\r\n    }\r\n    return (React.createElement(React.Fragment, null,\r\n        React.createElement(ExpandIcon, { className: className, style: style, onClick: () => {\r\n                ref.current.showModal();\r\n                document.body.classList.add(\"ch-no-scroll\");\r\n                setExpanded(true);\r\n            } }),\r\n        React.createElement(\"dialog\", { ref: ref, className: \"ch-expand-dialog\", onClose: () => {\r\n                setExpanded(false);\r\n            }, onClick: e => {\r\n                if (e.currentTarget === e.target) {\r\n                    ref.current.close();\r\n                    document.body.classList.remove(\"ch-no-scroll\");\r\n                }\r\n            } },\r\n            React.createElement(CloseButton, { onClick: () => {\r\n                    ref.current.close();\r\n                    document.body.classList.remove(\"ch-no-scroll\");\r\n                } }),\r\n            expanded ? (React.createElement(\"div\", { className: \"ch-expand-dialog-content\" },\r\n                React.createElement(CodeBrowser, { files: files, startingFileName: step.northPanel.active }))) : undefined)));\r\n}\r\nfunction ExpandIcon({ onClick, style, className, }) {\r\n    return (React.createElement(\"button\", { type: \"button\", title: \"Expand\", style: style, onClick: onClick, className: className },\r\n        React.createElement(\"svg\", { fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\" },\r\n            React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4\" }))));\r\n}\r\nfunction CloseButton({ onClick }) {\r\n    return (React.createElement(\"button\", { onClick: onClick, className: \"ch-expand-close\", type: \"button\", title: \"Close\" },\r\n        React.createElement(\"svg\", { fill: \"none\", stroke: \"currentColor\", viewBox: \"0 0 24 24\", xmlns: \"http://www.w3.org/2000/svg\" },\r\n            React.createElement(\"path\", { strokeLinecap: \"round\", strokeLinejoin: \"round\", strokeWidth: 2, d: \"M6 18L18 6M6 6l12 12\" }))));\r\n}\n\nconst DEFAULT_STEP = {\r\n    files: [\r\n        {\r\n            code: { lines: [], lang: \"js\" },\r\n            focus: \"\",\r\n            name: \"\",\r\n        },\r\n    ],\r\n    northPanel: { active: \"\", tabs: [\"\"], heightRatio: 1 },\r\n};\r\nfunction EditorTween(_a) {\r\n    var { prev = DEFAULT_STEP, next, t, backward, codeConfig, frameProps = {} } = _a, divProps = __rest(_a, [\"prev\", \"next\", \"t\", \"backward\", \"codeConfig\", \"frameProps\"]);\r\n    const ref = React.createRef();\r\n    const { showCopyButton, showExpandButton } = codeConfig, config = __rest(codeConfig, [\"showCopyButton\", \"showExpandButton\"]);\r\n    const { northPanel, southPanel, northContent, southContent, } = useTransition(ref, prev, next || prev, t, backward, config);\r\n    const [frozenHeight, freezeHeight] = React.useState(undefined);\r\n    useLayoutEffect$4(() => {\r\n        var _a;\r\n        const height = (_a = ref.current) === null || _a === void 0 ? void 0 : _a.getBoundingClientRect().height;\r\n        freezeHeight(height);\r\n    }, []);\r\n    const framePropsWithHeight = Object.assign(Object.assign(Object.assign({}, frameProps), divProps), { style: Object.assign(Object.assign({}, frameProps === null || frameProps === void 0 ? void 0 : frameProps.style), divProps === null || divProps === void 0 ? void 0 : divProps.style) });\r\n    if (frozenHeight) {\r\n        framePropsWithHeight.style.height = frozenHeight;\r\n        framePropsWithHeight.style.maxHeight = frozenHeight;\r\n    }\r\n    const northButtons = (React.createElement(React.Fragment, null,\r\n        showCopyButton ? (React.createElement(CopyButton, { className: \"ch-editor-button\", content: northContent })) : undefined,\r\n        showExpandButton ? (React.createElement(ExpandButton, { className: \"ch-editor-button\", step: next || prev })) : undefined));\r\n    const southCopyButton = showCopyButton ? (React.createElement(CopyButton, { className: \"ch-editor-button\", content: southContent })) : undefined;\r\n    const terminalPanel = (React.createElement(TerminalPanel, { prev: prev.terminal, next: (next || prev).terminal, t: t, backward: backward }));\r\n    return (React.createElement(EditorFrame, Object.assign({ ref: ref }, framePropsWithHeight, { northPanel: northPanel, southPanel: southPanel, terminalPanel: terminalPanel, northButton: northButtons, southButton: southCopyButton })));\r\n}\n\nconst defaultSpring = {\r\n    stiffness: 120,\r\n    damping: 24,\r\n    mass: 0.2,\r\n    decimals: 3,\r\n};\r\nfunction EditorSpring(_a) {\r\n    var { northPanel, southPanel, files, terminal, springConfig } = _a, props = __rest(_a, [\"northPanel\", \"southPanel\", \"files\", \"terminal\", \"springConfig\"]);\r\n    const step = React.useMemo(() => {\r\n        return {\r\n            northPanel,\r\n            southPanel,\r\n            files,\r\n            terminal,\r\n        };\r\n    }, [northPanel, southPanel, files, terminal]);\r\n    const { prev, next, t } = useStepSpring(step, springConfig);\r\n    return (React.createElement(EditorTween, Object.assign({ t: t, backward: false, prev: prev, next: next }, props)));\r\n}\r\nfunction useStepSpring(step, springConfig = defaultSpring) {\r\n    const [{ target, steps, index }, setState] = React.useState({\r\n        target: 2,\r\n        steps: [step, step, step],\r\n        index: 0,\r\n    });\r\n    React.useEffect(() => {\r\n        const lastStep = steps[steps.length - 1];\r\n        if (lastStep != step) {\r\n            setState(s => updateStepSpring(s, step, progress));\r\n        }\r\n    }, [step]);\r\n    const [progress] = useSpring(target, springConfig);\r\n    const trioProgress = progress - index;\r\n    const result = trioProgress <= 1\r\n        ? {\r\n            prev: steps[0],\r\n            next: steps[1],\r\n            t: trioProgress,\r\n        }\r\n        : {\r\n            prev: steps[1],\r\n            next: steps[2],\r\n            t: trioProgress - 1,\r\n        };\r\n    return result;\r\n}\r\nfunction updateStepSpring(state, newStep, progress) {\r\n    const { steps, target, index } = state;\r\n    const stepsClone = steps.slice();\r\n    const trioProgress = progress - index;\r\n    if (trioProgress < 1) {\r\n        stepsClone[2] = newStep;\r\n        return Object.assign(Object.assign({}, state), { steps: stepsClone });\r\n    }\r\n    else {\r\n        stepsClone[0] = steps[1];\r\n        stepsClone[1] = steps[2];\r\n        stepsClone[2] = newStep;\r\n        return Object.assign(Object.assign({}, state), { steps: stepsClone, target: target + 1, index: index + 1 });\r\n    }\r\n}\n\nfunction Code(props) {\r\n    const [step, setStep] = React.useState(props);\r\n    function onTabClick(filename) {\r\n        const newStep = updateEditorStep(step, filename, null);\r\n        setStep(Object.assign(Object.assign({}, step), newStep));\r\n    }\r\n    return React.createElement(InnerCode, Object.assign({}, step, { onTabClick: onTabClick }));\r\n}\r\n// build the CodeConfig from props and props.codeConfig\r\nfunction mergeCodeConfig(props) {\r\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\r\n    const { lineNumbers, showCopyButton, showExpandButton, minZoom, maxZoom } = props, rest = __rest(props, [\"lineNumbers\", \"showCopyButton\", \"showExpandButton\", \"minZoom\", \"maxZoom\"]);\r\n    const codeConfig = Object.assign(Object.assign({}, props.codeConfig), { maxZoom: maxZoom == null ? (_a = props.codeConfig) === null || _a === void 0 ? void 0 : _a.maxZoom : maxZoom, minZoom: minZoom == null ? (_b = props.codeConfig) === null || _b === void 0 ? void 0 : _b.minZoom : minZoom, horizontalCenter: (_d = (_c = props.codeConfig) === null || _c === void 0 ? void 0 : _c.horizontalCenter) !== null && _d !== void 0 ? _d : props.horizontalCenter, lineNumbers: lineNumbers == null\r\n            ? (_e = props.codeConfig) === null || _e === void 0 ? void 0 : _e.lineNumbers\r\n            : lineNumbers, showCopyButton: showCopyButton == null\r\n            ? (_f = props.codeConfig) === null || _f === void 0 ? void 0 : _f.showCopyButton\r\n            : showCopyButton, showExpandButton: showExpandButton == null\r\n            ? (_g = props.codeConfig) === null || _g === void 0 ? void 0 : _g.showExpandButton\r\n            : showExpandButton, rows: props.rows, debug: (_h = props.debug) !== null && _h !== void 0 ? _h : (_j = props.codeConfig) === null || _j === void 0 ? void 0 : _j.debug });\r\n    return Object.assign(Object.assign({}, rest), { codeConfig });\r\n}\r\nfunction InnerCode(_a) {\r\n    var _b, _c;\r\n    var { onTabClick } = _a, props = __rest(_a, [\"onTabClick\"]);\r\n    const _d = mergeCodeConfig(props), { className, style, codeConfig } = _d, editorProps = __rest(_d, [\"className\", \"style\", \"codeConfig\"]);\r\n    if (!props.southPanel &&\r\n        props.files.length === 1 &&\r\n        !props.files[0].name) {\r\n        return (React.createElement(\"div\", { className: `ch-codeblock not-prose ${className || \"\"}`, \"data-ch-theme\": (_b = props.codeConfig) === null || _b === void 0 ? void 0 : _b.themeName, style: style },\r\n            React.createElement(CodeSpring, { className: \"ch-code\", config: codeConfig, step: editorProps.files[0] })));\r\n    }\r\n    else {\r\n        const frameProps = Object.assign(Object.assign({}, editorProps === null || editorProps === void 0 ? void 0 : editorProps.frameProps), { onTabClick });\r\n        return (React.createElement(\"div\", { className: `ch-codegroup not-prose ${className || \"\"}`, \"data-ch-theme\": (_c = props.codeConfig) === null || _c === void 0 ? void 0 : _c.themeName, style: style },\r\n            React.createElement(EditorSpring, Object.assign({}, editorProps, { frameProps: frameProps, codeConfig: codeConfig }))));\r\n    }\r\n}\r\nfunction updateEditorStep(step, filename, focus) {\r\n    const name = filename || step.northPanel.active;\r\n    const newFiles = step.files.map((file) => file.name === name\r\n        ? Object.assign(Object.assign({}, file), { focus: focus === null ? file.focus : focus }) : file);\r\n    let northPanel = Object.assign({}, step.northPanel);\r\n    let southPanel = step.southPanel && Object.assign({}, step.southPanel);\r\n    if (step.northPanel.tabs.includes(name)) {\r\n        northPanel.active = name;\r\n    }\r\n    else if (southPanel) {\r\n        southPanel.active = name;\r\n    }\r\n    return { files: newFiles, northPanel, southPanel };\r\n}\n\nconst SectionContext = React.createContext({\r\n    props: null,\r\n    setFocus: () => { },\r\n});\r\nfunction Section(_a) {\r\n    var { children, className, style } = _a, props = __rest(_a, [\"children\", \"className\", \"style\"]);\r\n    const [state, setState] = React.useState(props);\r\n    const resetFocus = () => setState(props);\r\n    const setFocus = ({ fileName, focus, id, }) => {\r\n        const newStep = updateEditorStep(state, fileName, focus);\r\n        setState(Object.assign(Object.assign(Object.assign({}, state), newStep), { selectedId: id }));\r\n    };\r\n    const rest = __rest(state, [\"selectedId\"]);\r\n    return (React.createElement(\"section\", { className: `ch-section ${className || \"\"}`, style: style },\r\n        React.createElement(SectionContext.Provider, { value: {\r\n                props: rest,\r\n                setFocus,\r\n            } },\r\n            React.createElement(LinkableSection, { onActivation: setFocus, onReset: resetFocus }, children))));\r\n}\r\nfunction SectionCode(innerProps) {\r\n    const { props, setFocus } = React.useContext(SectionContext);\r\n    const onTabClick = (filename) => {\r\n        setFocus({ fileName: filename, focus: null, id: \"\" });\r\n    };\r\n    return (React.createElement(InnerCode, Object.assign({}, innerProps, props, { onTabClick: onTabClick })));\r\n}\r\n// ---\r\nfunction SectionLink({ focus, file, children, id, }) {\r\n    const { activate, reset, activatedId } = React.useContext(LinkableContext);\r\n    const isSelected = activatedId === id;\r\n    // const handleClick = isSelected\r\n    //   ? resetFocus\r\n    //   : () => setFocus({ fileName: file, focus, id })\r\n    return (React.createElement(\"span\", { className: \"ch-section-link\", \"data-active\": isSelected, \r\n        // onClick={handleClick}\r\n        children: children, onMouseOver: () => activate({ fileName: file, focus, id }), onMouseOut: reset }));\r\n}\r\nconst LinkableContext = React.createContext({\r\n    activatedId: undefined,\r\n    activate: () => { },\r\n    reset: () => { },\r\n});\r\nfunction LinkableSection({ onActivation, onReset, children, }) {\r\n    const [activatedId, setActivatedId] = React.useState(undefined);\r\n    const activate = React.useCallback(x => {\r\n        setActivatedId(x.id);\r\n        onActivation(x);\r\n    }, [onActivation]);\r\n    const reset = React.useCallback(() => {\r\n        setActivatedId(undefined);\r\n        onReset();\r\n    }, [onReset]);\r\n    return (React.createElement(LinkableContext.Provider, { value: {\r\n            activate,\r\n            reset,\r\n            activatedId,\r\n        } }, children));\r\n}\n\nfunction Back() {\r\n    return (React.createElement(\"svg\", { fill: \"currentColor\", preserveAspectRatio: \"xMidYMid meet\", height: \"1em\", viewBox: \"13 10 14 23\", className: \"ch-browser-button ch-browser-back-button\" },\r\n        React.createElement(\"g\", null,\r\n            React.createElement(\"path\", { d: \"m26.5 12.1q0 0.3-0.2 0.6l-8.8 8.7 8.8 8.8q0.2 0.2 0.2 0.5t-0.2 0.5l-1.1 1.1q-0.3 0.3-0.6 0.3t-0.5-0.3l-10.4-10.4q-0.2-0.2-0.2-0.5t0.2-0.5l10.4-10.4q0.3-0.2 0.5-0.2t0.6 0.2l1.1 1.1q0.2 0.2 0.2 0.5z\" }))));\r\n}\r\nfunction Forward() {\r\n    return (React.createElement(\"svg\", { fill: \"currentColor\", preserveAspectRatio: \"xMidYMid meet\", height: \"1em\", viewBox: \"13 10 14 23\", className: \"ch-browser-button ch-browser-forward-button\" },\r\n        React.createElement(\"g\", null,\r\n            React.createElement(\"path\", { d: \"m26.3 21.4q0 0.3-0.2 0.5l-10.4 10.4q-0.3 0.3-0.6 0.3t-0.5-0.3l-1.1-1.1q-0.2-0.2-0.2-0.5t0.2-0.5l8.8-8.8-8.8-8.7q-0.2-0.3-0.2-0.6t0.2-0.5l1.1-1.1q0.3-0.2 0.5-0.2t0.6 0.2l10.4 10.4q0.2 0.2 0.2 0.5z\" }))));\r\n}\r\nfunction Open({ href }) {\r\n    return (React.createElement(\"a\", { className: \"ch-browser-button ch-browser-open-button\", title: \"Open in new tab\", href: href, target: \"_blank\", rel: \"noopener noreferrer\" },\r\n        React.createElement(\"svg\", { stroke: \"currentColor\", fill: \"currentColor\", strokeWidth: \"0\", viewBox: \"3 3 18 18\", height: \"1em\", width: \"1em\", className: \"ch-browser-open-icon\", xmlns: \"http://www.w3.org/2000/svg\" },\r\n            React.createElement(\"path\", { d: \"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z\" }))));\r\n}\n\nfunction TitleBar({ url, linkUrl, }) {\r\n    return (React.createElement(React.Fragment, null,\r\n        React.createElement(FrameButtons, null),\r\n        React.createElement(Back, null),\r\n        React.createElement(Forward, null),\r\n        React.createElement(\"input\", { value: url || \"\", readOnly: true }),\r\n        React.createElement(Open, { href: linkUrl })));\r\n}\n\nfunction useSteps$1(steps) {\r\n    return React.useMemo(() => {\r\n        if (!steps) {\r\n            return [{ zoom: 1 }];\r\n        }\r\n        return steps.map(step => {\r\n            const { displayUrl, loadUrl } = transformUrl(step.url, step.loadUrl, step.prependOrigin);\r\n            return {\r\n                zoom: step.zoom || 1,\r\n                displayUrl,\r\n                loadUrl,\r\n                children: step.children,\r\n            };\r\n        });\r\n    }, [steps]);\r\n}\r\nfunction transformUrl(url, loadUrl, prependOrigin) {\r\n    const currentOrigin = typeof window !== \"undefined\" ? window.origin : \"\";\r\n    const displayUrl = url && prependOrigin === true\r\n        ? currentOrigin + url\r\n        : url;\r\n    return { displayUrl, loadUrl: loadUrl || displayUrl };\r\n}\n\nconst MiniBrowserHike = React.forwardRef(MiniBrowserWithRef);\r\nfunction MiniBrowserWithRef(_a, ref) {\r\n    var { progress = 0, backward = false, steps: ogSteps, transition = \"none\" } = _a, props = __rest(_a, [\"progress\", \"backward\", \"steps\", \"transition\"]);\r\n    const steps = useSteps$1(ogSteps);\r\n    const stepIndex = Math.round(progress);\r\n    const { zoom, displayUrl, loadUrl, children } = steps[stepIndex];\r\n    return (React.createElement(MiniFrame, Object.assign({}, props, { zoom: zoom, className: `ch-mini-browser ${props.className || \"\"}`, style: Object.assign(Object.assign({}, transitionStyle({ progress, transition })), props.style), titleBar: React.createElement(TitleBar, { url: displayUrl, linkUrl: loadUrl }) }), children || React.createElement(\"iframe\", { ref: ref, src: loadUrl })));\r\n}\r\nfunction transitionStyle({ progress, transition, }) {\r\n    if (transition === \"slide\") {\r\n        const X = 50;\r\n        const t = progress - Math.floor(progress);\r\n        const x = t <= 0.5 ? -X * t : X - X * t;\r\n        const o = Math.abs(t - 0.5) * 2;\r\n        return {\r\n            transform: `translateX(${x}px)`,\r\n            opacity: o * o,\r\n        };\r\n    }\r\n    return {};\r\n}\n\nfunction MiniBrowser(_a) {\r\n    var { url, loadUrl, prependOrigin, children, zoom } = _a, rest = __rest(_a, [\"url\", \"loadUrl\", \"prependOrigin\", \"children\", \"zoom\"]);\r\n    const [steps, progress] = useSteps({\r\n        url,\r\n        loadUrl,\r\n        prependOrigin,\r\n        children,\r\n        zoom,\r\n    });\r\n    return (React.createElement(MiniBrowserHike, Object.assign({}, rest, { steps: steps, progress: progress })));\r\n}\r\nfunction useSteps({ url, loadUrl, prependOrigin, children, zoom, }) {\r\n    const [state, setState] = React.useState({\r\n        target: 0,\r\n        steps: [\r\n            { url, loadUrl, prependOrigin, children, zoom },\r\n        ],\r\n    });\r\n    React.useEffect(() => {\r\n        const last = state.steps[state.steps.length - 1];\r\n        if (last.url !== url ||\r\n            last.loadUrl !== loadUrl ||\r\n            last.prependOrigin !== prependOrigin ||\r\n            last.children !== children) {\r\n            setState(s => ({\r\n                target: s.target + 1,\r\n                steps: [\r\n                    ...s.steps,\r\n                    { url, loadUrl, prependOrigin, children, zoom },\r\n                ],\r\n            }));\r\n        }\r\n    }, [url, loadUrl, prependOrigin, children, zoom]);\r\n    const [progress] = useSpring(state.target, {\r\n        stiffness: 100,\r\n        decimals: 3,\r\n    });\r\n    return [state.steps, progress];\r\n}\n\nvar commonjsGlobal = typeof globalThis !== 'undefined' ? globalThis : typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\nvar templates = {};\n\nObject.defineProperty(templates, \"__esModule\", { value: true });\nfunction getMainFile(template) {\n    if (template === \"vue-cli\") {\n        return \"src/main.js\";\n    }\n    if (template === \"angular-cli\") {\n        return \"src/main.ts\";\n    }\n    if (template === \"create-react-app-typescript\") {\n        return \"src/index.tsx\";\n    }\n    if (template === \"parcel\") {\n        return \"index.html\";\n    }\n    if (template === \"gatsby\") {\n        return \"src/pages/index.js\";\n    }\n    if (template === \"nuxt\") {\n        // Wildcard, because nuxt is not specific on this\n        return \"package.json\";\n    }\n    if (template === \"next\") {\n        // Wildcard, because next is not specific on this\n        return \"package.json\";\n    }\n    if (template === \"apollo\") {\n        // Wildcard, because apollo is not specific on this\n        return \"package.json\";\n    }\n    if (template === \"reason\") {\n        // Wildcard, because reason is not specific on this\n        return \"package.json\";\n    }\n    if (template === \"sapper\") {\n        // Wildcard, because sapper is not specific on this\n        return \"package.json\";\n    }\n    if (template === \"nest\") {\n        return \"src/main.ts\";\n    }\n    if (template === \"static\") {\n        return \"index.html\";\n    }\n    return \"src/index.js\";\n}\ntemplates.getMainFile = getMainFile;\nvar SANDBOX_CONFIG = \"sandbox.config.json\";\nfunction getTemplate(packageJSONPackage, modules) {\n    var sandboxConfig = modules[SANDBOX_CONFIG] || modules[\"/\" + SANDBOX_CONFIG];\n    if (sandboxConfig) {\n        try {\n            var config = JSON.parse(sandboxConfig.content);\n            if (config.template) {\n                return config.template;\n            }\n        }\n        catch (e) { }\n    }\n    var _a = packageJSONPackage.dependencies, dependencies = _a === void 0 ? {} : _a, _b = packageJSONPackage.devDependencies, devDependencies = _b === void 0 ? {} : _b;\n    var totalDependencies = Object.keys(dependencies).concat(Object.keys(devDependencies));\n    var nuxt = [\"nuxt\", \"nuxt-edge\"];\n    if (totalDependencies.some(function (dep) { return nuxt.indexOf(dep) > -1; })) {\n        return \"nuxt\";\n    }\n    if (totalDependencies.indexOf(\"next\") > -1) {\n        return \"next\";\n    }\n    var apollo = [\n        \"apollo-server\",\n        \"apollo-server-express\",\n        \"apollo-server-hapi\",\n        \"apollo-server-koa\",\n        \"apollo-server-lambda\",\n        \"apollo-server-micro\"\n    ];\n    if (totalDependencies.some(function (dep) { return apollo.indexOf(dep) > -1; })) {\n        return \"apollo\";\n    }\n    if (totalDependencies.indexOf(\"ember-cli\") > -1) {\n        return \"ember\";\n    }\n    if (totalDependencies.indexOf(\"sapper\") > -1) {\n        return \"sapper\";\n    }\n    var moduleNames = Object.keys(modules);\n    if (moduleNames.some(function (m) { return m.endsWith(\".vue\"); })) {\n        return \"vue-cli\";\n    }\n    if (moduleNames.some(function (m) { return m.endsWith(\".re\"); })) {\n        return \"reason\";\n    }\n    if (totalDependencies.indexOf(\"gatsby\") > -1) {\n        return \"gatsby\";\n    }\n    if (totalDependencies.indexOf(\"parcel-bundler\") > -1) {\n        return \"parcel\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts\") > -1) {\n        return \"create-react-app\";\n    }\n    if (totalDependencies.indexOf(\"react-scripts-ts\") > -1) {\n        return \"create-react-app-typescript\";\n    }\n    if (totalDependencies.indexOf(\"@angular/core\") > -1) {\n        return \"angular-cli\";\n    }\n    if (totalDependencies.indexOf(\"preact-cli\") > -1) {\n        return \"preact-cli\";\n    }\n    if (totalDependencies.indexOf(\"svelte\") > -1) {\n        return \"svelte\";\n    }\n    if (totalDependencies.indexOf(\"vue\") > -1) {\n        return \"vue-cli\";\n    }\n    var dojo = [\"@dojo/core\", \"@dojo/framework\"];\n    if (totalDependencies.some(function (dep) { return dojo.indexOf(dep) > -1; })) {\n        return \"@dojo/cli-create-app\";\n    }\n    if (totalDependencies.indexOf(\"cx\") > -1) {\n        return \"cxjs\";\n    }\n    if (totalDependencies.indexOf(\"@nestjs/core\") > -1 ||\n        totalDependencies.indexOf(\"@nestjs/common\") > -1) {\n        return \"nest\";\n    }\n    return undefined;\n}\nvar getTemplate_1 = templates.getTemplate = getTemplate;\n\nvar lodash_isequal = {exports: {}};\n\n/**\n * Lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright JS Foundation and other contributors <https://js.foundation/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n(function (module, exports) {\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    asyncTag = '[object AsyncFunction]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    nullTag = '[object Null]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    proxyTag = '[object Proxy]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    undefinedTag = '[object Undefined]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof commonjsGlobal == 'object' && commonjsGlobal && commonjsGlobal.Object === Object && commonjsGlobal;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && 'object' == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\n/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice,\n    symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\n/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = isEqual;\n}(lodash_isequal, lodash_isequal.exports));\n\nvar isEqual = lodash_isequal.exports;\n\n// src/client.ts\n\n// src/file-resolver-protocol.ts\nvar generateId = () => Math.floor(Math.random() * 1e6 + Math.random() * 1e6);\nvar getConstructorName = (x) => {\n  try {\n    return x.constructor.name;\n  } catch (e) {\n    return \"\";\n  }\n};\nvar Protocol = class {\n  constructor(type, handleMessage, target) {\n    this.type = type;\n    this.handleMessage = handleMessage;\n    this.target = target;\n    this.outgoingMessages = new Set();\n    this._messageListener = async (e) => {\n      var _a;\n      const { data } = e;\n      if (data.$type !== this.getTypeId()) {\n        return;\n      }\n      if (this.outgoingMessages.has(data.$id)) {\n        return;\n      }\n      let returnMessage = {\n        $originId: this.internalId,\n        $type: this.getTypeId(),\n        $id: data.$id\n      };\n      try {\n        const result = await this.handleMessage(data.$data);\n        returnMessage.$data = result;\n      } catch (err) {\n        if (!err.message) {\n          console.error(err);\n        }\n        returnMessage.$error = { message: (_a = err.message) != null ? _a : \"Unknown error\" };\n      }\n      if (e.source) {\n        e.source.postMessage(returnMessage, \"*\");\n      } else {\n        this._postMessage(returnMessage);\n      }\n    };\n    this.createConnection();\n    this.internalId = generateId();\n    this.isWorker = getConstructorName(target) === \"Worker\";\n  }\n  getTypeId() {\n    return `p-${this.type}`;\n  }\n  createConnection() {\n    self.addEventListener(\"message\", this._messageListener);\n  }\n  dispose() {\n    self.removeEventListener(\"message\", this._messageListener);\n  }\n  sendMessage(data) {\n    return new Promise((resolve) => {\n      const messageId = generateId();\n      const message = {\n        $originId: this.internalId,\n        $type: this.getTypeId(),\n        $data: data,\n        $id: messageId\n      };\n      this.outgoingMessages.add(messageId);\n      const listenFunction = (e) => {\n        const { data: data2 } = e;\n        if (data2.$type === this.getTypeId() && data2.$id === messageId && data2.$originId !== this.internalId) {\n          resolve(data2.$data);\n          self.removeEventListener(\"message\", listenFunction);\n        }\n      };\n      self.addEventListener(\"message\", listenFunction);\n      this._postMessage(message);\n    });\n  }\n  _postMessage(m) {\n    if (this.isWorker || typeof DedicatedWorkerGlobalScope !== \"undefined\" && this.target instanceof DedicatedWorkerGlobalScope) {\n      this.target.postMessage(m);\n    } else {\n      this.target.postMessage(m, \"*\");\n    }\n  }\n};\n\n// src/iframe-protocol.ts\nvar IFrameProtocol = class {\n  constructor(iframe, origin) {\n    this.globalListeners = {};\n    this.globalListenersCount = 0;\n    this.channelListeners = {};\n    this.channelListenersCount = 0;\n    this.channelId = Math.floor(Math.random() * 1e6);\n    this.frameWindow = iframe.contentWindow;\n    this.origin = origin;\n    this.globalListeners = [];\n    this.channelListeners = [];\n    this.eventListener = this.eventListener.bind(this);\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"message\", this.eventListener);\n    }\n  }\n  cleanup() {\n    window.removeEventListener(\"message\", this.eventListener);\n    this.globalListeners = {};\n    this.channelListeners = {};\n    this.globalListenersCount = 0;\n    this.channelListenersCount = 0;\n  }\n  register() {\n    if (!this.frameWindow) {\n      return;\n    }\n    this.frameWindow.postMessage({\n      type: \"register-frame\",\n      origin: document.location.origin,\n      id: this.channelId\n    }, this.origin);\n  }\n  dispatch(message) {\n    if (!this.frameWindow) {\n      return;\n    }\n    this.frameWindow.postMessage({\n      $id: this.channelId,\n      codesandbox: true,\n      ...message\n    }, this.origin);\n  }\n  globalListen(listener) {\n    if (typeof listener !== \"function\") {\n      return () => {\n        return;\n      };\n    }\n    const listenerId = this.globalListenersCount;\n    this.globalListeners[listenerId] = listener;\n    this.globalListenersCount++;\n    return () => {\n      delete this.globalListeners[listenerId];\n    };\n  }\n  channelListen(listener) {\n    if (typeof listener !== \"function\") {\n      return () => {\n        return;\n      };\n    }\n    const listenerId = this.channelListenersCount;\n    this.channelListeners[listenerId] = listener;\n    this.channelListenersCount++;\n    return () => {\n      delete this.channelListeners[listenerId];\n    };\n  }\n  eventListener(evt) {\n    if (evt.source !== this.frameWindow) {\n      return;\n    }\n    const message = evt.data;\n    if (!message.codesandbox) {\n      return;\n    }\n    Object.values(this.globalListeners).forEach((listener) => listener(message));\n    if (message.$id !== this.channelId) {\n      return;\n    }\n    Object.values(this.channelListeners).forEach((listener) => listener(message));\n  }\n};\n\n// src/utils.ts\nfunction createPackageJSON(dependencies = {}, devDependencies = {}, entry = \"/index.js\") {\n  return JSON.stringify({\n    name: \"sandpack-project\",\n    main: entry,\n    dependencies,\n    devDependencies\n  }, null, 2);\n}\nfunction addPackageJSONIfNeeded(files, dependencies, devDependencies, entry) {\n  const newFiles = { ...files };\n  if (!newFiles[\"/package.json\"]) {\n    if (!dependencies) {\n      throw new Error(\"No dependencies specified, please specify either a package.json or dependencies.\");\n    }\n    if (!entry) {\n      throw new Error(\"Missing 'entry' parameter. Either specify an entry point, or pass in a package.json with the 'main' field set.\");\n    }\n    newFiles[\"/package.json\"] = {\n      code: createPackageJSON(dependencies, devDependencies, entry)\n    };\n  }\n  return newFiles;\n}\nfunction extractErrorDetails(msg) {\n  if (msg.title === \"SyntaxError\") {\n    const { title, path, message, line, column } = msg;\n    return { title, path, message, line, column };\n  }\n  const relevantStackFrame = getRelevantStackFrame(msg.payload.frames);\n  if (!relevantStackFrame) {\n    return { message: msg.message };\n  }\n  const errorInCode = getErrorInOriginalCode(relevantStackFrame);\n  const errorLocation = getErrorLocation(relevantStackFrame);\n  const errorMessage = formatErrorMessage(relevantStackFrame._originalFileName, msg.message, errorLocation, errorInCode);\n  return {\n    message: errorMessage,\n    title: msg.title,\n    path: relevantStackFrame._originalFileName,\n    line: relevantStackFrame._originalLineNumber,\n    column: relevantStackFrame._originalColumnNumber\n  };\n}\nfunction getRelevantStackFrame(frames) {\n  if (!frames) {\n    return;\n  }\n  return frames.find((frame) => !!frame._originalFileName);\n}\nfunction getErrorLocation(errorFrame) {\n  return errorFrame ? ` (${errorFrame._originalLineNumber}:${errorFrame._originalColumnNumber})` : ``;\n}\nfunction getErrorInOriginalCode(errorFrame) {\n  const lastScriptLine = errorFrame._originalScriptCode[errorFrame._originalScriptCode.length - 1];\n  const numberOfLineNumberCharacters = lastScriptLine.lineNumber.toString().length;\n  const leadingCharacterOffset = 2;\n  const barSeparatorCharacterOffset = 3;\n  const extraLineLeadingSpaces = leadingCharacterOffset + numberOfLineNumberCharacters + barSeparatorCharacterOffset + errorFrame._originalColumnNumber;\n  return errorFrame._originalScriptCode.reduce((result, scriptLine) => {\n    const leadingChar = scriptLine.highlight ? \">\" : \" \";\n    const lineNumber = scriptLine.lineNumber.toString().length === numberOfLineNumberCharacters ? `${scriptLine.lineNumber}` : ` ${scriptLine.lineNumber}`;\n    const extraLine = scriptLine.highlight ? \"\\n\" + \" \".repeat(extraLineLeadingSpaces) + \"^\" : \"\";\n    return result + \"\\n\" + leadingChar + \" \" + lineNumber + \" | \" + scriptLine.content + extraLine;\n  }, \"\");\n}\nfunction formatErrorMessage(filePath, message, location, errorInCode) {\n  return `${filePath}: ${message}${location}\n${errorInCode}`;\n}\n\n// src/client.ts\nvar BUNDLER_URL = `https://${\"0.19.0\".replace(/\\./g, \"-\")}-sandpack.codesandbox.io/`;\nvar SandpackClient = class {\n  constructor(selector, sandboxInfo, options = {}) {\n    this.getTranspilerContext = () => new Promise((resolve) => {\n      const unsubscribe = this.listen((message) => {\n        if (message.type === \"transpiler-context\") {\n          resolve(message.data);\n          unsubscribe();\n        }\n      });\n      this.dispatch({ type: \"get-transpiler-context\" });\n    });\n    var _a;\n    this.options = options;\n    this.sandboxInfo = sandboxInfo;\n    this.bundlerURL = options.bundlerURL || BUNDLER_URL;\n    this.bundlerState = void 0;\n    this.errors = [];\n    this.status = \"initializing\";\n    if (typeof selector === \"string\") {\n      this.selector = selector;\n      const element = document.querySelector(selector);\n      if (!element) {\n        throw new Error(`No element found for selector '${selector}'`);\n      }\n      this.element = element;\n      this.iframe = document.createElement(\"iframe\");\n      this.initializeElement();\n    } else {\n      this.element = selector;\n      this.iframe = selector;\n    }\n    if (!this.iframe.getAttribute(\"sandbox\")) {\n      this.iframe.setAttribute(\"sandbox\", \"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\");\n    }\n    const urlSource = options.startRoute ? new URL(options.startRoute, this.bundlerURL).toString() : this.bundlerURL;\n    (_a = this.iframe.contentWindow) == null ? void 0 : _a.location.replace(urlSource);\n    this.iframeProtocol = new IFrameProtocol(this.iframe, this.bundlerURL);\n    this.unsubscribeGlobalListener = this.iframeProtocol.globalListen((mes) => {\n      if (mes.type !== \"initialized\" || !this.iframe.contentWindow) {\n        return;\n      }\n      this.iframeProtocol.register();\n      if (this.options.fileResolver) {\n        this.fileResolverProtocol = new Protocol(\"file-resolver\", async (data) => {\n          if (data.m === \"isFile\") {\n            return this.options.fileResolver.isFile(data.p);\n          }\n          return this.options.fileResolver.readFile(data.p);\n        }, this.iframe.contentWindow);\n      }\n      this.updatePreview(this.sandboxInfo, true);\n    });\n    this.unsubscribeChannelListener = this.iframeProtocol.channelListen((mes) => {\n      switch (mes.type) {\n        case \"start\": {\n          this.errors = [];\n          break;\n        }\n        case \"status\": {\n          this.status = mes.status;\n          break;\n        }\n        case \"action\": {\n          if (mes.action === \"show-error\") {\n            this.errors = [...this.errors, extractErrorDetails(mes)];\n          }\n          break;\n        }\n        case \"state\": {\n          this.bundlerState = mes.state;\n          break;\n        }\n      }\n    });\n  }\n  cleanup() {\n    this.unsubscribeChannelListener();\n    this.unsubscribeGlobalListener();\n    this.iframeProtocol.cleanup();\n  }\n  updateOptions(options) {\n    if (!isEqual(this.options, options)) {\n      this.options = options;\n      this.updatePreview();\n    }\n  }\n  updatePreview(sandboxInfo = this.sandboxInfo, isInitializationCompile) {\n    var _a, _b, _c, _d;\n    this.sandboxInfo = {\n      ...this.sandboxInfo,\n      ...sandboxInfo\n    };\n    const files = this.getFiles();\n    const modules = Object.keys(files).reduce((prev, next) => ({\n      ...prev,\n      [next]: {\n        code: files[next].code,\n        path: next\n      }\n    }), {});\n    let packageJSON = JSON.parse(createPackageJSON(this.sandboxInfo.dependencies, this.sandboxInfo.devDependencies, this.sandboxInfo.entry));\n    try {\n      packageJSON = JSON.parse(files[\"/package.json\"].code);\n    } catch (e) {\n      console.error(\"Could not parse package.json file: \" + e.message);\n    }\n    const normalizedModules = Object.keys(files).reduce((prev, next) => ({\n      ...prev,\n      [next]: {\n        content: files[next].code,\n        path: next\n      }\n    }), {});\n    this.dispatch({\n      type: \"compile\",\n      codesandbox: true,\n      version: 3,\n      isInitializationCompile,\n      modules,\n      reactDevTools: this.options.reactDevTools,\n      externalResources: this.options.externalResources || [],\n      hasFileResolver: Boolean(this.options.fileResolver),\n      disableDependencyPreprocessing: this.sandboxInfo.disableDependencyPreprocessing,\n      template: this.sandboxInfo.template || getTemplate_1(packageJSON, normalizedModules),\n      showOpenInCodeSandbox: (_a = this.options.showOpenInCodeSandbox) != null ? _a : true,\n      showErrorScreen: (_b = this.options.showErrorScreen) != null ? _b : true,\n      showLoadingScreen: (_c = this.options.showLoadingScreen) != null ? _c : true,\n      skipEval: this.options.skipEval || false,\n      clearConsoleDisabled: !this.options.clearConsoleOnFirstCompile,\n      logLevel: (_d = this.options.logLevel) != null ? _d : SandpackLogLevel.Info\n    });\n  }\n  dispatch(message) {\n    this.iframeProtocol.dispatch(message);\n  }\n  listen(listener) {\n    return this.iframeProtocol.channelListen(listener);\n  }\n  getCodeSandboxURL() {\n    const files = this.getFiles();\n    const paramFiles = Object.keys(files).reduce((prev, next) => ({\n      ...prev,\n      [next.replace(\"/\", \"\")]: {\n        content: files[next].code,\n        isBinary: false\n      }\n    }), {});\n    return fetch(\"https://codesandbox.io/api/v1/sandboxes/define?json=1\", {\n      method: \"POST\",\n      body: JSON.stringify({ files: paramFiles }),\n      headers: {\n        Accept: \"application/json\",\n        \"Content-Type\": \"application/json\"\n      }\n    }).then((x) => x.json()).then((res) => ({\n      sandboxId: res.sandbox_id,\n      editorUrl: `https://codesandbox.io/s/${res.sandbox_id}`,\n      embedUrl: `https://codesandbox.io/embed/${res.sandbox_id}`\n    }));\n  }\n  getFiles() {\n    const { sandboxInfo } = this;\n    if (sandboxInfo.files[\"/package.json\"] === void 0) {\n      return addPackageJSONIfNeeded(sandboxInfo.files, sandboxInfo.dependencies, sandboxInfo.devDependencies, sandboxInfo.entry);\n    }\n    return this.sandboxInfo.files;\n  }\n  initializeElement() {\n    this.iframe.style.border = \"0\";\n    this.iframe.style.width = this.options.width || \"100%\";\n    this.iframe.style.height = this.options.height || \"100%\";\n    this.iframe.style.overflow = \"hidden\";\n    if (!this.element.parentNode) {\n      throw new Error(\"Given element does not have a parent.\");\n    }\n    this.element.parentNode.replaceChild(this.iframe, this.element);\n  }\n};\n\n// src/types.ts\nvar SandpackLogLevel;\n(function(SandpackLogLevel2) {\n  SandpackLogLevel2[SandpackLogLevel2[\"None\"] = 0] = \"None\";\n  SandpackLogLevel2[SandpackLogLevel2[\"Error\"] = 10] = \"Error\";\n  SandpackLogLevel2[SandpackLogLevel2[\"Warning\"] = 20] = \"Warning\";\n  SandpackLogLevel2[SandpackLogLevel2[\"Info\"] = 30] = \"Info\";\n  SandpackLogLevel2[SandpackLogLevel2[\"Debug\"] = 40] = \"Debug\";\n})(SandpackLogLevel || (SandpackLogLevel = {}));\n\nfunction Preview(_a) {\r\n    var { className, files, presetConfig, show, children, style, frameless, codeConfig } = _a, rest = __rest(_a, [\"className\", \"files\", \"presetConfig\", \"show\", \"children\", \"style\", \"frameless\", \"codeConfig\"]);\r\n    const kids = presetConfig ? (React.createElement(SandpackPreview, { files: files, presetConfig: presetConfig })) : (children);\r\n    return (React.createElement(\"div\", { className: \"ch-preview\" + (className ? \" \" + className : \"\"), style: style, \"data-ch-theme\": codeConfig === null || codeConfig === void 0 ? void 0 : codeConfig.themeName }, frameless ? (kids) : (React.createElement(MiniBrowser, Object.assign({ loadUrl: show }, rest, { children: kids })))));\r\n}\r\nfunction SandpackPreview({ files, presetConfig, }) {\r\n    const iframeRef = React.useRef(null);\r\n    const clientRef = React.useRef(null);\r\n    React.useEffect(() => {\r\n        clientRef.current = new SandpackClient(iframeRef.current, Object.assign(Object.assign({}, presetConfig), { files: mergeFiles(presetConfig.files, files) }), {\r\n            showOpenInCodeSandbox: false,\r\n            // showErrorScreen: false,\r\n            // showLoadingScreen: false,\r\n        });\r\n    }, []);\r\n    React.useEffect(() => {\r\n        if (clientRef.current) {\r\n            clientRef.current.updatePreview(Object.assign(Object.assign({}, presetConfig), { files: mergeFiles(presetConfig.files, files) }));\r\n        }\r\n    }, [files]);\r\n    return React.createElement(\"iframe\", { ref: iframeRef });\r\n}\r\nfunction mergeFiles(csbFiles, chFiles) {\r\n    const result = Object.assign({}, csbFiles);\r\n    chFiles.forEach(file => {\r\n        result[\"/\" + file.name] = {\r\n            code: file.code.lines\r\n                .map(l => l.tokens.map(t => t.content).join(\"\"))\r\n                .join(\"\\n\"),\r\n        };\r\n    });\r\n    return result;\r\n}\n\nfunction extractPreviewSteps(children, hasPreviewSteps) {\r\n    const allChildren = React.Children.toArray(children);\r\n    const stepsChildren = hasPreviewSteps\r\n        ? allChildren.slice(0, allChildren.length / 2)\r\n        : allChildren;\r\n    const previewChildren = hasPreviewSteps\r\n        ? allChildren.slice(allChildren.length / 2)\r\n        : undefined;\r\n    return { stepsChildren, previewChildren };\r\n}\n\nfunction Spotlight(_a) {\r\n    var _b;\r\n    var { children, editorSteps, codeConfig, start = 0, presetConfig, className, style, hasPreviewSteps } = _a, rest = __rest(_a, [\"children\", \"editorSteps\", \"codeConfig\", \"start\", \"presetConfig\", \"className\", \"style\", \"hasPreviewSteps\"]);\r\n    const { stepsChildren, previewChildren } = extractPreviewSteps(children, hasPreviewSteps);\r\n    const withPreview = presetConfig || hasPreviewSteps;\r\n    const [state, setState] = React.useState({\r\n        stepIndex: start,\r\n        step: editorSteps[start],\r\n    });\r\n    const tab = state.step;\r\n    function onTabClick(filename) {\r\n        const newStep = updateEditorStep(state.step, filename, null);\r\n        setState(Object.assign(Object.assign({}, state), { step: newStep }));\r\n    }\r\n    const headerElement = stepsChildren[0];\r\n    return (React.createElement(\"section\", { className: `ch-spotlight ${withPreview ? \"ch-spotlight-with-preview\" : \"\"} ${className || \"\"}`, style: style, \"data-ch-theme\": codeConfig.themeName },\r\n        React.createElement(\"div\", { className: \"ch-spotlight-tabs\" },\r\n            ((_b = headerElement === null || headerElement === void 0 ? void 0 : headerElement.props) === null || _b === void 0 ? void 0 : _b.children) ? (React.createElement(\"div\", null, stepsChildren[0])) : null,\r\n            stepsChildren.map((children, i) => i === 0 ? null : (React.createElement(\"div\", { key: i, onClick: () => setState({\r\n                    stepIndex: i,\r\n                    step: editorSteps[i],\r\n                }), className: \"ch-spotlight-tab\", \"data-selected\": i === state.stepIndex ? \"true\" : undefined }, children)))),\r\n        React.createElement(\"div\", { className: \"ch-spotlight-sticker\" },\r\n            React.createElement(InnerCode, Object.assign({}, rest, tab, { codeConfig: codeConfig, onTabClick: onTabClick })),\r\n            presetConfig ? (React.createElement(Preview, { className: \"ch-spotlight-preview\", files: tab.files, presetConfig: presetConfig })) : hasPreviewSteps ? (React.createElement(Preview, Object.assign({ className: \"ch-spotlight-preview\" }, previewChildren[state.stepIndex][\"props\"]))) : null)));\r\n}\n\nfunction debugEntries(entries) {\r\n    entries.forEach(showEntry);\r\n}\r\nfunction showEntry(entry) {\r\n    var _a;\r\n    const rootHeight = ((_a = entry.rootBounds) === null || _a === void 0 ? void 0 : _a.height) || 0;\r\n    addFlashingRect(entry.rootBounds, {\r\n        border: `${Math.min(10, rootHeight / 2)}px solid ${iodOptions.rootColor}`,\r\n        overflow: \"hidden\",\r\n        boxSizing: \"border-box\",\r\n    });\r\n    addFlashingRect(entry.boundingClientRect, {\r\n        border: `${Math.min(10, entry.boundingClientRect.height / 2)}px solid ${entry.isIntersecting\r\n            ? iodOptions.enterColor\r\n            : iodOptions.exitColor}`,\r\n        overflow: \"hidden\",\r\n        boxSizing: \"border-box\",\r\n    });\r\n    addFlashingRect(entry.intersectionRect, {\r\n        backgroundColor: iodOptions.interColor,\r\n        zIndex: 2,\r\n    });\r\n}\r\nfunction addFlashingRect(bounds, style = {}) {\r\n    const { width, left, height, top } = bounds;\r\n    const div = document.createElement(\"div\");\r\n    div.style.position = \"fixed\";\r\n    div.style.width = width + \"px\";\r\n    div.style.left = left + \"px\";\r\n    div.style.top = top + \"px\";\r\n    div.style.height = height + \"px\";\r\n    div.style.pointerEvents = \"none\";\r\n    div.style.transition = \"opacity 2s ease-in\";\r\n    Object.assign(div.style, style);\r\n    requestAnimationFrame(() => requestAnimationFrame(() => {\r\n        div.style.opacity = \"0\";\r\n    }));\r\n    div.addEventListener(\"transitionend\", () => {\r\n        document.body.removeChild(div);\r\n    });\r\n    document.body.appendChild(div);\r\n    return div;\r\n}\r\nconst iodOptions = {\r\n    rootColor: \"#9428AB\",\r\n    enterColor: \"#B35C00\",\r\n    exitColor: \"#035570\",\r\n    interColor: \"#9CAF00BB\",\r\n};\n\nconst useLayoutEffect$1 = typeof window !== \"undefined\"\r\n    ? React.useLayoutEffect\r\n    : React.useEffect;\r\nfunction useWindowHeight() {\r\n    const isClient = typeof window === \"object\";\r\n    function getHeight() {\r\n        return isClient\r\n            ? document.documentElement.clientHeight\r\n            : undefined;\r\n    }\r\n    const [windowHeight, setWindowHeight] = React.useState(getHeight);\r\n    React.useEffect(() => {\r\n        function handleResize() {\r\n            setWindowHeight(getHeight());\r\n        }\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n    useLayoutEffect$1(() => {\r\n        // FIX when a horizontal scrollbar is added after the first layout\r\n        setWindowHeight(getHeight());\r\n    }, []);\r\n    return windowHeight;\r\n}\n\nconst ObserverContext = React.createContext(undefined);\r\nconst useLayoutEffect = typeof window !== \"undefined\"\r\n    ? React.useLayoutEffect\r\n    : React.useEffect;\r\nfunction Scroller({ onStepChange, children, getRootMargin = defaultRootMargin, triggerPosition, debug = false, }) {\r\n    const [observer, setObserver] = React.useState();\r\n    const vh = useWindowHeight();\r\n    useLayoutEffect(() => {\r\n        const windowHeight = vh || 0;\r\n        const handleIntersect = entries => {\r\n            if (debug || window.chDebugScroller) {\r\n                debugEntries(entries);\r\n            }\r\n            entries.forEach(entry => {\r\n                if (entry.intersectionRatio > 0) {\r\n                    const stepElement = entry.target;\r\n                    onStepChange(+stepElement.stepIndex);\r\n                }\r\n            });\r\n        };\r\n        const observer = newIntersectionObserver(handleIntersect, getRootMargin(windowHeight, triggerPosition));\r\n        setObserver(observer);\r\n        return () => observer.disconnect();\r\n    }, [vh]);\r\n    return (React.createElement(ObserverContext.Provider, { value: observer }, children));\r\n}\r\nfunction Step(_a) {\r\n    var { as = \"section\", index } = _a, props = __rest(_a, [\"as\", \"index\"]);\r\n    const ref = React.useRef(null);\r\n    const observer = React.useContext(ObserverContext);\r\n    useLayoutEffect(() => {\r\n        if (observer) {\r\n            observer.observe(ref.current);\r\n        }\r\n        return () => observer && observer.unobserve(ref.current);\r\n    }, [observer]);\r\n    useLayoutEffect(() => {\r\n        const stepElement = ref.current;\r\n        stepElement.stepIndex = index;\r\n    }, [index]);\r\n    return React.createElement(as, Object.assign(Object.assign({}, props), { ref }));\r\n}\r\nfunction newIntersectionObserver(handleIntersect, rootMargin) {\r\n    return new IntersectionObserver(handleIntersect, {\r\n        rootMargin,\r\n        threshold: 0.000001,\r\n        root: null,\r\n    });\r\n}\r\nfunction defaultRootMargin(vh, triggerPosition = \"50%\") {\r\n    let y = vh * 0.5;\r\n    if (triggerPosition.endsWith(\"%\")) {\r\n        const percent = parseFloat(triggerPosition.replace(\"%\", \"\"));\r\n        y = vh * (percent / 100);\r\n    }\r\n    else if (triggerPosition.endsWith(\"px\")) {\r\n        y = parseFloat(triggerPosition.replace(\"px\", \"\"));\r\n    }\r\n    if (y < 0) {\r\n        y = vh + y;\r\n    }\r\n    return `-${y - 2}px 0px -${vh - y - 2}px`;\r\n}\n\n// server-side-media-queries-for-react\r\nlet suffixCounter = 0;\r\n/**\r\n * @typedef SwapProps\r\n * @prop {[string, JSX.Element][]} match\r\n */\r\n/**\r\n * Swap between different components depending on the media queries\r\n * @param {SwapProps} props\r\n */\r\nfunction Swap({ match }) {\r\n    const queries = match.map(([q]) => q);\r\n    const { isServer, matchedIndex } = useMedia(queries);\r\n    const mainClassName = isServer\r\n        ? \"ssmq-\" + suffixCounter++\r\n        : \"\";\r\n    return isServer ? (React.createElement(React.Fragment, null,\r\n        React.createElement(\"style\", { className: mainClassName, dangerouslySetInnerHTML: {\r\n                __html: getStyle(queries, mainClassName),\r\n            } }),\r\n        match.map(([query, element]) => (React.createElement(\"div\", { key: query, className: `${mainClassName} ${getClassName(query)}` }, element))),\r\n        React.createElement(\"script\", { className: mainClassName, dangerouslySetInnerHTML: {\r\n                __html: getScript(match, mainClassName),\r\n            } }))) : (React.createElement(React.Fragment, null,\r\n        React.createElement(\"div\", null, match[matchedIndex][1])));\r\n}\r\nfunction getStyle(queries, mainClass) {\r\n    const reversedQueries = queries.slice().reverse();\r\n    const style = reversedQueries\r\n        .map(query => {\r\n        const currentStyle = `.${mainClass}.${getClassName(query)}{display:block}`;\r\n        const otherStyle = `.${mainClass}:not(.${getClassName(query)}){display: none;}`;\r\n        if (query === \"default\") {\r\n            return `${currentStyle}${otherStyle}`;\r\n        }\r\n        else {\r\n            return `@media ${query}{${currentStyle}${otherStyle}}`;\r\n        }\r\n    })\r\n        .join(\"\\n\");\r\n    return style;\r\n}\r\nfunction getScript(match, mainClass) {\r\n    const queries = match.map(([query]) => query);\r\n    const classes = queries.map(getClassName);\r\n    return `(function() {\n  var qs = ${JSON.stringify(queries)};\n  var clss = ${JSON.stringify(classes)};\n  var mainCls = \"${mainClass}\";\n\n  var scrEls = document.getElementsByTagName(\"script\");\n  var scrEl = scrEls[scrEls.length - 1];\n  var parent = scrEl.parentNode;\n\n  var el = null;\n  for (var i = 0; i < qs.length - 1; i++) {\n    if (window.matchMedia(qs[i]).matches) {\n      el = parent.querySelector(\":scope > .\" + mainCls + \".\" + clss[i]);\n      break;\n    }\n  }\n  if (!el) {\n    var defaultClass = clss.pop();\n    el = parent.querySelector(\":scope > .\" + mainCls + \".\" + defaultClass);\n  }\n  el.removeAttribute(\"class\");\n\n  parent.querySelectorAll(\":scope > .\" + mainCls).forEach(function (e) {\n    parent.removeChild(e);\n  });\n})();`;\r\n}\r\nfunction getClassName(string) {\r\n    return (\"ssmq-\" +\r\n        string\r\n            .replace(/[!\\\"#$%&'\\(\\)\\*\\+,\\.\\/:;<=>\\?\\@\\[\\\\\\]\\^`\\{\\|\\}~\\s]/g, \"\")\r\n            .toLowerCase());\r\n}\r\nfunction useMedia(queries) {\r\n    const isServer = typeof window === \"undefined\";\r\n    const allQueries = queries.slice(0, -1);\r\n    if (queries[queries.length - 1] !== \"default\") {\r\n        console.warn(\"last media query should be 'default'\");\r\n    }\r\n    const [, setValue] = React.useState(0);\r\n    const mediaQueryLists = isServer\r\n        ? []\r\n        : allQueries.map(q => window.matchMedia(q));\r\n    React.useEffect(() => {\r\n        const handler = () => setValue(x => x + 1);\r\n        mediaQueryLists.forEach(mql => mql.addListener(handler));\r\n        return () => mediaQueryLists.forEach(mql => mql.removeListener(handler));\r\n    }, []);\r\n    const matchedIndex = mediaQueryLists.findIndex(mql => mql.matches);\r\n    return {\r\n        isServer,\r\n        matchedIndex: matchedIndex < 0 ? queries.length - 1 : matchedIndex,\r\n    };\r\n}\n\nfunction CodeSlot() {\r\n    const context = React.useContext(StaticStepContext);\r\n    if (!context) {\r\n        return null;\r\n    }\r\n    return React.createElement(InnerCodeSlot, Object.assign({}, context));\r\n}\r\nfunction InnerCodeSlot({ editorStep, setFocus }) {\r\n    const onTabClick = (filename) => {\r\n        setFocus({ fileName: filename, focus: null, id: \"\" });\r\n    };\r\n    const props = __rest(editorStep, [\"preset\", \"presetConfig\"]);\r\n    return React.createElement(InnerCode, Object.assign({}, props, { onTabClick: onTabClick }));\r\n}\r\nfunction PreviewSlot() {\r\n    const context = React.useContext(StaticStepContext);\r\n    if (!context) {\r\n        return null;\r\n    }\r\n    return React.createElement(InnerPreviewSlot, Object.assign({}, context));\r\n}\r\nfunction InnerPreviewSlot({ previewStep, allProps, editorStep, }) {\r\n    const props = __rest(allProps, [\"preset\"]);\r\n    return (React.createElement(Preview, Object.assign({ className: \"ch-scrollycoding-preview\" }, props, previewStep === null || previewStep === void 0 ? void 0 : previewStep.props, { files: editorStep.files })));\r\n}\r\nconst StaticStepContext = React.createContext(null);\n\nfunction Scrollycoding(props) {\r\n    return (React.createElement(Swap, { match: [\r\n            [\r\n                props.codeConfig.staticMediaQuery,\r\n                React.createElement(StaticScrollycoding, Object.assign({}, props)),\r\n            ],\r\n            [\"default\", React.createElement(DynamicScrollycoding, Object.assign({}, props))],\r\n        ] }));\r\n}\r\nfunction StaticScrollycoding(_a) {\r\n    var _b;\r\n    var { children, hasPreviewSteps, editorSteps } = _a, rest = __rest(_a, [\"children\", \"hasPreviewSteps\", \"editorSteps\"]);\r\n    const { stepsChildren, previewChildren } = extractPreviewSteps(children, hasPreviewSteps);\r\n    return (React.createElement(\"section\", { className: \"ch-scrollycoding-static\", \"data-ch-theme\": (_b = rest === null || rest === void 0 ? void 0 : rest.codeConfig) === null || _b === void 0 ? void 0 : _b.themeName }, stepsChildren.map((children, i) => (React.createElement(StaticSection, { key: i, editorStep: editorSteps[i], previewStep: previewChildren && previewChildren[i], allProps: rest }, children)))));\r\n}\r\nfunction StaticSection({ editorStep, previewStep, allProps, children, }) {\r\n    const [step, setStep] = React.useState(Object.assign(Object.assign({}, editorStep), allProps));\r\n    const resetFocus = () => setStep(Object.assign(Object.assign({}, editorStep), allProps));\r\n    const setFocus = ({ fileName, focus, id, }) => {\r\n        const newStep = updateEditorStep(step, fileName, focus);\r\n        setStep(Object.assign(Object.assign(Object.assign({}, step), newStep), { selectedId: id }));\r\n    };\r\n    return (React.createElement(StaticStepContext.Provider, { value: {\r\n            editorStep: step,\r\n            previewStep: previewStep,\r\n            allProps,\r\n            setFocus,\r\n        } },\r\n        React.createElement(LinkableSection, { onActivation: setFocus, onReset: resetFocus }, children)));\r\n}\r\nfunction DynamicScrollycoding(_a) {\r\n    var { children, editorSteps, codeConfig, presetConfig, start = 0, className, style, hasPreviewSteps } = _a, rest = __rest(_a, [\"children\", \"editorSteps\", \"codeConfig\", \"presetConfig\", \"start\", \"className\", \"style\", \"hasPreviewSteps\"]);\r\n    const { stepsChildren, previewChildren } = extractPreviewSteps(children, hasPreviewSteps);\r\n    const withPreview = presetConfig || hasPreviewSteps;\r\n    const [state, setState] = React.useState({\r\n        stepIndex: start,\r\n        step: editorSteps[start],\r\n    });\r\n    const tab = state.step;\r\n    function onStepChange(index) {\r\n        setState({ stepIndex: index, step: editorSteps[index] });\r\n    }\r\n    function onTabClick(filename) {\r\n        const newStep = updateEditorStep(state.step, filename, null);\r\n        setState(Object.assign(Object.assign({}, state), { step: newStep }));\r\n    }\r\n    function onLinkActivation(stepIndex, filename, focus) {\r\n        const newStep = updateEditorStep(editorSteps[stepIndex], filename, focus);\r\n        setState(Object.assign(Object.assign({}, state), { stepIndex, step: newStep }));\r\n    }\r\n    return (React.createElement(\"section\", { className: `ch-scrollycoding ${withPreview ? \"ch-scrollycoding-with-preview\" : \"\"} ${className || \"\"}`, style: style, \"data-ch-theme\": codeConfig === null || codeConfig === void 0 ? void 0 : codeConfig.themeName },\r\n        React.createElement(\"div\", { className: \"ch-scrollycoding-content\" },\r\n            React.createElement(Scroller, { onStepChange: onStepChange, triggerPosition: codeConfig === null || codeConfig === void 0 ? void 0 : codeConfig.triggerPosition }, stepsChildren.map((children, i) => (React.createElement(Step, { as: \"div\", key: i, index: i, onClick: () => onStepChange(i), className: \"ch-scrollycoding-step-content\", \"data-selected\": i === state.stepIndex ? \"true\" : undefined },\r\n                React.createElement(LinkableSection, { onActivation: ({ fileName, focus }) => {\r\n                        onLinkActivation(i, fileName, focus);\r\n                    }, onReset: () => {\r\n                        onStepChange(i);\r\n                    } }, children)))))),\r\n        React.createElement(\"div\", { className: \"ch-scrollycoding-sticker\" },\r\n            React.createElement(InnerCode, Object.assign({ showExpandButton: true }, rest, tab, { codeConfig: codeConfig, onTabClick: onTabClick })),\r\n            presetConfig ? (React.createElement(Preview, { className: \"ch-scrollycoding-preview\", files: tab.files, presetConfig: presetConfig })) : hasPreviewSteps ? (React.createElement(Preview, Object.assign({ className: \"ch-scrollycoding-preview\" }, previewChildren[state.stepIndex][\"props\"]))) : null)));\r\n}\n\nfunction Slideshow(_a) {\r\n    var { children, className, code, codeConfig, editorSteps, autoFocus, hasPreviewSteps, \r\n    // Set the initial slide index\r\n    start = 0, \r\n    // Called when the slideshow state changes and returns the current state object\r\n    onChange: onSlideshowChange = () => { }, presetConfig, style, autoPlay, loop = false } = _a, rest = __rest(_a, [\"children\", \"className\", \"code\", \"codeConfig\", \"editorSteps\", \"autoFocus\", \"hasPreviewSteps\", \"start\", \"onChange\", \"presetConfig\", \"style\", \"autoPlay\", \"loop\"]);\r\n    const { stepsChildren, previewChildren } = extractPreviewSteps(children, hasPreviewSteps);\r\n    const withPreview = presetConfig || hasPreviewSteps;\r\n    const hasNotes = stepsChildren.some((child) => { var _a; return (_a = child.props) === null || _a === void 0 ? void 0 : _a.children; });\r\n    const maxSteps = editorSteps.length - 1;\r\n    const [state, setState] = React.useState(() => {\r\n        const startIndex = clamp$2(start, 0, maxSteps);\r\n        return {\r\n            stepIndex: startIndex,\r\n            step: editorSteps[startIndex],\r\n        };\r\n    });\r\n    const { stepIndex: currentIndex, step: tab } = state;\r\n    const atSlideshowEnd = currentIndex === maxSteps;\r\n    React.useEffect(() => {\r\n        onSlideshowChange({ index: currentIndex });\r\n    }, [currentIndex]);\r\n    function onTabClick(filename) {\r\n        const newStep = updateEditorStep(tab, filename, null);\r\n        setState(Object.assign(Object.assign({}, state), { step: newStep }));\r\n    }\r\n    function setIndex(newIndex) {\r\n        const stepIndex = clamp$2(newIndex, 0, maxSteps);\r\n        setState({ stepIndex, step: editorSteps[stepIndex] });\r\n    }\r\n    function nextSlide() {\r\n        setState(s => {\r\n            const stepIndex = loop\r\n                ? (s.stepIndex + 1) % (maxSteps + 1)\r\n                : clamp$2(s.stepIndex + 1, 0, maxSteps);\r\n            return {\r\n                stepIndex,\r\n                step: editorSteps[stepIndex],\r\n            };\r\n        });\r\n    }\r\n    useInterval(nextSlide, autoPlay);\r\n    return (React.createElement(\"div\", { className: `ch-slideshow ${withPreview ? \"ch-slideshow-with-preview\" : \"\"} ${className || \"\"}`, style: style, \"data-ch-theme\": codeConfig.themeName },\r\n        React.createElement(\"div\", { className: \"ch-slideshow-slide\" },\r\n            React.createElement(InnerCode, Object.assign({}, rest, tab, { codeConfig: Object.assign(Object.assign({}, codeConfig), code), onTabClick: onTabClick })),\r\n            presetConfig ? (React.createElement(Preview, { className: \"ch-slideshow-preview\", files: tab.files, presetConfig: presetConfig })) : hasPreviewSteps ? (React.createElement(Preview, Object.assign({ className: \"ch-slideshow-preview\" }, previewChildren[currentIndex][\"props\"]))) : null),\r\n        React.createElement(\"div\", { className: \"ch-slideshow-notes\" },\r\n            React.createElement(\"div\", { className: \"ch-slideshow-range\" },\r\n                React.createElement(\"button\", { onClick: () => setIndex(currentIndex - 1), disabled: currentIndex === 0 }, \"Prev\"),\r\n                React.createElement(\"input\", { max: maxSteps, min: 0, step: 1, type: \"range\", value: currentIndex, onChange: e => setIndex(+e.target.value), ref: useAutoFocusRef(autoFocus), autoFocus: autoFocus }),\r\n                React.createElement(\"button\", { onClick: nextSlide, disabled: atSlideshowEnd }, \"Next\")),\r\n            hasNotes && (React.createElement(\"div\", { className: \"ch-slideshow-note\" }, stepsChildren[currentIndex])))));\r\n}\r\nfunction useAutoFocusRef(autoFocus) {\r\n    const ref = React.useRef(null);\r\n    React.useEffect(() => {\r\n        autoFocus && ref.current.focus();\r\n    }, []);\r\n    return ref;\r\n}\n\nfunction Annotation() {\r\n    return (React.createElement(\"div\", null, \"\\\"error: code hike remark plugin not running or annotation isn't at the right place\\\"\"));\r\n}\r\nconst annotationsMap = {\r\n    box: Box,\r\n    bg: MultilineMark,\r\n    label: Label,\r\n    link: CodeLink,\r\n    mark: Mark,\r\n    withClass: WithClass,\r\n};\r\nfunction Mark(props) {\r\n    if (props.isInline) {\r\n        return React.createElement(InlineMark, Object.assign({}, props));\r\n    }\r\n    else {\r\n        return React.createElement(MultilineMark, Object.assign({}, props));\r\n    }\r\n}\r\nfunction MultilineMark({ children, data, style, lines, }) {\r\n    const content = getContent(lines);\r\n    const className = `ch-code-multiline-mark ` + (data !== null && data !== void 0 ? data : \"\");\r\n    return (React.createElement(\"div\", { style: style, className: className },\r\n        React.createElement(\"span\", { className: \"ch-code-multiline-mark-border\" }),\r\n        children,\r\n        React.createElement(CopyButton, { className: \"ch-code-button\", content: content })));\r\n}\r\nfunction getContent(lines) {\r\n    return lines\r\n        .map(l => l.annotatedGroups\r\n        .flatMap(ag => {\r\n        var _a;\r\n        return (_a = ag.prev) === null || _a === void 0 ? void 0 : _a.groups.flatMap(tg => tg.tokens.map(t => t.content));\r\n    })\r\n        .join(\"\"))\r\n        .join(\"\\n\");\r\n}\r\nfunction InlineMark({ children, data }) {\r\n    const className = \"ch-code-inline-mark \" + (data !== null && data !== void 0 ? data : \"\");\r\n    return (React.createElement(\"span\", { className: className, style: {\r\n            background: tryGuessColor(children) || undefined,\r\n        } }, children));\r\n}\r\nfunction tryGuessColor(children) {\r\n    var _a, _b, _c;\r\n    try {\r\n        const child = React.Children.toArray(children)[0];\r\n        const grandChild = React.Children.toArray(((_a = child === null || child === void 0 ? void 0 : child.props) === null || _a === void 0 ? void 0 : _a.children) || [])[0];\r\n        const grandGrandChild = React.Children.toArray(((_b = grandChild === null || grandChild === void 0 ? void 0 : grandChild.props) === null || _b === void 0 ? void 0 : _b.children) || [])[0];\r\n        const { color } = ((_c = grandGrandChild === null || grandGrandChild === void 0 ? void 0 : grandGrandChild.props) === null || _c === void 0 ? void 0 : _c.style) || {};\r\n        if (color) {\r\n            return transparent(color, 0.2);\r\n        }\r\n        return undefined;\r\n    }\r\n    catch (e) {\r\n        return undefined;\r\n    }\r\n}\r\nfunction Box({ children, data }) {\r\n    const outlineColor = typeof data === \"string\" ? data : undefined;\r\n    return (React.createElement(\"span\", { className: \"ch-code-box-annotation\", style: { outlineColor } }, children));\r\n}\r\nfunction WithClass({ children, data, style, }) {\r\n    return (React.createElement(\"span\", { style: style, className: data }, children));\r\n}\r\nfunction Label({ children, data, style }) {\r\n    return (React.createElement(\"div\", { className: \"ch-code-label-annotation\", style: style },\r\n        children,\r\n        React.createElement(\"div\", { className: \"ch-code-label-annotation-text\" }, (data === null || data === void 0 ? void 0 : data.children) || data)));\r\n}\r\nfunction CodeLink({ children, isInline, style, data, }) {\r\n    const url = (data === null || data === void 0 ? void 0 : data.url) || data;\r\n    const title = data === null || data === void 0 ? void 0 : data.title;\r\n    return (React.createElement(\"a\", { href: url, title: title, className: isInline ? \"ch-code-inline-link\" : \"ch-code-link\", style: style }, children));\r\n}\n\nfunction InlineCode(_a) {\r\n    var { className, codeConfig, children, code } = _a, rest = __rest(_a, [\"className\", \"codeConfig\", \"children\", \"code\"]);\r\n    const { lines } = code;\r\n    const allTokens = lines.flatMap(line => line.tokens);\r\n    return (React.createElement(\"span\", Object.assign({ \"data-ch-theme\": codeConfig.themeName, className: \"ch-inline-code not-prose\" +\r\n            (className ? \" \" + className : \"\") }, rest),\r\n        React.createElement(\"code\", null, allTokens.map((token, j) => (React.createElement(\"span\", Object.assign({ key: j }, token.props), token.content))))));\r\n}\n\nconst CH = {\r\n    Code,\r\n    Section,\r\n    SectionLink,\r\n    SectionCode,\r\n    Spotlight,\r\n    Scrollycoding,\r\n    Preview,\r\n    annotations: annotationsMap,\r\n    Annotation,\r\n    Slideshow,\r\n    InlineCode,\r\n    CodeSlot,\r\n    PreviewSlot,\r\n};\r\nconst internal = {\r\n    MiniBrowser,\r\n    EditorSpring,\r\n};\n\nexport { Annotation, CH, Code, CodeSlot, InlineCode, Preview, PreviewSlot, Scrollycoding, Section, SectionCode, SectionLink, Slideshow, Spotlight, annotationsMap as annotations, internal };\n"],"names":["__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","propertyIsEnumerable","isValidHex","hex","test","getChunksFromString","st","chunkSize","match","RegExp","convertHexUnitTo256","parseInt","repeat","getAlphaFloat","a","alpha","transparent","color","opacity","r","g","b","Error","Math","floor","hexArr","slice","map","hexToObject","object","round","toString","padStart","objectToHex","tween","fn","prev","next","withDefault","deft","undefined","mapWithDefault","anyValue","codeToText","code","lines","line","tokens","token","content","join","splitParts","focus","split","mergeToObject","entries","reduce","acc","obj","assign","parsePartToObject","part","columnsMatch","columns","columnsList","parseExtremes","Number","expandString","lineNumber","start","end","isNaturalNumber","FocusNumberError","startNumber","LineOrColumnNumberError","parseFocus","pairs","result","index","pair","fromEntries","parsePart","flat","error","c","list","push","n","n1","abs","n2","isNaN","constructor","super","setPrototypeOf","this","number","useLayoutEffect$4","window","DEFAULT_WIDTH","useDimensions","minColumns","lineNumbers","rows","deps","dimensions","setDimensions","visibility","markAsVisible","windowWidth","width","setWidth","handleResize","innerWidth","addEventListener","removeEventListener","useWindowWidth","prevLineRef","prevLongestLine","nextLongestLine","element","getLongestLine","trimEnd","newlineRe","largestLineNumber","max","heightInLines","parsed","focusedIndexes","keys","min","getFocusExtremes","focusHeightInLines","pop","includes","prevLineRefSet","className","ref","key","style","display","marginLeft","allDeps","_a","current","pll","contentElement","parentElement","codeElement","getBoundingClientRect","resizeObserver","ResizeObserver","entry","contentRect","disconnect","observe","lineContentDiv","querySelector","lineNumberSpan","lnw","computedStyle","getComputedStyle","parseFloat","getWidthWithPadding","plw","getWidthWithoutPadding","colWidth","nlw","lineHeight","getHeightWithoutPadding","d","containerWidth","containerHeight","contentWidth","contentHeight","lineWidths","lineWidth","lineNumberWidth","oldDeps","newDeps","depsChanged","focusIndexes","getFocusIndexes","longestLine","forEach","paddingLeft","paddingRight","height","paddingTop","paddingBottom","Diff","buildValues","diff","components","newString","oldString","useLongestToken","componentPos","componentLen","newPos","oldPos","component","removed","value","count","added","tmp","oldValue","lastComponent","equals","options","arguments","callback","self","done","setTimeout","castInput","removeEmpty","tokenize","newLen","oldLen","editLength","maxEditLength","bestPath","extractCommon","execEditLength","diagonalPath","basePath","addPath","removePath","_oldPos","canAdd","canRemove","path","pushComponent","exec","ret","last","commonCount","left","right","comparator","ignoreCase","toLowerCase","array","chars","extendedWordChars","reWhitespace","wordDiff","ignoreWhitespace","splice","lineDiff","_typeof","Symbol","iterator","retLines","linesAndNewlines","newlineIsToken","trim","objectPrototypeToString","jsonDiff","canonicalize","stack","replacementStack","replacer","canonicalizedObj","Array","toJSON","_key","sortedKeys","sort","_this$options","undefinedReplacement","_this$options$stringi","stringifyReplacer","k","v","JSON","stringify","replace","arrayDiff","mergeLines","enterIndex","exitIndex","indexes","changes","oldStr","newStr","prevIndex","nextIndex","change","move","enterCount","exitCount","splitByFocus","mergedCode","annotations","mergedCodeRest","focusByLineNumber","lineIndex","mapFocusToLineNumbers","filter","l","splittedLines","rest","lineFocus","lineAnnotations","focused","groups","getTokenGroups","focusedLineNumbers","firstFocusedLineNumber","lastFocusedLineNumber","focusExtremes","isArray","annotationExtremes","columnNumbers","splittedTokens","extremes","splitIndexes","oldTokens","splitIndex","newTokens","startIndex","endIndex","sliceIndex","content0","content1","splitTokens","currentGroup","newPrevFocus","isIn","newNextFocus","newPrevAnnotation","getAnnotation","newNextAnnotation","annotation","group","getGroupElement","props","intervals","some","find","tween$1","params","fixed","interval","from","to","x","ease","easing","linear","stagger","totalDuration","stepDuration","pow","stepStart","easeInQuad","easeOutQuad","easeInOutCubic","getLinesWithElements","verticalInterval","startY","endY","ln","tweenY","tweenX","parseAnnotations","expandedAnnotations","flatMap","inlineCodeAnnotations","isInline","multilineCodeAnnotations","inlineAnnotations","annotationMap","focusMap","columnNumbersList","data","Component","parseInlineAnnotations","multilineAnnotations","parseMultilineAnnotations","annotateMultilineSide","ogAnnotations","getLineNumber","shift","annotateLineTokenGroups","tokenGroups","prevTokenGroups","nextTokenGroups","prevAnnotations","nextAnnotations","annotatedGroups","prevColumn","nextColumn","prevAnnotation","nextAnnotation","isPrevAnnotationStarting","isNextAnnotationStarting","shiftGroups","MAX_VALUE","startColumn","newStartColumn","removedGroups","currentStartColumn","currentTokenGroup","useStepParser","input","highlightedLines","lang","normalCode","concat","getCode","merge","parseAllAnnotations","focusedCode","splitLinesByFocus","annotatedCode","annotatedLines","annotateInline","lineGroups","annotateMultiline","lineCount","addAnnotations","codeStep","vInterval","newGroups","addExtraStuff","parse$1","SmoothContainer","children","minZoom","maxZoom","center","progress","paramTween","originalContentHeight","horizontalCenter","originalFocusHeight","leftPadding","rightPadding","zoom","focusStart","focusEnd","focusCenter","focusHeight","dy","num","dx","focusWidth","getContentProps","getTweenContentProps","tweenProp","leftPad","startX","Container","Content$1","scale","position","overflow","top","transformOrigin","transform","SmoothLines","Lines","LineGroup","getOpacity","LineContainer","LineContent","annotatedGroup","AnnotatedTokens","_b","annotated","OFF_OPACITY","CopyButton","copied","setCopied","type","title","onClick","text","navigator","clipboard","textArea","document","createElement","body","appendChild","select","execCommand","err","removeChild","fallbackCopyTextToClipboard","writeText","copyToClipboard","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","DEFAULT_MIN_COLUMNS","CodeTween","config","preProps","stepInfo","useCodeShift","parentHeight","debug","BeforeDimensions","htmlProps","AfterDimensions","Wrapper","measured","showCopyButton","currentTime","performance","now","getConfigWithDefaults","target","_ref","stiffness","damping","mass","decimals","teleport","X","m","getInitialState","_ref2","initialSpeed","x0","v0","t0","raf","sqrt","exp","sin","cos","spring","dt","radicand","rp","rn","_r","_a2","_b2","nextFrameQueue","nextFrameId","queueAnimationFrame","requestAnimationFrame","runQueue","unqueueAnimationFrame","frameId","queue","unstable_batchedUpdates","task","useLayoutEffect$3","useSpring","forceUpdate","newConfig","_useSpringInstance","state","useSpringInstance","oldConfig","moving","roundTo","nextT","_spring2","isMoving","loop","defaultSpring$1","CodeSpring","step","springConfig","steps","setState","newStep","stepsClone","trioProgress","updateStepSpring$1","useStepSpring$1","MiniFrame","titleBar","bar","DefaultTitleBar","zoomStyle","FrameButtons","EditorFrame","northPanel","southPanel","terminalPanel","northButton","southButton","onTabClick","TabsContainer","tabs","showFrameButtons","button","panel","topBorder","active","TabTitle","flex","minWidth","separatorIndex","lastIndexOf","filename","substring","folder","prompt","TerminalContent","commands","run","outputLines","output","lastCommand","isRunning","getCommands","parse","InnerTerminalTransition","prevKey","nextKey","InnerTerminalTransitions","textSteps","stepProgress","TerminalPanel","backward","MAX_HEIGHT","getHeight","northConfig","codeConfig","southConfig","useTransition","prevSnapshot","nextSnapshot","useLayoutEffect$2","parent","getPanelSnapshot","getTabsSnapshot","useSnapshots","inputNorthPanel","inputSouthPanel","prevNorthFile","prevSouthFile","nextNorthFile","nextSouthFile","getStepFiles","northContent","getContentFromFile","flexGrow","CodeTransition","prevFile","nextFile","southContent","startingPosition","endingPosition","northStyle","southStyle","southHeight","minHeight","northHeight","northKey","southKey","titleBarHeight","getPanelStyles","northTabs","southTabs","northActive","southActive","isPresent","getPanelTabs","getTabs","name","file","pn","nn","ps","ns","pnFile","files","f","nnFile","psFile","nsFile","otherNextSnapshot","otherPrevSnapshot","oldTabs","totallyNewTabs","snapshot","northElement","southElement","querySelectorAll","getTabsDimensions","tabElements","parentLeft","child","getAttribute","rect","CodeBrowser","startingFileName","activeFile","setActiveFile","Sidebar","Content","tree","parts","isLastPart","findIndex","sub","codeFile","sortTree","toFileTree","SidebarNodes","level","node","SidebarNode","isFolder","isSelected","aIsFolder","bIsFolder","localeCompare","ExpandButton","expanded","setExpanded","dialogSupported","setDialogSupported","showModal","ExpandIcon","classList","add","onClose","currentTarget","close","remove","CloseButton","DEFAULT_STEP","heightRatio","EditorTween","frameProps","divProps","showExpandButton","frozenHeight","freezeHeight","framePropsWithHeight","maxHeight","northButtons","southCopyButton","terminal","defaultSpring","EditorSpring","updateStepSpring","useStepSpring","Code","setStep","InnerCode","updateEditorStep","_c","_d","_e","_f","_g","_h","_j","mergeCodeConfig","editorProps","themeName","newFiles","setFocus","activatedId","activate","reset","Back","preserveAspectRatio","Forward","Open","href","rel","TitleBar","url","linkUrl","readOnly","useSteps$1","displayUrl","loadUrl","prependOrigin","currentOrigin","origin","transformUrl","ogSteps","transition","stepIndex","transitionStyle","src","o","commonjsGlobal","globalThis","global","templates","defineProperty","getMainFile","template","SANDBOX_CONFIG","getTemplate","packageJSONPackage","modules","sandboxConfig","dependencies","devDependencies","totalDependencies","nuxt","dep","apollo","moduleNames","endsWith","dojo","lodash_isequal","exports","module","HASH_UNDEFINED","COMPARE_PARTIAL_FLAG","COMPARE_UNORDERED_FLAG","MAX_SAFE_INTEGER","argsTag","arrayTag","asyncTag","boolTag","dateTag","errorTag","funcTag","genTag","mapTag","numberTag","nullTag","objectTag","promiseTag","proxyTag","regexpTag","setTag","stringTag","symbolTag","undefinedTag","weakMapTag","arrayBufferTag","dataViewTag","reIsHostCtor","reIsUint","typedArrayTags","freeGlobal","freeSelf","root","Function","freeExports","nodeType","freeModule","moduleExports","freeProcess","process","nodeUtil","binding","nodeIsTypedArray","isTypedArray","arraySome","predicate","mapToArray","size","setToArray","set","uid","func","arrayProto","funcProto","objectProto","coreJsData","funcToString","maskSrcKey","IE_PROTO","nativeObjectToString","reIsNative","Buffer","Uint8Array","symToStringTag","toStringTag","nativeGetSymbols","nativeIsBuffer","isBuffer","nativeKeys","arg","DataView","getNative","Map","Promise","Set","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","valueOf","Hash","clear","ListCache","MapCache","SetCache","values","__data__","Stack","arrayLikeKeys","inherited","isArr","isArg","isArguments","isBuff","isType","skipIndexes","iteratee","baseTimes","String","isIndex","assocIndexOf","eq","baseGetTag","isOwn","tag","unmasked","getRawTag","objectToString","baseIsArguments","isObjectLike","baseIsEqual","other","bitmask","customizer","equalFunc","objIsArr","othIsArr","objTag","getTag","othTag","objIsObj","othIsObj","isSameTag","equalArrays","byteLength","byteOffset","buffer","message","convert","isPartial","stacked","get","equalByTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","objProps","getAllKeys","objLength","othProps","othLength","skipCtor","objValue","othValue","compared","objCtor","othCtor","equalObjects","baseIsEqualDeep","baseIsNative","isObject","isMasked","isFunction","baseKeys","Ctor","proto","arrLength","seen","arrValue","othIndex","has","keysFunc","symbolsFunc","offset","arrayPush","baseGetAllKeys","getSymbols","getMapData","getValue","LARGE_ARRAY_SIZE","resIndex","arrayFilter","symbol","ArrayBuffer","resolve","ctorString","isLength","baseUnary","SandpackLogLevel","SandpackLogLevel2","annotationsMap","box","outlineColor","bg","MultilineMark","label","link","mark","InlineMark","withClass","ag","tg","getContent","background","tryGuessColor","toArray","grandChild","grandGrandChild"],"sourceRoot":""}