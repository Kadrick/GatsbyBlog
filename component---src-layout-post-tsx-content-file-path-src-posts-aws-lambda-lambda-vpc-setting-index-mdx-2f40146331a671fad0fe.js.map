{"version":3,"file":"component---src-layout-post-tsx-content-file-path-src-posts-aws-lambda-lambda-vpc-setting-index-mdx-2f40146331a671fad0fe.js","mappings":"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","sources":["webpack://fake-programmer/./src/posts/aws/lambda/lambda-vpc-setting/index.mdx","webpack://fake-programmer/./src/layout/post.tsx"],"sourcesContent":["/*@jsxRuntime classic @jsx React.createElement @jsxFrag React.Fragment*/\nimport {useMDXComponents as _provideComponents} from \"@mdx-js/react\";\nimport React from \"react\";\nfunction _createMdxContent(props) {\n  const _components = Object.assign({\n    h2: \"h2\",\n    p: \"p\",\n    hr: \"hr\",\n    a: \"a\",\n    span: \"span\",\n    ol: \"ol\",\n    li: \"li\",\n    ul: \"ul\",\n    strong: \"strong\"\n  }, _provideComponents(), props.components), {Delete} = _components;\n  if (!Delete) _missingMdxReference(\"Delete\", true);\n  return React.createElement(React.Fragment, null, React.createElement(_components.h2, null, \"문제 상황\"), \"\\n\", React.createElement(_components.p, null, \"AWS Lambda 함수를 작성하던 중, AWS RDS와의 연결과 API 호출이 필요한 상황이었다. RDS 연결을 위해서 Lambda에 이미 VPC를 설정해놓은 상태였는데, 이후 API 호출이 실패하기 시작했다.\"), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"문제 해결\"), \"\\n\", React.createElement(_components.p, null, \"약간 삽질하다가 \", React.createElement(_components.a, {\n    href: \"https://repost.aws/ko/knowledge-center/internet-access-lambda-function\"\n  }, \"AWS Post\"), \"에서 해결책을 찾을 수 있었다.\\nLambda는 내부망에서 실행되기 때문에, Lambda에서 외부 API를 호출할 때는 NAT Gateway를 통해서 인터넷 인터넷 게이트웨이에 연결이 필요하다는 것이었다. \", React.createElement(Delete, null, \"(근데, Mediaconvert나 System Manager는 같은 AWS 서비스 인데...)\")), \"\\n\", React.createElement(_components.p, null, \"아래 그림의 New Version부분과 설정 순서를 확인해보자.\"), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/21b4d/diagram.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 98.15950920245399%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD0klEQVR42nVUW08bRxQejC/YLhjXLcbYjo0v2FlfYdllbQyjGDuksRtCpVGjNhFVqy5KCKqMH5zWSKOmFxpBSKhA0aoPUVVFrSw1UvPQPlQqjSr1oe07P2c7Z+11bEhG+jS7M2e+OXPOdw6ilBp0IKQO6FA7gHVZUUyyrJh6bV8FhKhqQIQMIjZm7kek2f3Y22zRINUkq0QkKy/zplJDdlza3BzBFBvhH6B9K7wJ9TpCWowHFigyAOH8IVeQHiZXOUTM8auCCxP8Gu3ssTFwCgjJQNiz3/aQ6gsIbtZmxWPLHyUOpz6dTFuJzxtsjgfYQTM6NTClRqRq5IaXEnKUMzMDA4H5QSD7UzO4fnIv9MMYtYTQAbKsi79yNwt/l8Crldij4ArXygbWAkOh1GIqmMrHzhBiiowwa8/cQc5vatFrz7aTX3moK46OkfGDuSfRG4UnJbBZzuwEy3Ofz0UuRSxcBmfjMxf4lxMCGUNqx+F03XMNQ/ADDxyj+Lh9mbbPnglEhfdSzk4MB7pP1tOtquoAxDCyGbHATFjmKSOTq7wtXS7b0+W0nWffvCx3s0xaZLBtRw0wA1CfhlRVy56uP+0SvmpbWF71FIvX3JIkWSmTVK9Gz+iQ9shG/Da6ID6MEfZ4Y1Wu2tLXy3bwokqprVy/bgfPfEybALyGhyCunSy3o9GNYYcwd5QQ8geJi0xgJuEWNw461A4AmE0uVx6TihXv/HzpXL5UmsitlscKlYqT44i5n/CUDtO7bnv+kDtK3Q3z8Y3JqUjTH45+5vPqwadMd/BkkBnG2NgV+hlCBZlAMpCY9G5wLvvxhXx++ZMr4W1/YuILp18QllxxYdh1o/A9vi39K7Y9p6+uFMQy9754MEK4lpkJeSQup2ZEcrly/u5w1EutPt2Td/BefA0/jusSe3H+BaFmyBHOvL7wx8pHpT/Pjx/scn56ZcKzxb/hoCujAYpHEes47UaAUDH5nfut9I9TMgtTKLsY9WWK3rZK+kqPmCuFO6HZd/f8ib2/HvlqT8XKzTr/4XZjeqj5j9/R+C2IaEtLwFJqP1Sa3p8FbUb5ohieXsx1dSiKok8QhIQ4n80kk5NuaGexxuMg2lBdz5sLX558nfkZbZxMvNl8GtYJ+WrVJlwWxsEWEoMxNArmIfzEYrFhRjrCXeRe53neBhvOxrNzqP58cu3W1tLWbfmqpfZLxHHn95BOqI0WGjwTQ9qXlE4tM0Nf7b7VXd+1I+U/EyLqoLtet3uoYkPHTCZApJGxrtRDSHtrmXRc76vTVrueFajtzj/s9eJU+zf8D4umZiPJOUHpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"VPC Setting\\\"\\n        title=\\\"\\\"\\n        src=\\\"/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/a6d36/diagram.png\\\"\\n        srcset=\\\"/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/222b7/diagram.png 163w,\\n/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/ff46a/diagram.png 325w,\\n/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/a6d36/diagram.png 650w,\\n/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/e548f/diagram.png 975w,\\n/GatsbyBlog/static/a92e053aeab4e51e6dfb50e0b513c4b9/21b4d/diagram.png 1280w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"NAT Gateway에 설정할 EIP(Elastic IP, 고정형 공인 IP)를 하나 발급받는다. (AWS에서는 탄력적인 IP 주소라고 부른다.)\"), \"\\n\", React.createElement(_components.li, null, \"원래 인터넷과 연결되어 있던 서브넷에 NAT Gateway를 생성한다.\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"1번에서 생성한 EIP를 할당해준다.\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"Private 서브넷을 생성하고 route table을 이용해서 Private 서브넷의 아웃바운드를 NAT Gateway로 설정한다.\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"여기서 필터링을 적용할 수 있는데, 일단 모든 아웃바운드를 NAT Gateway로 보냈음\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, \"Lambda의 VPC 설정에서 3번에서 생성한 Private 서브넷을 설정해준다.\", \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"Lambda에서 VPC이 안될 경우, 실행 역할에 \", React.createElement(_components.strong, null, \"AWSLambdaVPCAccessExecutionRole\"), \" 정책이 있는지 확인하자.\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"NAT Instance 이야기\"), \"\\n\", React.createElement(_components.p, null, \"NAT Gateway가 하는 일은 근본적으로 내부에서 할당된 Private IP를 Public IP로 변환해주는 일이다.\\n즉, \", React.createElement(_components.strong, null, \"NAT Gateway를 쓰지 않더라도\"), \" Public IP(공인 IP)를 가지고 있는 Instance에서 이 작업을 수행할 수 있다.\\n그리고, 이런 Instance를 쉽게 구축할 수 있도록 커뮤니티에 NAT Instance 이미지가 많이 있다.\"), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.span, {\n    dangerouslySetInnerHTML: {\n      __html: \"<span\\n      class=\\\"gatsby-resp-image-wrapper\\\"\\n      style=\\\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 650px; \\\"\\n    >\\n      <a\\n    class=\\\"gatsby-resp-image-link\\\"\\n    href=\\\"/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/eacc8/nat-ami.png\\\"\\n    style=\\\"display: block\\\"\\n    target=\\\"_blank\\\"\\n    rel=\\\"noopener\\\"\\n  >\\n    <span\\n    class=\\\"gatsby-resp-image-background-image\\\"\\n    style=\\\"padding-bottom: 109.81595092024541%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAYAAADAQbwGAAAACXBIWXMAABYlAAAWJQFJUiTwAAAERUlEQVR42n1U32/bVBSOVClSK/UF9oL4F6LSrgnpQlq2qQO0DiboCy+wSpB/BmnkhQcE0qQJ8VJNmoqGtE0tLVQaBFVNQ6sx0JomTmI78W8n8bV9bR/Ouem0ZjCu9OleXx9//s53zr2pXCaTXSjkvpo9n/syk5kpZzKZ8szsfDmXv1AuForlYnGpXFy6iPPFcqFA60vl+Vy+nJmZK8/OzZdnMTabXbiZzeW/npnJzqXyb6+Urq9+AsvXVuOFpfcge2EZ5hHZt65AtrAM+cV3AWPgzaVrArml0bpw+TosXvkIissfwuI7q/zS1Y/hfP7yWmp//+Azx+mDx1hguwNeb0j8uN4Qc7uj8BahLYt1B9FsdXhHUblpWlx/DhaEHHZ3dz9N7e3tlZIkARwx5xzcfh/iOIaXDYrlPBKguBCJmO9zeodca6lqtVbyg5BexmEYQn8wAMMwwXFcQW7j3NN03B9Ct6fBAGcijaJYII4TJA0FYaVSWUvVarUSY74gJIVDz4N+fwAB/oQxD4ltcGwbLMvCHxm4H0CCyghxFCFp9CJhtUT503siJCWq2sMPfXCHDCRVg55pQ9ewwUCvhz5m4QXQZwG4HsbgGveeE5KHHheeiZR93xekccTBCRI4qMvwpClDXTXgaUeDp7IGku5CU3Og0bOgiTCHZwir1WqJhSibc6GQPFLUrkglQn+oXobtwkmrAx1Uq2gGqLop1DIsjI/vfR6Ne0gVQ4NjInFcF3T0ioYfeHDY+h3aSgv+evI3NE4aIMvyCIoCgc8gam1B5OnjCj2PiaIIQqxqu90RhPTsBUOstgtqtweGaYJpYYGwSI7bR3sCajaM4+MKY8wrPu3DAbaNiR/S4FEIdfkx9PQunKA6qdVGdYqAbTtEBFz6CRUa4wqHqBDVCEJSa6MC0cBI2LYaoFsadGQVNF0fqTQtXBswGHrY6dG4QlEU7EMifOahgR8MhlhpUh5woeak0URSWfSiro/AGHn4gsKjo6OS8Ou0sanKFOgxoVqkToQtrDIVi/yjZwu9pDjscIr7N+Gzs0ynpNVun3rI4UR5DEpXhuPjulDnYgZE2MdjSaeFy48gYtbLCSlVRVWFOuxMkKw6aJaO6kyRJtlhIaGG5JQNsmFs+P+EZD4VhW4Tnw1A0zSo/XEIkiRhWzniXFNRfOzDxK5DFAzG20awYRviNZRgyomsqEkYhAkLWFJr/pbIvU4iSe0ErUiwdZIWoiFJCVqQRMafSciccHR9VW6MKSRFpOwscBtbyRsVBJVRS5FKOvNiBD0892fuw+++X/+8sncAO7u/xg+3fobN7V3Y+eURbCMebG3DzdtfwPrGXVi/8wPcuXsPNu7dhx/vb8KDzR3YotiNb2Bn6yGv7B/Ct7du30hNTr7y+uT0q+9PTEyspFKp/8AUYuJ0Tgukp88JTKSnV9Ln3lhJT527mp6c/mBqauq1fwB+D8Bg58b4YwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n  ></span>\\n  <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        alt=\\\"ami-list\\\"\\n        title=\\\"\\\"\\n        src=\\\"/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/a6d36/nat-ami.png\\\"\\n        srcset=\\\"/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/222b7/nat-ami.png 163w,\\n/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/ff46a/nat-ami.png 325w,\\n/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/a6d36/nat-ami.png 650w,\\n/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/e548f/nat-ami.png 975w,\\n/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/3c492/nat-ami.png 1300w,\\n/GatsbyBlog/static/263ed858f35f0b1a8ee7478a67ca4fd7/eacc8/nat-ami.png 3232w\\\"\\n        sizes=\\\"(max-width: 650px) 100vw, 650px\\\"\\n        style=\\\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\\\"\\n        loading=\\\"lazy\\\"\\n        decoding=\\\"async\\\"\\n      />\\n  </a>\\n    </span>\"\n    }\n  }), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.p, null, \"그런데, 왜 Instance 까지 만들어서 NAT Gateway를 대체하고자 할까?\"), \"\\n\", React.createElement(_components.p, null, \"요금표를 보면 알 수 있다.\"), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"데이터 전송 요금은 모두 EC2 표준 데이터 전송 요금 적용\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://aws.amazon.com/ko/vpc/pricing/\"\n  }, \"AWS VPC 요금\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"시간당 0.059 USD + 데이터 처리 요금\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://aws.amazon.com/ko/ec2/pricing/on-demand/\"\n  }, \"EC2 On-demand 요금\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, \"t3.micro: 시간당 0.0104 USD\"), \"\\n\", React.createElement(_components.li, null, \"t3.medium: 시간당 0.0416 USD\"), \"\\n\"), \"\\n\"), \"\\n\"), \"\\n\", React.createElement(\"br\"), \"\\n\", React.createElement(_components.p, null, \"확인할 수 있듯이 가격차이가 상당하기 때문에 상황에 맞게 Gateway와 Instance를 선택해야한다.\\n고려할 수 있는 상황이라면, CloudWatch를 통한 모니터링 및 유지 관리 같은 것이 있지 않을까?\"), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"요약\"), \"\\n\", React.createElement(_components.ol, null, \"\\n\", React.createElement(_components.li, null, \"AWS Lambda에서 외부 API 호출이 안되었음 -> AWS Lambda의 VPC 설정 문제임을 파악\"), \"\\n\", React.createElement(_components.li, null, \"NAT Gateway에 고정 IP 할당하고 VPC를 올바르게 설정해서 해결\"), \"\\n\", React.createElement(_components.li, null, \"NAT Gateway 말고, NAT 역할을 하는 인스턴스를 띄워보는건 어떨까? 생각해보기\"), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.strong, null, \"같은 AWS 서비스 간의 통신이라도 인터넷 연결이 필요하다.\")), \"\\n\"), \"\\n\", React.createElement(_components.hr), \"\\n\", React.createElement(_components.h2, null, \"Ref.\"), \"\\n\", React.createElement(_components.ul, null, \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/nat-gateway-scenarios.html\"\n  }, \"AWS VPC Docs\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://repost.aws/ko/knowledge-center/internet-access-lambda-function\"\n  }, \"AWS Blog Post\")), \"\\n\", React.createElement(_components.li, null, React.createElement(_components.a, {\n    href: \"https://docs.aws.amazon.com/ko_kr/vpc/latest/userguide/vpc-nat-comparison.html\"\n  }, \"NAT Gateway vs NAT Instance\")), \"\\n\"));\n}\nfunction MDXContent(props = {}) {\n  const {wrapper: MDXLayout} = Object.assign({}, _provideComponents(), props.components);\n  return MDXLayout ? React.createElement(MDXLayout, props, React.createElement(_createMdxContent, props)) : _createMdxContent(props);\n}\nexport default MDXContent;\nfunction _missingMdxReference(id, component) {\n  throw new Error(\"Expected \" + (component ? \"component\" : \"object\") + \" `\" + id + \"` to be defined: you likely forgot to import, pass, or provide it.\");\n}\n","import GATSBY_COMPILED_MDX from \"/Users/bgkang/Personal/GatsbyBlog/src/posts/aws/lambda/lambda-vpc-setting/index.mdx\";\nimport React from \"react\";\nimport {MDXProvider} from \"@mdx-js/react\";\nimport Basic from \"./basic\";\nimport MdxComponents from \"../components/post/components\";\nimport \"@code-hike/mdx/dist/index.css\";\nimport {Heading, VStack, Text, Wrap, WrapItem, Tag, Box} from \"@chakra-ui/react\";\nimport Seo from \"./seo\";\nconst Post = _ref => {\n  var _data$mdx$frontmatter, _data$mdx$frontmatter2, _data$mdx$frontmatter3, _data$mdx$frontmatter4;\n  let {data, children} = _ref;\n  const month = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n  if (!data.mdx.frontmatter) {\n    return React.createElement(Basic, null, React.createElement(VStack, {\n      h: \"100%\",\n      justifyContent: \"center\"\n    }, React.createElement(Heading, {\n      pb: \"10px\"\n    }, \"Something Wrong\"), React.createElement(Text, null, \"\\uC8C4\\uC1A1\\uD569\\uB2C8\\uB2E4, \\uD398\\uC774\\uC9C0\\uC5D0 \\uB85C\\uB529\\uC5D0 \\uBB38\\uC81C\\uAC00 \\uC788\\uC2B5\\uB2C8\\uB2E4.\", React.createElement(\"br\", null), \" \\uAD00\\uB9AC\\uC790\\uC5D0\\uAC8C \\uBB38\\uC758 \\uD574\\uC8FC\\uC138\\uC694.\")));\n  }\n  return React.createElement(Basic, null, React.createElement(Seo, {\n    title: data.mdx.frontmatter.title || \"\",\n    url: (data.site.siteMetadata.siteUrl || \"\") + \"/post/\" + (data.mdx.frontmatter.slug || \"\"),\n    description: data.mdx.frontmatter.description || \"\"\n  }), React.createElement(Box, {\n    pt: \"50px\",\n    width: \"80vw\"\n  }, React.createElement(Heading, null, data.mdx.frontmatter.title), data.mdx.frontmatter.description && React.createElement(Text, {\n    mt: \"5px\",\n    color: \"gray\"\n  }, data.mdx.frontmatter.description), data.mdx.frontmatter.date && React.createElement(Heading, {\n    mt: \"40px\",\n    size: \"18px\",\n    color: \"gray\"\n  }, month[new Date((_data$mdx$frontmatter = data.mdx.frontmatter.date) === null || _data$mdx$frontmatter === void 0 ? void 0 : _data$mdx$frontmatter.toString()).getMonth()], \" \", new Date((_data$mdx$frontmatter2 = data.mdx.frontmatter.date) === null || _data$mdx$frontmatter2 === void 0 ? void 0 : _data$mdx$frontmatter2.toString()).getDate(), \", \", new Date((_data$mdx$frontmatter3 = data.mdx.frontmatter.date) === null || _data$mdx$frontmatter3 === void 0 ? void 0 : _data$mdx$frontmatter3.toString()).getFullYear()), data.mdx.frontmatter.tags && React.createElement(Wrap, {\n    mt: \"20px\"\n  }, (_data$mdx$frontmatter4 = data.mdx.frontmatter.tags) === null || _data$mdx$frontmatter4 === void 0 ? void 0 : _data$mdx$frontmatter4.map((value, key) => React.createElement(WrapItem, {\n    key: key\n  }, React.createElement(Tag, null, value))))), React.createElement(Box, {\n    mt: \"50px\",\n    width: \"80vw\"\n  }, React.createElement(MDXProvider, {\n    components: MdxComponents\n  }, children)));\n};\nPost\nexport default function GatsbyMDXWrapper(props) {\n  return React.createElement(Post, props, React.createElement(GATSBY_COMPILED_MDX, props));\n}\nconst query = \"3104218319\";\n"],"names":["_createMdxContent","props","_components","Object","assign","h2","p","hr","a","span","ol","li","ul","strong","_provideComponents","components","Delete","id","component","Error","_missingMdxReference","React","href","dangerouslySetInnerHTML","__html","wrapper","MDXLayout","Post","_ref","_data$mdx$frontmatter","_data$mdx$frontmatter2","_data$mdx$frontmatter3","_data$mdx$frontmatter4","data","children","mdx","frontmatter","Basic","Seo","title","url","site","siteMetadata","siteUrl","slug","description","Box","pt","width","Heading","Text","mt","color","date","size","Date","toString","getMonth","getDate","getFullYear","tags","Wrap","map","value","key","WrapItem","Tag","MDXProvider","MdxComponents","VStack","h","justifyContent","pb","GatsbyMDXWrapper","GATSBY_COMPILED_MDX"],"sourceRoot":""}